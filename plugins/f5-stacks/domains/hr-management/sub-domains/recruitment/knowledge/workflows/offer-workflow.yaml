name: offer-workflow
display_name: Offer Management Workflow
description: |
  End-to-end workflow for creating, approving, extending, and managing
  job offers including negotiation, contingencies, and acceptance.

domain: hr-management
subdomain: recruitment
category: workflows
version: "1.0.0"
status: active

workflow:
  id: WF-OFR-001
  name: offer_management
  trigger: hiring_decision_made

  participants:
    - role: recruiter
      responsibilities:
        - prepare_offer
        - coordinate_approvals
        - extend_verbal_offer
        - manage_negotiation

    - role: hiring_manager
      responsibilities:
        - determine_offer_details
        - approve_offer
        - participate_in_sell

    - role: hr_partner
      responsibilities:
        - validate_compensation
        - ensure_compliance
        - final_review

    - role: compensation_team
      responsibilities:
        - band_validation
        - equity_analysis
        - internal_equity_check

    - role: approvers
      responsibilities:
        - approve_based_on_authority
        - review_exceptions

  stages:
    - stage: 1
      name: Offer Preparation
      duration: 1-2 days

      steps:
        - id: STEP-001
          name: gather_offer_inputs
          actor: recruiter
          actions:
            - collect_hiring_manager_input
            - verify_candidate_expectations
            - check_budget_availability
          inputs:
            - hiring_decision
            - candidate_expectations
            - salary_range
            - budget

        - id: STEP-002
          name: determine_offer_components
          actor: hiring_manager
          with: recruiter
          components:
            base_salary:
              source: salary_range
              consideration: experience_and_expectations
            bonus:
              source: role_standard
              type: [signing, annual_target]
            equity:
              source: equity_band
              consideration: level_and_role
            start_date:
              consideration: candidate_availability
            other:
              - relocation
              - title
              - reporting_structure

        - id: STEP-003
          name: validate_compensation
          actor: compensation_team
          checks:
            - within_salary_band
            - internal_equity
            - market_competitiveness
          outputs:
            - validation_result
            - recommendations

        - id: STEP-004
          name: draft_offer
          actor: recruiter
          actions:
            - complete_offer_form
            - attach_documentation
            - set_contingencies
          outputs:
            - offer_draft

    - stage: 2
      name: Offer Approval
      duration: 1-3 days

      steps:
        - id: STEP-010
          name: initiate_approval_workflow
          actor: system
          actions:
            - determine_approval_chain
            - create_approval_tasks
            - notify_approvers

        - id: STEP-011
          name: approval_routing
          actor: system
          routing:
            - condition: base_salary <= 100000
              approvers: [hiring_manager, hr_partner]

            - condition: base_salary <= 200000
              approvers: [hiring_manager, department_head, hr_partner]

            - condition: base_salary <= 500000
              approvers: [hiring_manager, department_head, hr_director, cfo_delegate]

            - condition: base_salary > 500000
              approvers: [hiring_manager, department_head, chro, cfo, ceo]

            - condition: sign_on_bonus > 25000
              additional: hr_director

            - condition: equity_grant
              additional: compensation_committee

        - id: STEP-012
          name: approval_processing
          actor: approvers
          actions:
            - review_offer_details
            - approve_or_reject_or_request_changes
          sla: 24_hours_per_approver
          escalation:
            at: 36_hours
            to: skip_level

        - id: STEP-013
          name: handle_approval_outcome
          actor: system
          outcomes:
            all_approved:
              action: proceed_to_extend
            rejected:
              action: return_to_preparation
              notify: recruiter_and_hiring_manager
            changes_requested:
              action: revise_and_resubmit

    - stage: 3
      name: Offer Extension
      duration: same_day

      steps:
        - id: STEP-020
          name: verbal_offer
          actor: recruiter
          with: hiring_manager
          actions:
            - call_candidate
            - present_offer_verbally
            - answer_questions
            - gauge_reaction
          content:
            - base_salary
            - bonus_structure
            - equity_if_applicable
            - start_date
            - contingencies
            - deadline

        - id: STEP-021
          name: document_verbal_response
          actor: recruiter
          actions:
            - record_candidate_response
            - note_concerns_or_questions
            - set_next_steps
          outcomes:
            accepted_verbally: proceed_to_written
            needs_time: set_follow_up
            wants_to_negotiate: enter_negotiation
            declined: document_and_close

        - id: STEP-022
          name: send_written_offer
          actor: recruiter
          actions:
            - generate_offer_letter
            - attach_documents
            - send_via_docusign
          documents:
            - offer_letter
            - benefits_summary
            - equity_agreement
            - relocation_agreement
            - background_check_authorization
          deadline: 5_business_days

    - stage: 4
      name: Negotiation (if needed)
      duration: 1-5 days

      steps:
        - id: STEP-030
          name: receive_counter
          actor: recruiter
          actions:
            - document_counter_offer
            - assess_reasonableness
            - consult_hiring_manager

        - id: STEP-031
          name: evaluate_counter
          actor: hiring_manager
          with: recruiter
          considerations:
            - budget_availability
            - internal_equity_impact
            - candidate_value
            - market_conditions
          options:
            - accept_counter
            - counter_the_counter
            - hold_firm
            - walk_away

        - id: STEP-032
          name: respond_to_counter
          actor: recruiter
          actions:
            - communicate_decision
            - if_revised: get_reapproval
            - document_final_terms

        - id: STEP-033
          name: final_offer
          actor: recruiter
          actions:
            - confirm_final_terms
            - send_revised_offer_if_changed
            - set_final_deadline

      constraints:
        max_negotiation_rounds: 2
        max_increase_from_initial: 10%
        approval_required_for_changes: true

    - stage: 5
      name: Offer Acceptance
      duration: 1-5 days

      steps:
        - id: STEP-040
          name: monitor_deadline
          actor: system
          actions:
            - track_deadline
            - send_reminders
          reminders:
            - at: 2_days_before
            - at: 1_day_before
            - at: day_of

        - id: STEP-041
          name: process_response
          actor: recruiter
          outcomes:
            accepted:
              action: proceed_to_contingencies
              notify: [hiring_manager, hr_partner, team]
            declined:
              action: document_reason
              next: silver_medalist_or_reopen
            extension_requested:
              action: evaluate_request
              approval: recruiter_discretion

        - id: STEP-042
          name: confirm_acceptance
          actor: recruiter
          actions:
            - verify_signature
            - send_confirmation
            - trigger_contingencies

    - stage: 6
      name: Contingency Processing
      duration: 5-14 days

      steps:
        - id: STEP-050
          name: initiate_contingencies
          actor: system
          actions:
            - order_background_check
            - request_references
            - initiate_drug_screen
            - verify_work_authorization

        - id: STEP-051
          name: track_contingencies
          actor: coordinator
          contingencies:
            background_check:
              typical_duration: 5-7_days
              required: true

            reference_check:
              typical_duration: 3-5_days
              required: true
              minimum: 2_references

            drug_screen:
              typical_duration: 2-3_days
              required: where_applicable

            education_verification:
              typical_duration: 5-10_days
              required: if_degree_required

            employment_verification:
              typical_duration: 5-10_days
              required: for_last_2_employers

        - id: STEP-052
          name: evaluate_results
          actor: hr_partner
          outcomes:
            all_clear:
              action: finalize_hire
            issues_found:
              action: review_and_assess
              process: fcra_adverse_action_if_needed
            incomplete:
              action: extend_contingency_period
              or: make_risk_decision

    - stage: 7
      name: Finalization
      duration: immediate

      steps:
        - id: STEP-060
          name: finalize_hire
          actor: recruiter
          actions:
            - mark_candidate_hired
            - close_requisition
            - notify_stakeholders

        - id: STEP-061
          name: trigger_onboarding
          actor: system
          actions:
            - create_onboarding_checklist
            - notify_hr_operations
            - notify_it_for_equipment
            - notify_facilities

        - id: STEP-062
          name: candidate_communication
          actor: recruiter
          actions:
            - send_congratulations
            - provide_pre_start_information
            - introduce_to_onboarding_coordinator

  offer_letter_components:
    required:
      - position_title
      - department
      - reporting_to
      - start_date
      - base_salary
      - pay_frequency
      - employment_type
      - work_location
      - contingencies
      - at_will_statement
      - offer_expiration

    conditional:
      - signing_bonus: if_applicable
      - annual_bonus: if_applicable
      - equity_grant: if_applicable
      - relocation: if_applicable
      - visa_sponsorship: if_applicable

  automation:
    - name: auto_approval_routing
      trigger: offer_submitted
      action: determine_and_route_approvals

    - name: approval_reminders
      trigger: approval_pending
      action: send_reminder
      timing: [12_hours, 24_hours]

    - name: offer_letter_generation
      trigger: all_approvals_received
      action: generate_offer_letter
      template: by_location_and_level

    - name: deadline_tracking
      trigger: offer_sent
      action: track_and_remind

    - name: contingency_initiation
      trigger: offer_accepted
      action: start_all_required_contingencies

    - name: onboarding_trigger
      trigger: contingencies_cleared
      action: create_onboarding_checklist

  notifications:
    - event: offer_submitted_for_approval
      recipients: [approvers]
      template: offer_approval_request

    - event: offer_approved
      recipients: [recruiter, hiring_manager]
      template: offer_approved

    - event: offer_rejected
      recipients: [recruiter, hiring_manager]
      template: offer_rejected
      include: rejection_reason

    - event: offer_accepted
      recipients: [hiring_manager, hr_partner, team]
      template: new_hire_announcement

    - event: offer_declined
      recipients: [hiring_manager, recruiter]
      template: offer_declined
      include: decline_reason

    - event: contingencies_cleared
      recipients: [recruiter, candidate]
      template: contingencies_complete

  sla:
    offer_preparation:
      target: 1_business_day
      maximum: 2_business_days

    approval_cycle:
      target: 24_hours
      maximum: 48_hours

    verbal_to_written:
      target: same_day
      maximum: 24_hours

    contingency_processing:
      target: 7_business_days
      maximum: 14_business_days

  metrics:
    - name: offer_acceptance_rate
      calculation: accepted / extended
      target: "> 85%"

    - name: time_to_offer
      calculation: decision_to_offer_extended
      target: "< 3 days"

    - name: approval_cycle_time
      calculation: submit_to_approved
      target: "< 48 hours"

    - name: offer_to_start
      calculation: accepted_to_start_date
      target: "< 3 weeks"

    - name: contingency_pass_rate
      calculation: cleared / total
      target: "> 95%"

    - name: decline_reasons
      type: categorical
      track: for_improvement

  compliance:
    - requirement: fcra_adverse_action
      standard: FCRA
      implementation: pre_adverse_and_adverse_action_process

    - requirement: pay_transparency
      standard: varies_by_location
      implementation: include_salary_range_where_required

    - requirement: offer_documentation
      standard: SOX
      implementation: approval_audit_trail

    - requirement: non_discrimination
      standard: EEO
      implementation: consistent_offer_criteria

  exception_handling:
    - exception: approver_unavailable
      action: delegate_to_backup
      sla: 4_hours

    - exception: deadline_extension_requested
      action: recruiter_discretion
      maximum: 5_additional_days

    - exception: contingency_failure
      action: fcra_process
      review: hr_and_legal

    - exception: candidate_withdraws_after_acceptance
      action: assess_and_document
      next: silver_medalist_or_reopen

    - exception: offer_rescission_needed
      action: hr_and_legal_review
      communication: carefully_worded
