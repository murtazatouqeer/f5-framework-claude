name: attendance-rules
display_name: Attendance Rules
description: |
  Business rules for attendance management including working hours,
  overtime, lateness, and absence policies.

domain: hr-management
subdomain: core
category: business-rules
version: "1.0.0"
status: active

compliance:
  vietnam_labor_code:
    reference: "Law 45/2019/QH14"
    effective_date: "2021-01-01"
    key_articles:
      - article: 105-107
        topic: "Working Hours"
      - article: 108-109
        topic: "Overtime"
      - article: 110-111
        topic: "Night Work"
      - article: 112-117
        topic: "Rest Periods"

rules:
  # Working Hours Rules
  working_hours:
    - id: ATT-HRS-001
      name: "Standard Working Hours"
      description: "Normal working hour limits"
      priority: critical

      limits:
        daily:
          standard: 8
          maximum: 10
          unit: "hours"

        weekly:
          standard: 40
          maximum: 48
          unit: "hours"

      special_conditions:
        hazardous_work:
          daily_max: 6
          weekly_max: 36

        night_work:
          regular_hours_apply: true
          additional_rules: "see_night_work_section"

    - id: ATT-HRS-002
      name: "Flexible Working Hours"
      description: "Flexible schedule arrangements"
      priority: medium

      flexitime:
        enabled: true

        core_hours:
          start: "10:00"
          end: "16:00"
          mandatory: true

        flexible_hours:
          morning_start: "07:00"
          morning_end: "10:00"
          evening_start: "16:00"
          evening_end: "19:00"

        requirements:
          complete_daily_hours: true
          manager_approval: "initial_setup"

      eligibility:
        exclude:
          - probation_employees
          - customer_facing_roles
          - shift_workers

    - id: ATT-HRS-003
      name: "Break Time"
      description: "Required break periods"
      priority: high

      breaks:
        after_6_hours:
          minimum: 30
          maximum: 60
          unit: "minutes"
          paid: false

        lunch_break:
          standard: 60
          included_in_shift: false

        short_breaks:
          frequency: "discretionary"
          included_in_work_hours: true

  # Overtime Rules
  overtime:
    - id: ATT-OVT-001
      name: "Overtime Limits"
      description: "Maximum overtime allowed"
      priority: critical

      limits:
        daily:
          normal: 2
          special_approval: 4
          maximum: 4
          unit: "hours"

        monthly:
          standard: 30
          special_approval: 40
          maximum: 40
          unit: "hours"

        yearly:
          standard: 200
          special_industries: 300
          maximum: 300
          unit: "hours"

      special_industries:
        - textile
        - garment
        - leather
        - footwear
        - electronics
        - agricultural_processing
        - aquatic_products
        - telecommunications
        - electricity
        - water_supply

    - id: ATT-OVT-002
      name: "Overtime Rates"
      description: "Overtime payment rates"
      priority: critical

      rates:
        normal_day:
          minimum: 150
          unit: "percent_of_hourly_rate"

        rest_day:
          weekly_rest: 200
          unit: "percent_of_hourly_rate"

        public_holiday:
          rate: 300
          if_coincides_with_weekly_rest: 400
          unit: "percent_of_hourly_rate"

        night_work:
          additional: 30
          unit: "percent_on_top_of_applicable_rate"

    - id: ATT-OVT-003
      name: "Overtime Approval"
      description: "Overtime request and approval process"
      priority: high

      pre_approval:
        required: true
        exception: "emergency_situations"

      approval_authority:
        up_to_2_hours: "manager"
        2_to_4_hours: "department_head"
        special_cases: "hr_director"

      documentation:
        overtime_request_form: true
        business_justification: true
        employee_consent: true

    - id: ATT-OVT-004
      name: "Overtime Restrictions"
      description: "Who cannot work overtime"
      priority: critical

      prohibited_overtime:
        pregnant_workers:
          condition: "7th_month_or_later"
          night_work: "prohibited_from_7th_month"

        nursing_mothers:
          until: "child_12_months"
          night_work: "prohibited"

        minor_workers:
          overtime: "prohibited"
          night_work: "prohibited_except_specific_jobs"

        disabled_workers:
          requires: "individual_assessment"
          consent: "mandatory"

  # Night Work Rules
  night_work:
    - id: ATT-NGT-001
      name: "Night Work Definition"
      description: "Night work hours definition"
      priority: high

      definition:
        start: "22:00"
        end: "06:00"

      compensation:
        additional_rate: 30
        unit: "percent"
        on_top_of: "applicable_day_rate"

    - id: ATT-NGT-002
      name: "Night Work Requirements"
      description: "Requirements for night work"
      priority: high

      employer_obligations:
        - provide_transportation
        - ensure_security
        - adequate_lighting
        - rest_facilities

      rotation:
        recommended: true
        max_consecutive_nights: "company_policy"
        default: 7

  # Lateness and Early Departure Rules
  lateness:
    - id: ATT-LAT-001
      name: "Grace Period"
      description: "Allowed late arrival buffer"
      priority: medium

      grace_period:
        minutes: 5
        frequency: "per_arrival"

      calculation:
        late_from: "scheduled_start + grace_period"

    - id: ATT-LAT-002
      name: "Lateness Thresholds"
      description: "Lateness categorization"
      priority: high

      thresholds:
        minor:
          duration: "6-15 minutes"
          action: "warning_after_3_instances"

        moderate:
          duration: "16-30 minutes"
          action: "written_warning_after_2_instances"

        serious:
          duration: "31-60 minutes"
          action: "disciplinary_action"

        absence:
          duration: "over_4_hours"
          action: "mark_as_half_day_absent"

    - id: ATT-LAT-003
      name: "Lateness Accumulation"
      description: "Cumulative lateness policy"
      priority: medium

      accumulation:
        period: "calendar_month"

        thresholds:
          warning: 3
          written_warning: 5
          disciplinary: 8
          serious_disciplinary: 10
          unit: "instances"

      reset:
        timing: "monthly"
        exception: "disciplinary_action_in_progress"

  # Early Departure Rules
  early_departure:
    - id: ATT-ERL-001
      name: "Early Departure Policy"
      description: "Rules for leaving early"
      priority: high

      approval:
        required: true
        authority: "manager"

      categories:
        personal_emergency:
          documentation: "optional"
          salary_impact: "company_policy"

        medical_appointment:
          documentation: "recommended"
          salary_impact: "none_with_documentation"

        without_approval:
          consequences: "treated_as_lateness"

  # Absence Rules
  absence:
    - id: ATT-ABS-001
      name: "Absence Types"
      description: "Classification of absences"
      priority: high

      types:
        authorized:
          - approved_leave
          - business_travel
          - training
          - jury_duty
          - military_service

        unauthorized:
          - no_show_without_notice
          - exceeded_leave
          - denied_leave_taken

    - id: ATT-ABS-002
      name: "Unauthorized Absence"
      description: "Handling unauthorized absences"
      priority: critical

      consequences:
        1_day:
          action: "verbal_warning"
          salary: "deducted"

        2_consecutive_days:
          action: "written_warning"
          salary: "deducted"

        3_consecutive_days:
          action: "final_warning"
          salary: "deducted"

        5_consecutive_days:
          action: "termination_consideration"
          grounds: "job_abandonment"

      notification:
        employee_must_notify: "within_4_hours"
        method: "call_manager_or_hr"
        documentation: "within_24_hours_of_return"

    - id: ATT-ABS-003
      name: "Job Abandonment"
      description: "Job abandonment policy"
      priority: critical

      definition:
        consecutive_days: 5
        without_contact: true
        or: "20 cumulative_unauthorized_days_per_year"

      process:
        - attempt_contact (3 times)
        - written_notice_to_last_known_address
        - waiting_period (5 days)
        - termination_for_cause

  # Time Recording Rules
  time_recording:
    - id: ATT-REC-001
      name: "Check-in Requirements"
      description: "Mandatory time recording"
      priority: high

      requirements:
        check_in: "required"
        check_out: "required"
        method: ["biometric", "card", "mobile_app"]

      location:
        office_employees: "designated_terminals"
        remote_employees: "mobile_app_with_location"
        field_employees: "mobile_app_with_location"

    - id: ATT-REC-002
      name: "Missed Punches"
      description: "Handling forgotten check-in/out"
      priority: medium

      correction_process:
        employee_request: "within_24_hours"
        manager_approval: "required"
        hr_verification: "for_audit"

      limits:
        max_corrections_per_month: 3
        excess_consequence: "warning"

      documentation:
        reason_required: true
        supporting_evidence: "recommended"

    - id: ATT-REC-003
      name: "Multiple Check-ins"
      description: "Handling multiple shifts or breaks"
      priority: medium

      calculation:
        total_hours: "sum_of_all_segments"
        break_exclusion: "unpaid_breaks"

      validation:
        minimum_segment: "15 minutes"
        maximum_segments: "4 per day"

  # Remote Work Attendance
  remote_work:
    - id: ATT-REM-001
      name: "Remote Work Attendance"
      description: "Attendance tracking for remote workers"
      priority: medium

      requirements:
        check_in: "required_via_app"
        check_out: "required_via_app"

      verification:
        location: "optional_gps"
        activity: "periodic_status_updates"
        availability: "during_core_hours"

      expectations:
        response_time: "30 minutes"
        meeting_attendance: "mandatory"
        daily_standup: "required"

notifications:
  - event: late_arrival
    recipients: [manager]
    template: "late_arrival_notification"

  - event: unauthorized_absence
    recipients: [manager, hr_admin]
    template: "unauthorized_absence_alert"

  - event: overtime_approaching_limit
    threshold: 80
    recipients: [manager, hr_admin]
    template: "overtime_limit_warning"

  - event: missed_checkout
    timing: "end_of_day"
    recipients: [employee]
    template: "missed_checkout_reminder"

audit:
  enabled: true
  tracked_events:
    - check_ins
    - check_outs
    - corrections
    - overtime_requests
  retention: "5 years"
