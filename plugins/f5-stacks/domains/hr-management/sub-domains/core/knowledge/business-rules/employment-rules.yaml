name: employment-rules
display_name: Employment Rules
description: |
  Business rules for employment management including contract types,
  probation, onboarding, and employment status changes.

domain: hr-management
subdomain: core
category: business-rules
version: "1.0.0"
status: active

compliance:
  vietnam_labor_code:
    reference: "Law 45/2019/QH14"
    effective_date: "2021-01-01"
    key_articles:
      - article: 13-19
        topic: "Employment Contracts"
      - article: 24-27
        topic: "Probation"
      - article: 34-41
        topic: "Contract Termination"

rules:
  # Contract Type Rules
  contract_types:
    - id: EMP-CTR-001
      name: "Contract Type Selection"
      description: "Rules for determining appropriate contract type"
      priority: high

      conditions:
        indefinite_contract:
          trigger: "Two consecutive definite contracts completed"
          duration: "Unlimited"
          notice_period: "45 days"

        definite_contract:
          duration_range: "12-36 months"
          max_renewals: 2
          notice_period: "30 days"

        seasonal_contract:
          max_duration: "12 months"
          work_type: "Seasonal or specific work"

        probation:
          max_duration_complex: "60 days"
          max_duration_technical: "60 days"
          max_duration_standard: "30 days"
          salary_minimum: "85%"

    - id: EMP-CTR-002
      name: "Contract Conversion"
      description: "Automatic conversion to indefinite contract"
      priority: critical

      trigger:
        event: "definite_contract_end"
        condition: "second_renewal_completed"

      action:
        type: "auto_convert"
        target: "indefinite_contract"
        notification:
          - employee
          - manager
          - hr_admin

      validation:
        check: "no_termination_notice_given"
        within: "30 days before contract end"

    - id: EMP-CTR-003
      name: "Contract Expiry Warning"
      description: "Warning before contract expires"
      priority: high

      trigger:
        event: "contract_expiring"
        timing:
          - days_before: 60
            action: "notify_hr"
          - days_before: 45
            action: "notify_manager"
          - days_before: 30
            action: "notify_employee"

      action:
        type: "notification"
        template: "contract_expiry_warning"

      required_decision:
        deadline: "15 days before expiry"
        options:
          - renew
          - convert_to_indefinite
          - terminate

  # Probation Rules
  probation:
    - id: EMP-PRB-001
      name: "Probation Duration"
      description: "Maximum probation period by job complexity"
      priority: critical

      rules:
        managerial_positions:
          max_days: 180
          applies_to:
            - c_level
            - director
            - senior_manager

        specialized_technical:
          max_days: 60
          requires: "Technical certification or degree"

        skilled_workers:
          max_days: 30
          applies_to:
            - standard roles
            - operational positions

        other_work:
          max_days: 6
          applies_to:
            - simple manual work

    - id: EMP-PRB-002
      name: "Probation Salary"
      description: "Minimum salary during probation"
      priority: critical

      rule:
        minimum_percentage: 85
        base: "agreed_position_salary"

      exception:
        condition: "company_policy_higher"
        action: "use_higher_rate"

    - id: EMP-PRB-003
      name: "Probation Evaluation"
      description: "Required evaluation before probation end"
      priority: high

      trigger:
        event: "probation_ending"
        timing: "7 days before"

      requirements:
        - performance_review_completed
        - manager_recommendation
        - hr_review

      outcomes:
        pass:
          action: "convert_to_full_employment"
          salary_adjustment: "to_100%"
          benefits_activation: "full_package"

        extend:
          max_extension: "original_duration"
          requires: "written_agreement"

        fail:
          action: "terminate_employment"
          notice: "3 days"
          settlement: "wages_to_date"

    - id: EMP-PRB-004
      name: "Probation Termination"
      description: "Either party can terminate during probation"
      priority: high

      notice_required:
        by_employee: "3 days"
        by_employer: "3 days"

      payment:
        required: "All worked days"
        timing: "Within 7 days"

  # Onboarding Rules
  onboarding:
    - id: EMP-ONB-001
      name: "Required Documents"
      description: "Documents required before first day"
      priority: critical

      required_documents:
        identity:
          - type: "id_card"
            required: true
          - type: "passport"
            required: "for_foreigners"
          - type: "work_permit"
            required: "for_foreigners"

        education:
          - type: "degree"
            required: "if_position_requires"
          - type: "certificate"
            required: "if_position_requires"

        employment:
          - type: "social_insurance_book"
            required: true
          - type: "tax_code"
            required: true
          - type: "bank_account"
            required: true

        personal:
          - type: "photo"
            quantity: 4
            size: "4x6"
          - type: "health_certificate"
            required: true
            validity: "6 months"

    - id: EMP-ONB-002
      name: "First Day Checklist"
      description: "Required activities on first day"
      priority: high

      checklist:
        pre_arrival:
          - workstation_setup
          - email_account_created
          - access_cards_prepared
          - welcome_kit_prepared

        arrival:
          - reception_by_hr
          - office_tour
          - team_introduction
          - workstation_handover
          - equipment_sign_off

        orientation:
          - company_overview
          - policies_review
          - system_training
          - safety_briefing

    - id: EMP-ONB-003
      name: "Contract Signing"
      description: "Contract must be signed on or before first day"
      priority: critical

      requirements:
        timing: "On or before first working day"
        copies: 2
        signatures:
          - employee
          - authorized_representative

      attachments:
        - job_description
        - internal_regulations
        - confidentiality_agreement

      retention:
        employee_copy: true
        company_copy: "personnel_file"

    - id: EMP-ONB-004
      name: "System Access Setup"
      description: "Required system access within first week"
      priority: high

      access_requirements:
        day_1:
          - email
          - internal_portal
          - attendance_system

        week_1:
          - department_systems
          - project_tools
          - communication_platforms

      approval_flow:
        initiator: "hr_admin"
        approver: "it_admin"
        notification: "employee,manager"

  # Employment Status Rules
  status_changes:
    - id: EMP-STS-001
      name: "Status Transition Rules"
      description: "Valid status transitions"
      priority: critical

      valid_transitions:
        pre_hire:
          to: [active, withdrawn]
          requires: [contract_signed, documents_verified]

        active:
          to: [on_leave, suspended, terminated, retired]
          requires: "varies_by_target"

        on_leave:
          to: [active, terminated]
          requires: "leave_end_or_termination_approval"

        suspended:
          to: [active, terminated]
          requires: "suspension_review"

        terminated:
          to: []  # Final state

        retired:
          to: []  # Final state

    - id: EMP-STS-002
      name: "Status Change Approval"
      description: "Required approvals for status changes"
      priority: high

      approval_matrix:
        to_suspended:
          requires: [manager_approval, hr_approval]
          documentation: "suspension_letter"

        to_terminated:
          requires: [manager_approval, hr_approval, director_approval]
          documentation: "termination_letter"

        to_retired:
          requires: [hr_approval, employee_application]
          documentation: "retirement_application"

    - id: EMP-STS-003
      name: "Suspension Rules"
      description: "Rules for employee suspension"
      priority: high

      types:
        disciplinary:
          max_duration: "90 days"
          pay_status: "as_per_policy"

        investigation:
          max_duration: "30 days"
          pay_status: "usually_paid"

        administrative:
          max_duration: "varies"
          pay_status: "paid"

      requirements:
        - written_notice
        - reason_documented
        - review_date_set
        - access_restricted

  # Position Change Rules
  position_changes:
    - id: EMP-POS-001
      name: "Promotion Eligibility"
      description: "Minimum requirements for promotion"
      priority: medium

      requirements:
        tenure:
          minimum_months: 12
          in_current_role: 6

        performance:
          minimum_rating: 4
          consecutive_reviews: 2

        qualifications:
          meets_new_role: true
          training_completed: "as_required"

    - id: EMP-POS-002
      name: "Transfer Rules"
      description: "Rules for internal transfers"
      priority: medium

      voluntary_transfer:
        minimum_tenure: "6 months"
        manager_approval: required
        notice_period: "30 days"

      involuntary_transfer:
        requires: "business_justification"
        notice: "30 days"
        salary: "maintain_or_increase"
        employee_consent: "for_location_change"

    - id: EMP-POS-003
      name: "Salary Adjustment Rules"
      description: "Rules for salary changes"
      priority: high

      triggers:
        promotion:
          minimum_increase: "10%"
          maximum_increase: "30%"
          timing: "effective_from_promotion_date"

        annual_review:
          based_on: "performance_rating"
          budget: "company_budget"
          timing: "annual_review_cycle"

        market_adjustment:
          trigger: "market_data_review"
          frequency: "annual"
          approval: "ceo_approval"

  # Working Arrangement Rules
  working_arrangements:
    - id: EMP-WRK-001
      name: "Work Location"
      description: "Rules for work location arrangements"
      priority: medium

      options:
        office_based:
          default: true
          equipment: "company_provided"

        hybrid:
          requires: "manager_approval"
          minimum_office_days: 3
          equipment: "partial_home_setup"

        remote:
          requires: "director_approval"
          equipment: "full_home_setup"
          check_in: "daily_required"

      eligibility:
        probation_employees: "office_based_only"
        performance_requirement: "meets_expectations"

    - id: EMP-WRK-002
      name: "Flexible Working"
      description: "Flexible working hour arrangements"
      priority: medium

      options:
        standard:
          start: "08:00"
          end: "17:00"

        flexitime:
          core_hours: "10:00-16:00"
          flexible_start: "07:00-10:00"
          flexible_end: "16:00-19:00"

        compressed:
          days: 4
          hours_per_day: 10
          requires: "written_agreement"

notifications:
  - event: contract_expiring
    timing: [60, 45, 30, 15]
    recipients: [hr_admin, manager, employee]
    template: "contract_expiry_warning"

  - event: probation_ending
    timing: [14, 7]
    recipients: [manager, hr_admin]
    template: "probation_review_required"

  - event: status_changed
    timing: immediate
    recipients: [employee, manager, hr_admin]
    template: "status_change_notification"

audit:
  enabled: true
  tracked_events:
    - contract_changes
    - status_changes
    - salary_changes
    - position_changes
  retention: "10 years"
