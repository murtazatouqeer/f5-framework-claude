name: payroll
display_name: Payroll Management
description: |
  Comprehensive payroll management sub-domain for processing employee compensation,
  tax calculations, statutory compliance, and financial reporting. Supports
  Vietnam labor regulations, social insurance, and personal income tax requirements.

domain: hr-management
category: sub-domain
version: "1.0.0"
status: active

overview:
  purpose: |
    Manage end-to-end payroll processing including salary calculations, tax
    withholding, social insurance contributions, overtime payments, and
    statutory compliance for Vietnam labor market.

  scope:
    includes:
      - Salary structure management
      - Payroll period management
      - Payroll run processing
      - Payslip generation
      - Tax calculation (PIT/TNCN)
      - Social insurance (BHXH/BHYT/BHTN)
      - Overtime calculation
      - Bonus processing
      - Employee loans and advances
      - Bank file generation
      - Statutory reporting

    excludes:
      - Time and attendance tracking (separate module)
      - Benefits administration (separate module)
      - Recruitment and onboarding
      - Performance management

  key_processes:
    - Monthly payroll processing
    - Salary revision management
    - Tax filing and reporting
    - Year-end processing
    - Off-cycle payments

compliance:
  standards:
    - standard: Vietnam Labor Code
      description: Bộ luật Lao động 2019
      requirements:
        - Minimum wage compliance
        - Working hours and overtime limits
        - Payment timing requirements
        - Final settlement rules

    - standard: Social Insurance Law
      description: Luật BHXH 2014 (amended)
      requirements:
        - BHXH contribution rates (8% EE, 17.5% ER)
        - BHYT contribution rates (1.5% EE, 3% ER)
        - BHTN contribution rates (1% EE, 1% ER)
        - Contribution base limits

    - standard: Personal Income Tax Law
      description: Luật Thuế TNCN
      requirements:
        - Progressive tax brackets (5% - 35%)
        - Personal deduction (11M VND/month)
        - Dependent deduction (4.4M VND/person/month)
        - Non-resident withholding (20% flat)

    - standard: Minimum Wage Decree
      description: Nghị định về lương tối thiểu vùng
      requirements:
        - Region I: 4,680,000 VND
        - Region II: 4,160,000 VND
        - Region III: 3,640,000 VND
        - Region IV: 3,250,000 VND

    - standard: Overtime Regulations
      description: Quy định làm thêm giờ
      requirements:
        - Daily limit: 4 hours
        - Monthly limit: 40 hours
        - Annual limit: 200 hours (300 special cases)
        - OT rates: 150%, 200%, 300%

entities:
  primary:
    - name: EmployeePayroll
      description: Employee payroll profile and settings
      path: knowledge/entities/employee-payroll.yaml

    - name: SalaryStructure
      description: Salary component definitions
      path: knowledge/entities/salary-structure.yaml

    - name: PayrollPeriod
      description: Payroll period management
      path: knowledge/entities/payroll-period.yaml

    - name: PayrollRun
      description: Payroll processing run
      path: knowledge/entities/payroll-run.yaml

    - name: PaySlip
      description: Employee pay statement
      path: knowledge/entities/payslip.yaml

    - name: TaxCalculation
      description: Personal income tax calculation
      path: knowledge/entities/tax-calculation.yaml

    - name: SocialInsurance
      description: Social insurance contributions
      path: knowledge/entities/social-insurance.yaml

  supporting:
    - name: Earnings
      description: Earning types and amounts
      path: knowledge/entities/earnings.yaml

    - name: Deduction
      description: Deduction types and amounts
      path: knowledge/entities/deduction.yaml

    - name: Overtime
      description: Overtime hours and payments
      path: knowledge/entities/overtime.yaml

    - name: Bonus
      description: Bonus payments
      path: knowledge/entities/bonus.yaml

    - name: Loan
      description: Employee loans
      path: knowledge/entities/loan.yaml

    - name: BankFile
      description: Bank payment file
      path: knowledge/entities/bank-file.yaml

    - name: StatutoryReport
      description: Government reports
      path: knowledge/entities/statutory-report.yaml

business_rules:
  - name: salary-rules
    description: Salary calculation and minimum wage rules
    path: knowledge/business-rules/salary-rules.yaml

  - name: tax-rules
    description: Personal income tax rules
    path: knowledge/business-rules/tax-rules.yaml

  - name: insurance-rules
    description: Social insurance contribution rules
    path: knowledge/business-rules/insurance-rules.yaml

  - name: overtime-rules
    description: Overtime calculation rules
    path: knowledge/business-rules/overtime-rules.yaml

  - name: deduction-rules
    description: Deduction processing rules
    path: knowledge/business-rules/deduction-rules.yaml

workflows:
  - name: payroll-processing-workflow
    description: Monthly payroll processing
    path: knowledge/workflows/payroll-processing-workflow.yaml

  - name: salary-revision-workflow
    description: Salary change processing
    path: knowledge/workflows/salary-revision-workflow.yaml

  - name: tax-filing-workflow
    description: Tax declaration and filing
    path: knowledge/workflows/tax-filing-workflow.yaml

  - name: year-end-workflow
    description: Year-end payroll processing
    path: knowledge/workflows/year-end-workflow.yaml

  - name: off-cycle-payment-workflow
    description: Off-cycle payment processing
    path: knowledge/workflows/off-cycle-payment-workflow.yaml

use_cases:
  - name: employee-use-cases
    description: Employee self-service use cases
    path: knowledge/use-cases/employee-use-cases.yaml

  - name: payroll-admin-use-cases
    description: Payroll administrator use cases
    path: knowledge/use-cases/payroll-admin-use-cases.yaml

  - name: finance-use-cases
    description: Finance team use cases
    path: knowledge/use-cases/finance-use-cases.yaml

integrations:
  required:
    - system: HRIS
      purpose: Employee master data
      sync: real_time
      data:
        - employee_details
        - employment_status
        - department_assignment
        - position_changes

    - system: Time_Attendance
      purpose: Working hours data
      sync: daily
      data:
        - attendance_records
        - overtime_hours
        - leave_records

    - system: Banking
      purpose: Salary disbursement
      sync: per_payroll
      data:
        - bank_files
        - payment_confirmations

  optional:
    - system: ERP_Finance
      purpose: GL posting
      sync: per_payroll
      data:
        - journal_entries
        - cost_allocations

    - system: Tax_Authority
      purpose: E-filing
      sync: monthly_quarterly
      data:
        - tax_declarations
        - payment_records

    - system: BHXH_Portal
      purpose: Insurance filing
      sync: monthly
      data:
        - contribution_reports
        - adjustment_forms

metrics:
  operational:
    - name: payroll_accuracy
      description: Percentage of payslips without errors
      target: ">99.5%"

    - name: on_time_payment
      description: Payments made by scheduled date
      target: "100%"

    - name: processing_time
      description: Time from period close to payment
      target: "<3 business days"

  compliance:
    - name: tax_filing_timeliness
      description: Tax filings submitted on time
      target: "100%"

    - name: insurance_accuracy
      description: Correct insurance contributions
      target: "100%"

    - name: minimum_wage_compliance
      description: All employees at or above minimum wage
      target: "100%"

  financial:
    - name: payroll_cost_ratio
      description: Payroll cost as % of revenue
      track: monthly

    - name: overtime_cost
      description: Overtime as % of total payroll
      alert_threshold: ">10%"

    - name: processing_cost_per_employee
      description: Cost to process each payslip
      track: monthly

security:
  data_classification:
    highly_sensitive:
      - bank_account_numbers
      - tax_id_numbers
      - salary_amounts
      - personal_deductions

    sensitive:
      - employee_payroll_records
      - payslips
      - tax_calculations

  access_control:
    payroll_admin:
      - full_access_to_payroll_functions
      - cannot_process_own_payroll

    hr_manager:
      - view_department_payroll
      - approve_salary_changes

    finance:
      - view_payroll_summaries
      - process_bank_files
      - view_reports

    employee:
      - view_own_payslips
      - update_bank_details

  encryption:
    at_rest: AES-256
    in_transit: TLS_1.3
    bank_files: encrypted_and_signed

audit:
  track:
    - all_payroll_calculations
    - salary_changes
    - approval_actions
    - payment_processing
    - report_generation

  retention:
    payroll_records: 10_years
    tax_records: 10_years
    payment_records: 7_years

calendar:
  monthly:
    - day_1: Open new period
    - day_25: Cutoff for current period
    - day_28: Complete payroll processing
    - day_5_next: Payment date (typical)
    - day_20: Tax filing deadline

  quarterly:
    - q_end_plus_30: Quarterly tax filing

  annual:
    - december: 13th month bonus processing
    - march_31: Annual tax finalization
    - january: New year rollover
