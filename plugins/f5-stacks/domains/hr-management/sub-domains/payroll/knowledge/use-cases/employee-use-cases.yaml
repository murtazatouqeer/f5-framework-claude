name: employee-use-cases
display_name: Employee Payroll Use Cases
description: |
  Use cases for employees interacting with the payroll system,
  including viewing payslips, managing personal information, and requests.

domain: hr-management
subdomain: payroll
category: use-cases
version: "1.0.0"
status: active

actor:
  name: Employee
  description: Regular employee of the organization
  goals:
    - View and understand compensation
    - Manage tax-related information
    - Request advances and loans
    - Track payment history

use_cases:
  # Payslip Management
  - id: UC-EMP-001
    name: view_current_payslip
    title: View Current Month Payslip
    description: Employee views their payslip for the current or most recent pay period

    preconditions:
      - employee_is_authenticated
      - payslip_is_available

    triggers:
      - employee_navigates_to_payslip_section
      - notification_received_about_payslip

    main_flow:
      - step: 1
        action: Navigate to payroll section
        actor: employee
      - step: 2
        action: Display current period payslip summary
        actor: system
      - step: 3
        action: View earnings breakdown
        actor: employee
        details:
          - basic_salary
          - allowances_itemized
          - overtime_hours_and_amount
          - bonuses
      - step: 4
        action: View deductions breakdown
        actor: employee
        details:
          - insurance_contributions
          - tax_amount
          - loan_repayments
          - other_deductions
      - step: 5
        action: View net pay and payment details
        actor: employee
        details:
          - net_amount
          - payment_date
          - payment_method

    alternative_flows:
      - id: AF-001
        condition: payslip_not_yet_generated
        steps:
          - Display message "Payslip not yet available"
          - Show estimated processing date

    postconditions:
      - employee_has_viewed_payslip
      - view_logged_for_audit

    business_rules:
      - BR: Payslip viewable only after payroll finalized
      - BR: Employee can only view their own payslips

  - id: UC-EMP-002
    name: view_payslip_history
    title: View Historical Payslips
    description: Employee views payslips from previous periods

    preconditions:
      - employee_is_authenticated
      - historical_payslips_exist

    main_flow:
      - step: 1
        action: Navigate to payslip history
        actor: employee
      - step: 2
        action: Display list of available payslips
        actor: system
        display:
          - period_name
          - gross_amount
          - net_amount
          - payment_date
      - step: 3
        action: Filter by year or date range
        actor: employee
      - step: 4
        action: Select specific payslip
        actor: employee
      - step: 5
        action: Display full payslip details
        actor: system

    postconditions:
      - selected_payslip_displayed

    retention:
      available_history: 5_years
      older_records: upon_request

  - id: UC-EMP-003
    name: download_payslip
    title: Download Payslip PDF
    description: Employee downloads payslip as PDF document

    preconditions:
      - payslip_is_finalized
      - employee_is_authenticated

    main_flow:
      - step: 1
        action: View payslip
        actor: employee
      - step: 2
        action: Click download button
        actor: employee
      - step: 3
        action: Generate PDF with company letterhead
        actor: system
      - step: 4
        action: Deliver PDF to employee
        actor: system
        options:
          - direct_download
          - email_attachment

    postconditions:
      - pdf_downloaded
      - download_logged

  # Tax Information
  - id: UC-EMP-004
    name: view_tax_summary
    title: View Tax Summary
    description: Employee views tax withholding summary and YTD information

    preconditions:
      - employee_is_authenticated
      - tax_data_exists

    main_flow:
      - step: 1
        action: Navigate to tax information section
        actor: employee
      - step: 2
        action: Display tax summary
        actor: system
        display:
          - current_month_tax
          - ytd_taxable_income
          - ytd_tax_withheld
          - personal_deduction_applied
          - dependent_deduction_applied
          - effective_tax_rate
      - step: 3
        action: View monthly breakdown
        actor: employee
      - step: 4
        action: View tax bracket application
        actor: employee

    postconditions:
      - tax_summary_displayed

  - id: UC-EMP-005
    name: manage_dependent_information
    title: Manage Tax Dependents
    description: Employee updates dependent information for tax deductions

    preconditions:
      - employee_is_authenticated
      - within_update_window

    main_flow:
      - step: 1
        action: Navigate to dependent management
        actor: employee
      - step: 2
        action: Display current registered dependents
        actor: system
      - step: 3
        action: Add new dependent
        actor: employee
        inputs:
          - dependent_name
          - relationship
          - date_of_birth
          - id_number
          - supporting_documents
      - step: 4
        action: Validate dependent eligibility
        actor: system
        checks:
          - age_requirement
          - relationship_valid
          - documents_provided
      - step: 5
        action: Submit for HR review
        actor: employee
      - step: 6
        action: Route to HR for verification
        actor: system

    alternative_flows:
      - id: AF-001
        condition: remove_dependent
        steps:
          - Select dependent to remove
          - Provide reason for removal
          - Submit change request

    postconditions:
      - change_request_submitted
      - hr_notified

    notes:
      - Changes effective from approval month
      - HR must verify documents before registration

  - id: UC-EMP-006
    name: download_tax_certificate
    title: Download Annual Tax Certificate
    description: Employee downloads tax withholding certificate for personal filing

    preconditions:
      - tax_year_finalized
      - certificate_generated

    main_flow:
      - step: 1
        action: Navigate to tax documents
        actor: employee
      - step: 2
        action: Display available certificates
        actor: system
      - step: 3
        action: Select year
        actor: employee
      - step: 4
        action: Download certificate (Form 03/TNCN)
        actor: employee

    postconditions:
      - certificate_downloaded

    timing:
      availability: "After March 31 of following year"

  - id: UC-EMP-007
    name: authorize_tax_finalization
    title: Authorize Employer Tax Finalization
    description: Employee authorizes employer to finalize their annual tax

    preconditions:
      - single_income_source
      - within_authorization_period

    main_flow:
      - step: 1
        action: Receive authorization request notification
        actor: employee
      - step: 2
        action: Review annual tax summary
        actor: employee
        display:
          - total_income
          - total_tax_withheld
          - estimated_final_liability
          - expected_refund_or_additional
      - step: 3
        action: Confirm or decline authorization
        actor: employee
      - step: 4
        action: Digital signature for authorization
        actor: employee
      - step: 5
        action: Record authorization
        actor: system

    alternative_flows:
      - id: AF-001
        condition: decline_authorization
        steps:
          - Record employee preference for self-finalization
          - Provide necessary documents for self-filing

    postconditions:
      - authorization_recorded
      - employee_can_track_finalization_status

  # Salary Advance and Loans
  - id: UC-EMP-008
    name: request_salary_advance
    title: Request Salary Advance
    description: Employee requests advance payment of salary

    preconditions:
      - employee_eligible_for_advance
      - no_existing_advance_outstanding
      - within_policy_limits

    main_flow:
      - step: 1
        action: Navigate to advance request
        actor: employee
      - step: 2
        action: Display eligibility and limits
        actor: system
        display:
          - max_advance_amount
          - current_outstanding
          - policy_terms
      - step: 3
        action: Enter advance request
        actor: employee
        inputs:
          - requested_amount
          - reason
      - step: 4
        action: Validate against policy
        actor: system
      - step: 5
        action: Submit request
        actor: employee
      - step: 6
        action: Route to manager for approval
        actor: system
      - step: 7
        action: Notify employee of submission
        actor: system

    alternative_flows:
      - id: AF-001
        condition: exceeds_policy_limit
        steps:
          - Display policy limit
          - Suggest maximum allowed amount
          - Allow adjustment or cancellation

    postconditions:
      - request_submitted
      - approval_workflow_initiated

    business_rules:
      - BR: Maximum 50% of monthly salary
      - BR: Repaid in next payroll
      - BR: One advance at a time

  - id: UC-EMP-009
    name: request_employee_loan
    title: Request Employee Loan
    description: Employee requests loan from company

    preconditions:
      - employee_meets_eligibility
      - loan_type_available
      - within_loan_limits

    main_flow:
      - step: 1
        action: Navigate to loan request
        actor: employee
      - step: 2
        action: Display available loan types
        actor: system
        types:
          - emergency_loan
          - personal_loan
          - housing_support
          - education_loan
      - step: 3
        action: Select loan type and view terms
        actor: employee
        terms:
          - maximum_amount
          - interest_rate
          - repayment_period
          - required_documents
      - step: 4
        action: Complete loan application
        actor: employee
        inputs:
          - loan_amount
          - purpose
          - preferred_repayment_term
          - supporting_documents
      - step: 5
        action: Calculate repayment schedule
        actor: system
      - step: 6
        action: Review and confirm terms
        actor: employee
      - step: 7
        action: Submit application
        actor: employee
      - step: 8
        action: Route for approval
        actor: system

    postconditions:
      - loan_application_submitted
      - approval_workflow_started

  - id: UC-EMP-010
    name: view_loan_status
    title: View Loan Repayment Status
    description: Employee views outstanding loans and repayment progress

    preconditions:
      - employee_has_active_loans

    main_flow:
      - step: 1
        action: Navigate to loan status
        actor: employee
      - step: 2
        action: Display active loans
        actor: system
        display:
          - loan_type
          - original_amount
          - outstanding_balance
          - monthly_deduction
          - remaining_installments
      - step: 3
        action: View repayment history
        actor: employee
      - step: 4
        action: View upcoming deductions
        actor: employee

    postconditions:
      - loan_status_displayed

  # Personal Information
  - id: UC-EMP-011
    name: update_bank_account
    title: Update Bank Account Details
    description: Employee updates bank account for salary payment

    preconditions:
      - employee_is_authenticated
      - within_change_deadline

    main_flow:
      - step: 1
        action: Navigate to payment settings
        actor: employee
      - step: 2
        action: Display current bank details (masked)
        actor: system
      - step: 3
        action: Initiate bank change
        actor: employee
      - step: 4
        action: Enter new bank details
        actor: employee
        inputs:
          - bank_name
          - branch
          - account_number
          - account_holder_name
      - step: 5
        action: Upload supporting document
        actor: employee
        documents:
          - bank_passbook_copy
          - bank_statement
      - step: 6
        action: Submit for verification
        actor: employee
      - step: 7
        action: Route to payroll admin
        actor: system

    alternative_flows:
      - id: AF-001
        condition: after_cutoff_date
        steps:
          - Display warning about effective date
          - Confirm understanding of delayed effectiveness

    postconditions:
      - change_request_submitted
      - payroll_admin_notified

    business_rules:
      - BR: Changes before 15th effective same month
      - BR: Changes after 15th effective next month
      - BR: Account name must match employee name

  - id: UC-EMP-012
    name: view_insurance_contributions
    title: View Insurance Contribution Details
    description: Employee views social, health, and unemployment insurance details

    preconditions:
      - employee_is_insurance_participant

    main_flow:
      - step: 1
        action: Navigate to insurance section
        actor: employee
      - step: 2
        action: Display insurance summary
        actor: system
        display:
          - social_insurance_number
          - health_insurance_number
          - contribution_base
          - employee_contributions
          - employer_contributions
          - ytd_totals
      - step: 3
        action: View monthly breakdown
        actor: employee
      - step: 4
        action: View contribution rates
        actor: employee

    postconditions:
      - insurance_details_displayed

  # Communication
  - id: UC-EMP-013
    name: submit_payroll_query
    title: Submit Payroll Query
    description: Employee submits question about payroll or payslip

    preconditions:
      - employee_is_authenticated

    main_flow:
      - step: 1
        action: Navigate to support section
        actor: employee
      - step: 2
        action: Select query category
        actor: employee
        categories:
          - payslip_clarification
          - tax_question
          - insurance_question
          - deduction_question
          - other
      - step: 3
        action: Describe query
        actor: employee
        inputs:
          - query_description
          - related_period
          - attachments
      - step: 4
        action: Submit query
        actor: employee
      - step: 5
        action: Route to payroll admin
        actor: system
      - step: 6
        action: Send confirmation to employee
        actor: system

    postconditions:
      - query_logged
      - ticket_number_assigned
      - payroll_admin_notified

    sla:
      response_time: 2_business_days

ui_requirements:
  mobile_responsive: true
  languages:
    - vietnamese
    - english
  accessibility: wcag_2_1_aa

security:
  authentication: required
  data_masking:
    - bank_account_partial
    - tax_id_partial
  audit_logging: all_views_and_downloads
