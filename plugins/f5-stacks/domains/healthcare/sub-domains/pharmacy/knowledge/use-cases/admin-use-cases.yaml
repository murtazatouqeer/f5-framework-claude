# Admin Use Cases
# F5 Framework v2.0 - Healthcare/Pharmacy
# Use cases from pharmacy administrator/manager perspective

use_cases:
  id: admin-use-cases
  name: Admin Use Cases
  name_ja: 管理者ユースケース
  description: Use cases for pharmacy administration and management
  domain: healthcare
  subdomain: pharmacy
  version: "1.0.0"
  actor: Pharmacy Manager / Administrator

  cases:
    # UC-ADM-001: Manage Inventory Levels
    - id: UC-ADM-001
      name: Manage Inventory Levels
      name_ja: 在庫レベル管理
      description: Administrator manages drug inventory par levels and ordering
      priority: high
      
      preconditions:
        - Administrator access to inventory management
        - Wholesaler accounts configured
        - Historical usage data available
        
      trigger: Inventory review cycle or stock-out situation
      
      main_flow:
        1:
          action: Administrator accesses inventory dashboard
          displays:
            - Current inventory levels
            - Items below par
            - Pending orders
            - Usage trends
        2:
          action: Administrator reviews inventory metrics
          analyzes:
            - Inventory turns
            - Stock-out frequency
            - Carrying costs
            - Slow movers
        3:
          action: Administrator adjusts par levels
          based_on:
            - Average daily usage
            - Lead time from suppliers
            - Safety stock requirements
            - Seasonal variations
        4:
          action: Administrator generates purchase orders
          order_optimization:
            - Consolidate orders for efficiency
            - Consider volume discounts
            - Balance multiple suppliers
        5:
          action: Administrator reviews short-dated inventory
          actions:
            - Process returns for eligible items
            - Prioritize dispensing
            - Consider donations
        6:
          action: Administrator approves orders
          review:
            - Order quantities
            - Supplier selection
            - Pricing
        7:
          action: System submits orders electronically
          tracking:
            - Order confirmation
            - Expected delivery
            - Invoice matching
            
      alternate_flows:
        emergency_order:
          trigger: Critical medication out of stock
          flow:
            - Identify alternative sources
            - Emergency supplier contact
            - Expedited delivery
            - Premium pricing accepted if necessary
        recall_management:
          trigger: Drug recall received
          flow:
            - Identify affected inventory
            - Quarantine products
            - Remove from active stock
            - Process return per recall instructions
            
      postconditions:
        - Inventory levels optimized
        - Orders placed as needed
        - Par levels current
        
      business_rules:
        - BR-INV-001 through BR-INV-016

    # UC-ADM-002: Generate Operational Reports
    - id: UC-ADM-002
      name: Generate Operational Reports
      name_ja: 運営レポート生成
      description: Administrator generates pharmacy operational and compliance reports
      priority: high
      
      preconditions:
        - Administrator access to reporting module
        - Data available for reporting period
        
      trigger: Scheduled report cycle or ad-hoc request
      
      main_flow:
        1:
          action: Administrator selects report type
          report_categories:
            operations:
              - Prescription volume
              - Wait times
              - Fill times
              - Error rates
            financial:
              - Revenue by payer
              - Reimbursement analysis
              - Profitability by drug category
              - Third-party audit results
            compliance:
              - DEA controlled substance reports
              - PDMP compliance
              - Board of Pharmacy requirements
              - Quality metrics
            clinical:
              - DUR intervention rates
              - Counseling rates
              - Immunization volume
              - MTM completions
        2:
          action: Administrator configures report parameters
          parameters:
            - Date range
            - Location(s)
            - Filters
            - Grouping
        3:
          action: System generates report
          processing:
            - Data aggregation
            - Calculations
            - Trend analysis
        4:
          action: Administrator reviews report
          analysis:
            - Key metrics vs targets
            - Trends over time
            - Outliers and exceptions
        5:
          action: Administrator exports/distributes report
          formats:
            - PDF for archival
            - Excel for analysis
            - Dashboard update
            - Email distribution
            
      report_schedule:
        daily:
          - Controlled substance log
          - Prescription volume
          - Inventory exceptions
        weekly:
          - Productivity metrics
          - Error reports
          - Wait time analysis
        monthly:
          - Financial summary
          - Quality metrics
          - Staff performance
        quarterly:
          - DEA audit report
          - Comprehensive compliance
          - Strategic KPIs
          
      postconditions:
        - Reports generated and distributed
        - Data archived for audit
        - Trends identified for action

    # UC-ADM-003: Manage Staff Credentials
    - id: UC-ADM-003
      name: Manage Staff Credentials
      name_ja: スタッフ資格管理
      description: Administrator tracks and manages pharmacy staff credentials
      priority: critical
      
      preconditions:
        - Staff database maintained
        - Credential tracking system in place
        - Notification system configured
        
      trigger: New hire, credential expiration approaching, or audit
      
      main_flow:
        1:
          action: Administrator accesses credential management
          views:
            - Staff roster
            - Credential status
            - Expiration calendar
            - Compliance dashboard
        2:
          action: Administrator reviews credential requirements
          requirements_by_role:
            pharmacist:
              - State license
              - DEA registration (if dispensing controlled)
              - NPI number
              - Immunization certification
              - CPR certification
            technician:
              - State registration/license
              - National certification (if required)
              - CPR certification
            intern:
              - Intern license/permit
              - School enrollment verification
        3:
          action: Administrator verifies credentials
          verification:
            - License board lookup
            - DEA validation
            - Certificate confirmation
        4:
          action: Administrator enters/updates credentials
          records:
            - Credential type
            - License/certificate number
            - Issue date
            - Expiration date
            - Verification date
        5:
          action: System generates expiration alerts
          alerts:
            - 90 days before: Initial notice
            - 60 days before: Reminder
            - 30 days before: Urgent reminder
            - Expired: Remove from schedule
        6:
          action: Administrator ensures compliance
          actions:
            - Staff notified of requirements
            - Renewal tracked
            - Updated credentials filed
            
      compliance_requirements:
        - No pharmacist on duty without valid license
        - DEA registration required for controlled dispensing
        - Technician ratios per state requirements
        - Required certifications maintained
        
      postconditions:
        - All staff credentials current
        - Expiration tracking active
        - Compliance documented

    # UC-ADM-004: Handle Patient Complaint
    - id: UC-ADM-004
      name: Handle Patient Complaint
      name_ja: 患者苦情対応
      description: Administrator manages and resolves patient complaints
      priority: high
      
      preconditions:
        - Complaint received through any channel
        - Incident/complaint tracking system available
        - Resolution authority established
        
      trigger: Patient complaint received
      
      main_flow:
        1:
          action: Administrator receives complaint
          channels:
            - Direct to manager
            - Corporate hotline
            - Online feedback
            - Written complaint
            - Regulatory agency referral
        2:
          action: Administrator logs complaint
          records:
            - Date and time received
            - Patient information
            - Nature of complaint
            - Pharmacy and staff involved
            - Initial severity assessment
        3:
          action: Administrator investigates complaint
          investigation:
            - Review prescription records
            - Interview staff involved
            - Review surveillance if applicable
            - Gather documentation
        4:
          action: Administrator assesses findings
          determines:
            - Was there an error?
            - Policy followed?
            - Training issue?
            - System issue?
            - Communication breakdown?
        5:
          action: Administrator develops resolution
          resolution_options:
            - Apology and explanation
            - Correction of error
            - Financial remedy (refund, compensation)
            - Policy change
            - Staff counseling/training
        6:
          action: Administrator contacts patient
          communication:
            - Acknowledge complaint
            - Explain findings
            - Provide resolution
            - Follow-up plan if needed
        7:
          action: Administrator documents resolution
          documentation:
            - Investigation findings
            - Resolution provided
            - Patient response
            - Preventive measures
        8:
          action: Administrator implements improvements
          actions:
            - Staff training if needed
            - Process changes
            - System updates
            - Policy revisions
            
      complaint_categories:
        wait_time: "Service timing complaints"
        accuracy: "Prescription errors or concerns"
        pricing: "Cost or billing issues"
        service: "Staff behavior or communication"
        clinical: "Drug information or counseling"
        
      escalation_criteria:
        immediate_escalation:
          - Serious patient harm
          - Regulatory violation
          - Potential legal action
          - Media involvement
          
      postconditions:
        - Complaint resolved
        - Documentation complete
        - Preventive measures implemented

    # UC-ADM-005: Conduct DEA Audit
    - id: UC-ADM-005
      name: Conduct DEA Compliance Audit
      name_ja: DEA監査実施
      description: Administrator conducts internal DEA compliance audit
      priority: critical
      
      preconditions:
        - DEA registration current
        - Controlled substance records available
        - Audit checklist prepared
        
      trigger: Scheduled audit cycle or external audit notification
      
      main_flow:
        1:
          action: Administrator prepares for audit
          preparation:
            - Gather DEA registration documents
            - Compile controlled substance logs
            - Prepare inventory records
            - Collect disposal documentation
        2:
          action: Administrator reviews registration compliance
          verifies:
            - Registration current and posted
            - Registered address matches location
            - Schedule authorities correct
            - All authorized personnel listed
        3:
          action: Administrator audits physical security
          checks:
            - Controlled substance storage locked
            - Keys controlled appropriately
            - Surveillance operational
            - Access limited to authorized
        4:
          action: Administrator reconciles inventory
          process:
            - Physical count of all controlled
            - Compare to perpetual inventory
            - Account for all receipts
            - Account for all dispensing
            - Verify destruction/return records
        5:
          action: Administrator reviews documentation
          documentation:
            - Invoices/receipts on file
            - Power of attorney current (if applicable)
            - CSOS enrollment valid
            - Form 222s filed (if used)
        6:
          action: Administrator audits prescription records
          verifies:
            - Required elements on prescriptions
            - PDMP reporting compliance
            - Refill limitations followed
            - Emergency provisions documented
        7:
          action: Administrator documents findings
          report_includes:
            - Compliance status by area
            - Discrepancies found
            - Corrective actions taken
            - Recommendations
        8:
          action: Administrator implements corrections
          actions:
            - Immediate corrections for deficiencies
            - Training for staff if needed
            - Policy updates if required
            
      audit_checklist:
        registration:
          - [ ] Current registration displayed
          - [ ] Correct address
          - [ ] All schedules listed
        security:
          - [ ] Secure storage verified
          - [ ] Access controls in place
          - [ ] Surveillance operational
        inventory:
          - [ ] Perpetual inventory accurate
          - [ ] Physical count matches
          - [ ] Biennial inventory on file
        records:
          - [ ] Receipts on file (2 years)
          - [ ] Dispensing records complete
          - [ ] Destruction documented
          
      postconditions:
        - Audit completed
        - Findings documented
        - Corrective actions implemented

    # UC-ADM-006: Manage Third-Party Contracts
    - id: UC-ADM-006
      name: Manage Third-Party Payer Contracts
      name_ja: 第三者支払者契約管理
      description: Administrator manages insurance and PBM contract relationships
      priority: high
      
      preconditions:
        - Pharmacy credentialed with payers
        - Contract management system in place
        - Reimbursement data available
        
      trigger: Contract renewal, new contract opportunity, or reimbursement issue
      
      main_flow:
        1:
          action: Administrator reviews contract portfolio
          tracks:
            - Active contracts
            - Reimbursement rates
            - Contract terms
            - Renewal dates
            - Performance requirements
        2:
          action: Administrator analyzes reimbursement
          analyzes:
            - Average reimbursement by payer
            - MAC pricing impact
            - DIR fee assessment
            - Profitability by plan
        3:
          action: Administrator identifies issues
          issues:
            - Below-cost reimbursements
            - High DIR fee exposure
            - Claim rejection patterns
            - Audit findings
        4:
          action: Administrator prepares for negotiation
          preparation:
            - Volume data
            - Competitive analysis
            - Cost analysis
            - Service value documentation
        5:
          action: Administrator negotiates terms
          negotiation_points:
            - Dispensing fees
            - Drug reimbursement rates
            - DIR fee terms
            - Performance metrics
            - Audit provisions
        6:
          action: Administrator executes contract
          process:
            - Legal review
            - Signature authority
            - System configuration
            - Staff training
        7:
          action: Administrator monitors performance
          tracking:
            - Reimbursement trends
            - Contract compliance
            - Audit results
            - Issue resolution
            
      contract_types:
        pbm_contracts: "Pharmacy Benefit Manager agreements"
        medicare_part_d: "Medicare prescription drug plans"
        medicaid: "State Medicaid programs"
        cash_discount: "Cash discount program participation"
        specialty: "Specialty pharmacy contracts"
        
      postconditions:
        - Contracts managed effectively
        - Reimbursement optimized
        - Compliance maintained

    # UC-ADM-007: Quality Improvement Program
    - id: UC-ADM-007
      name: Manage Quality Improvement Program
      name_ja: 品質改善プログラム管理
      description: Administrator oversees continuous quality improvement initiatives
      priority: high
      
      preconditions:
        - Quality metrics defined
        - Data collection in place
        - Staff trained on quality processes
        
      trigger: Scheduled review cycle or quality event
      
      main_flow:
        1:
          action: Administrator reviews quality metrics
          key_metrics:
            - Prescription accuracy rate
            - Wait time targets
            - Counseling rates
            - Patient satisfaction
            - Star ratings (Medicare)
            - Error rate
        2:
          action: Administrator analyzes trends
          analysis:
            - Period-over-period comparison
            - Benchmark comparison
            - Root cause for issues
        3:
          action: Administrator reviews incidents
          incident_types:
            - Near misses
            - Dispensing errors
            - Patient complaints
            - Adverse events
        4:
          action: Administrator identifies improvement opportunities
          areas:
            - Process improvements
            - Technology enhancements
            - Training needs
            - Communication improvements
        5:
          action: Administrator develops action plans
          plan_elements:
            - Specific objectives
            - Action items
            - Responsible parties
            - Timeline
            - Success metrics
        6:
          action: Administrator implements improvements
          implementation:
            - Staff communication
            - Training sessions
            - Process changes
            - System updates
        7:
          action: Administrator measures results
          measurement:
            - Pre/post comparison
            - Sustainability assessment
            - Staff feedback
            - Patient feedback
        8:
          action: Administrator reports to leadership
          reporting:
            - Quality dashboard
            - Improvement initiatives
            - Outcomes achieved
            - Next priorities
            
      quality_focus_areas:
        medication_safety:
          - Error prevention
          - Near miss tracking
          - Safety protocols
        patient_experience:
          - Service quality
          - Wait times
          - Counseling satisfaction
        clinical_quality:
          - DUR compliance
          - Intervention rates
          - Clinical outcomes
        operational_efficiency:
          - Workflow optimization
          - Resource utilization
          - Cost management
          
      postconditions:
        - Quality metrics monitored
        - Improvements implemented
        - Results documented

    # UC-ADM-008: Emergency Preparedness
    - id: UC-ADM-008
      name: Manage Emergency Preparedness
      name_ja: 緊急事態準備管理
      description: Administrator maintains pharmacy emergency preparedness
      priority: medium
      
      preconditions:
        - Emergency plan documented
        - Staff trained on procedures
        - Resources available
        
      trigger: Annual review, drill, or actual emergency
      
      main_flow:
        1:
          action: Administrator reviews emergency plan
          plan_elements:
            - Natural disaster response
            - Public health emergency
            - Facility emergency
            - Technology failure
            - Security incident
        2:
          action: Administrator verifies resources
          resources:
            - Emergency contact lists
            - Backup power/systems
            - Emergency supplies
            - Communication methods
        3:
          action: Administrator conducts drills
          drill_types:
            - Fire evacuation
            - Active shooter
            - System downtime
            - Robbery response
        4:
          action: Administrator updates protocols
          updates_based_on:
            - Drill outcomes
            - Actual incidents
            - Regulatory changes
            - Best practices
        5:
          action: Administrator trains staff
          training:
            - Annual emergency training
            - Role-specific procedures
            - Communication protocols
            - Documentation requirements
        6:
          action: Administrator documents compliance
          documentation:
            - Plan reviews
            - Drill records
            - Training completion
            - Resource inventory
            
      emergency_scenarios:
        natural_disaster:
          - Evacuation procedures
          - Controlled substance security
          - Business continuity
        public_health:
          - Pandemic response
          - Vaccine distribution
          - Surge capacity
        facility:
          - Fire response
          - Power outage
          - Hazmat incident
        security:
          - Robbery response
          - Violent person
          - Bomb threat
          
      postconditions:
        - Emergency plan current
        - Staff prepared
        - Resources available

  administrative_competencies:
    - Leadership and management
    - Regulatory compliance
    - Financial management
    - Human resources
    - Quality improvement
    - Strategic planning

  success_metrics:
    - operational_efficiency_score
    - compliance_rate
    - staff_retention_rate
    - patient_satisfaction_score
    - financial_performance
    - quality_metric_achievement
