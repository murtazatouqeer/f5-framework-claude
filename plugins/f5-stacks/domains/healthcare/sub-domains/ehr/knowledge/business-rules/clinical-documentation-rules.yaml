# =============================================================================
# CLINICAL DOCUMENTATION RULES - EHR Sub-domain
# Quy tắc Lập hồ sơ Y khoa
# =============================================================================
# Compliance: Joint Commission, CMS CoP, State Medical Board Requirements
# =============================================================================

name: ClinicalDocumentationRules
display_name: Clinical Documentation Rules / Quy tắc Lập hồ sơ Y khoa
version: "1.0"
domain: healthcare
sub_domain: ehr
category: documentation

# =============================================================================
# DOCUMENTATION TIMING REQUIREMENTS
# =============================================================================
timing_requirements:
  # Inpatient Documentation
  - id: CDR-TIME-001
    name: History and Physical (H&P)
    description: |
      Complete H&P required within 24 hours of admission.
      May use H&P from within 30 days if updated within 24 hours.
    regulation: CMS CoP 482.24(c)(4), Joint Commission RC.02.01.03
    enforcement: mandatory
    timing:
      new_hp:
        deadline_hours: 24
        from_event: admission
      update_existing:
        prior_hp_valid_days: 30
        update_required_hours: 24
    required_elements:
      - chief_complaint
      - history_of_present_illness
      - past_medical_history
      - medications
      - allergies
      - social_history
      - family_history
      - review_of_systems
      - physical_examination
      - assessment
      - plan

  - id: CDR-TIME-002
    name: Admission Note
    description: |
      Brief admission note for all inpatient admissions.
      Required even when full H&P is pending.
    enforcement: mandatory
    timing:
      deadline_hours: 4
      from_event: admission_order
    required_elements:
      - admitting_diagnosis
      - reason_for_admission
      - initial_orders_placed

  - id: CDR-TIME-003
    name: Progress Notes
    description: |
      Daily progress notes for all inpatients.
      Must reflect clinical status and plan of care.
    regulation: CMS CoP 482.24(c)(2)
    enforcement: mandatory
    timing:
      frequency: daily
      deadline_hours: 24
      from_event: end_of_day_shift
    required_elements:
      - subjective: patient_reported_symptoms
      - objective: vital_signs_exam_findings_data
      - assessment: clinical_interpretation
      - plan: treatment_changes_next_steps

  - id: CDR-TIME-004
    name: Operative Report
    description: |
      Operative report immediately after surgery.
      Brief note required if full report delayed.
    regulation: CMS CoP 482.51(b)(6), Joint Commission RC.02.01.03
    enforcement: mandatory
    timing:
      immediate_note:
        deadline_minutes: 30
        from_event: procedure_end
        content: name_findings_complications_specimens
      full_report:
        deadline_hours: 24
        from_event: procedure_end
    required_elements:
      - date_of_procedure
      - pre_operative_diagnosis
      - post_operative_diagnosis
      - procedure_performed
      - surgeon_and_assistants
      - anesthesia_type
      - findings
      - complications
      - specimens_removed
      - estimated_blood_loss
      - drains_and_implants

  - id: CDR-TIME-005
    name: Procedure Note
    description: |
      Documentation for non-surgical procedures.
      Required for all invasive procedures.
    enforcement: mandatory
    timing:
      deadline_hours: 24
      from_event: procedure_completion
    required_elements:
      - procedure_name
      - indication
      - consent_documented
      - findings
      - complications
      - specimen_disposition

  - id: CDR-TIME-006
    name: Discharge Summary
    description: |
      Comprehensive discharge summary for all inpatients.
      Required before patient leaves or within specified timeframe.
    regulation: CMS CoP 482.24(c)(2), Joint Commission RC.02.04.01
    enforcement: mandatory
    timing:
      preferred: before_discharge
      maximum_hours: 48
      from_event: discharge
    required_elements:
      - admission_date
      - discharge_date
      - admitting_diagnosis
      - principal_diagnosis
      - secondary_diagnoses
      - procedures_performed
      - hospital_course
      - condition_at_discharge
      - discharge_medications
      - follow_up_appointments
      - pending_results
      - patient_instructions

  - id: CDR-TIME-007
    name: Transfer Note
    description: |
      Documentation when patient transferred between units/facilities.
      Must accompany patient at time of transfer.
    enforcement: mandatory
    timing:
      deadline: at_time_of_transfer
    required_elements:
      - reason_for_transfer
      - clinical_summary
      - current_medications
      - pending_orders
      - care_instructions

  # Outpatient Documentation
  - id: CDR-TIME-008
    name: Outpatient Visit Note
    description: |
      Complete visit documentation for all outpatient encounters.
      Documentation timing varies by encounter type.
    enforcement: mandatory
    timing:
      same_day_preferred: true
      maximum_hours: 72
      from_event: encounter_end
    required_elements:
      - chief_complaint
      - history_of_present_illness
      - relevant_history_review
      - examination
      - assessment
      - plan
      - patient_education
      - follow_up

  - id: CDR-TIME-009
    name: Telephone Encounter
    description: |
      Documentation of phone interactions with clinical decisions.
      Must document advice given and patient understanding.
    enforcement: mandatory
    timing:
      deadline_hours: 24
      from_event: call_completion
    required_elements:
      - patient_complaint_or_question
      - clinical_advice_given
      - disposition
      - follow_up_instructions

  # Emergency Department
  - id: CDR-TIME-010
    name: ED Documentation
    description: |
      Complete ED documentation with specific timing requirements.
      Medical screening exam within CMS EMTALA requirements.
    regulation: EMTALA
    enforcement: mandatory
    timing:
      medical_screening_exam:
        required: immediately_upon_arrival
        documentation: contemporaneous
      full_documentation:
        deadline_hours: 24
        from_event: discharge_or_admission

# =============================================================================
# AUTHENTICATION AND SIGNATURE REQUIREMENTS
# =============================================================================
authentication_rules:
  - id: CDR-AUTH-001
    name: Author Signature Required
    description: |
      All clinical documentation must be authenticated by author.
      Electronic signature constitutes legal signature.
    regulation: CMS CoP 482.24(c)(1)
    enforcement: mandatory
    requirements:
      - author_identification: name_credentials_date_time
      - signature_type: [electronic, digital, handwritten]
      - attestation: i_have_reviewed_and_approve
    signature_elements:
      - author_name
      - credentials
      - date
      - time
      - attestation_statement

  - id: CDR-AUTH-002
    name: Attending Physician Signature
    description: |
      Attending physician must sign all inpatient documentation.
      May co-sign trainee documentation within specified timeframe.
    regulation: CMS CoP 482.12(c)
    enforcement: mandatory
    timing:
      co_signature_deadline_hours: 24
      exception: immediately_if_required_by_policy
    applies_to:
      - history_and_physical
      - discharge_summary
      - operative_reports
      - verbal_orders

  - id: CDR-AUTH-003
    name: Trainee Documentation Co-signature
    description: |
      Medical students, residents, and fellows require co-signature.
      Supervising physician attests to accuracy and participation.
    enforcement: mandatory
    trainee_levels:
      - medical_student:
          co_sign_required: all_documentation
          attestation: reviewed_and_agree_or_modified
      - intern:
          co_sign_required: all_documentation
          attestation: reviewed_and_agree_or_modified
      - resident_pgy2_plus:
          co_sign_required: per_program_policy
      - fellow:
          co_sign_required: per_specialty_requirements
    attestation_options:
      - "I have personally seen and examined the patient"
      - "I have reviewed the documentation and agree"
      - "I have reviewed and made the following modifications"

  - id: CDR-AUTH-004
    name: Verbal Order Authentication
    description: |
      Verbal and telephone orders require authentication.
      Must be signed by ordering provider within specified timeframe.
    regulation: CMS CoP 482.24(c)(2)
    enforcement: mandatory
    process:
      step_1: Order given verbally or by phone
      step_2: Recipient reads back order
      step_3: Order entered and marked as verbal
      step_4: Ordering provider signs within timeframe
    timing:
      authentication_deadline_hours: 48
      exception: state_law_may_require_shorter
    acceptable_for:
      - urgent_situations
      - telephone_orders
    not_acceptable_for:
      - routine_situations_when_provider_available
      - controlled_substances_schedule_ii

  - id: CDR-AUTH-005
    name: Advanced Practice Provider Documentation
    description: |
      NPs, PAs, CNMs documentation requirements.
      Collaboration or supervision per state law.
    enforcement: mandatory
    requirements:
      - independent_signature: per_state_scope
      - collaboration_required: per_state_law
      - supervising_physician_review: as_required

# =============================================================================
# AMENDMENT AND CORRECTION RULES
# =============================================================================
amendment_rules:
  - id: CDR-AMD-001
    name: Error Correction
    description: |
      Errors must be corrected without obliterating original.
      Single line through error with correction, date, initials.
    enforcement: mandatory
    process:
      electronic:
        - mark_original_as_error
        - add_correction_with_timestamp
        - maintain_audit_trail
        - original_remains_visible
      paper:
        - single_line_through_error
        - write_correction_nearby
        - date_and_initial
        - never_use_white_out

  - id: CDR-AMD-002
    name: Addendum Requirements
    description: |
      New information added after signing requires addendum.
      Addendum must reference original note and be authenticated.
    enforcement: mandatory
    requirements:
      - reference_original: date_and_type_of_note
      - clearly_labeled: as_addendum
      - authenticated: same_as_original
      - timestamped: current_date_time
    prohibition:
      - cannot_alter_original_text
      - cannot_backdate

  - id: CDR-AMD-003
    name: Late Entry Documentation
    description: |
      Entries made after normal documentation window.
      Must be labeled as late entry with explanation.
    enforcement: mandatory
    requirements:
      - label: "Late Entry" or "Delayed Entry"
      - reason: why_delayed
      - original_date: date_of_event
      - entry_date: current_date
    threshold:
      outpatient: "> 72 hours"
      inpatient: "> 24 hours"

  - id: CDR-AMD-004
    name: Patient-Requested Amendment
    description: |
      Process for patient amendment requests per HIPAA.
      Must respond within 60 days with acceptance or denial.
    regulation: HIPAA 164.526
    enforcement: mandatory
    process:
      step_1: Receive written request
      step_2: Review by treating provider
      step_3: Decide within 60 days
      step_4: If accepted, append amendment
      step_5: If denied, allow patient statement
    denial_reasons:
      - accurate_and_complete
      - not_created_by_this_provider
      - not_available_for_patient_access

# =============================================================================
# COPY/PASTE AND DOCUMENTATION INTEGRITY
# =============================================================================
copy_paste_rules:
  - id: CDR-CP-001
    name: Copy/Paste Policy
    description: |
      Restrict copy/paste to prevent documentation cloning.
      Copied content must be verified and updated.
    enforcement: mandatory
    permitted:
      - patient_demographics
      - chronic_problem_list
      - medication_list
      - allergy_list
    prohibited:
      - prior_assessment_without_update
      - prior_plan_without_review
      - another_patient_documentation
      - templated_physical_exam_without_actual_exam
    requirements:
      - attribution: source_of_copied_content
      - verification: current_accuracy_confirmed
      - modification: update_as_appropriate

  - id: CDR-CP-002
    name: Template Use Policy
    description: |
      Smart phrases and templates must be customized.
      Generic templates without patient-specific content prohibited.
    enforcement: mandatory
    requirements:
      - patient_specific_content: required
      - placeholder_completion: all_placeholders_replaced
      - clinical_accuracy: reflects_actual_encounter
    prohibited:
      - autopilot_documentation
      - exam_documented_but_not_performed
      - copy_forward_without_review

  - id: CDR-CP-003
    name: Documentation Cloning Detection
    description: |
      System monitoring for identical documentation.
      Flag for review when documentation appears cloned.
    enforcement: recommended
    triggers:
      - identical_notes_different_dates
      - progress_notes_matching_prior_notes
      - physical_exam_identical_to_template

# =============================================================================
# SPECIFIC DOCUMENTATION STANDARDS
# =============================================================================
specific_standards:
  - id: CDR-STD-001
    name: Medication Reconciliation
    description: |
      Accurate medication list at transitions of care.
      Compare, verify, and reconcile medications.
    regulation: Joint Commission NPSG.03.06.01
    enforcement: mandatory
    required_at:
      - admission
      - transfer
      - discharge
    process:
      step_1: Obtain medication history from all sources
      step_2: Compare to orders
      step_3: Resolve discrepancies
      step_4: Document reconciliation
      step_5: Communicate to patient and next provider

  - id: CDR-STD-002
    name: Allergy Documentation
    description: |
      Document allergies with reaction type and severity.
      Update allergy list at each encounter.
    enforcement: mandatory
    required_elements:
      - allergen_name
      - reaction_type
      - reaction_severity
      - verification_status
    review_frequency: each_encounter

  - id: CDR-STD-003
    name: Problem List Maintenance
    description: |
      Active problem list maintained and updated.
      Problems dated and attributed to provider.
    enforcement: mandatory
    requirements:
      - active_problems: current_conditions
      - resolved_problems: with_resolution_date
      - chronic_conditions: marked_as_chronic
      - attribution: documenting_provider

  - id: CDR-STD-004
    name: Informed Consent Documentation
    description: |
      Document informed consent for procedures and treatments.
      Must include discussion of risks, benefits, alternatives.
    regulation: CMS CoP 482.24(c)(2)
    enforcement: mandatory
    required_elements:
      - procedure_or_treatment
      - risks_discussed
      - benefits_explained
      - alternatives_offered
      - questions_answered
      - patient_or_surrogate_agreement
      - signature_obtained

  - id: CDR-STD-005
    name: Code Status Documentation
    description: |
      Document resuscitation preferences clearly.
      Verify and update at each admission.
    enforcement: mandatory
    required_elements:
      - code_status: full_code_or_dnr_or_dni
      - discussion_with: patient_or_surrogate
      - basis: informed_decision_or_advance_directive
      - date_documented

  - id: CDR-STD-006
    name: Restraint Documentation
    description: |
      Document medical necessity and monitoring.
      Time-limited orders with reassessment.
    regulation: CMS CoP 482.13(e)
    enforcement: mandatory
    requirements:
      - indication: clinical_justification
      - alternatives_tried: less_restrictive_measures
      - type_of_restraint: specific_devices
      - monitoring: per_policy_intervals
      - reassessment: per_time_limits
    time_limits:
      non_violent:
        renewal_hours: 24
        face_to_face: as_clinically_indicated
      violent_adult:
        renewal_hours: 4
        face_to_face: within_1_hour
      violent_pediatric:
        renewal_hours: 1_to_2
        face_to_face: within_1_hour

# =============================================================================
# LEGIBILITY AND COMPLETENESS
# =============================================================================
legibility_rules:
  - id: CDR-LEG-001
    name: Legibility Requirement
    description: |
      All documentation must be legible and understandable.
      Electronic documentation preferred over handwritten.
    regulation: CMS CoP 482.24(c)(1)
    enforcement: mandatory
    standards:
      handwritten:
        - print_clearly
        - use_approved_abbreviations_only
        - sign_legibly
      electronic:
        - standard_fonts
        - adequate_spacing
        - structured_format

  - id: CDR-LEG-002
    name: Prohibited Abbreviations
    description: |
      Certain abbreviations prohibited due to error risk.
      Use Joint Commission "Do Not Use" list.
    regulation: Joint Commission NPSG.02.02.01
    enforcement: mandatory
    prohibited:
      - U: write "units"
      - IU: write "international units"
      - QD: write "daily"
      - QOD: write "every other day"
      - trailing_zero: write "1 mg" not "1.0 mg"
      - lack_of_leading_zero: write "0.1 mg" not ".1 mg"
      - MS: write "morphine sulfate" or "magnesium sulfate"
      - MSO4: write "morphine sulfate"
      - MgSO4: write "magnesium sulfate"

  - id: CDR-LEG-003
    name: Completeness Standards
    description: |
      Documentation must be complete for clinical and billing purposes.
      All required elements for encounter type documented.
    enforcement: mandatory
    verification:
      - required_fields_completed
      - no_blank_sections_in_required_areas
      - appropriate_level_of_detail

# =============================================================================
# DOCUMENTATION INTEGRITY MONITORING
# =============================================================================
monitoring:
  - id: CDR-MON-001
    name: Random Audit Program
    description: Monthly random review of clinical documentation
    frequency: monthly
    sample_size: "5% of encounters per provider"
    review_criteria:
      - timeliness
      - completeness
      - accuracy
      - authentication

  - id: CDR-MON-002
    name: Focused Audit Triggers
    description: Triggered review for specific concerns
    triggers:
      - billing_denial
      - patient_complaint
      - quality_variance
      - peer_concern
      - risk_management_flag

  - id: CDR-MON-003
    name: Documentation Improvement Program
    description: Education and improvement for deficiencies
    interventions:
      - individual_feedback
      - group_education
      - template_improvement
      - workflow_optimization
