# =============================================================================
# PROVIDER USE CASES - EHR Sub-domain
# Ca sử dụng cho Nhà cung cấp Dịch vụ Y tế
# =============================================================================

name: ProviderUseCases
display_name: Provider Use Cases / Ca sử dụng cho Nhân viên Y tế
version: "1.0"
domain: healthcare
sub_domain: ehr
actor_type: provider

description: |
  Use cases for healthcare providers (physicians, nurses, APPs) using the EHR
  system for clinical documentation, order entry, care coordination, and
  clinical decision support. Covers ambulatory and inpatient workflows.

# =============================================================================
# ACTOR DEFINITIONS
# =============================================================================
primary_actors:
  physician:
    name: Physician
    description: MD or DO providing medical care
    permissions: [full_clinical_access, ordering, prescribing]

  nurse_practitioner:
    name: Nurse Practitioner
    description: Advanced practice nurse
    permissions: [full_clinical_access, ordering, prescribing_with_scope]

  physician_assistant:
    name: Physician Assistant
    description: PA working under physician supervision
    permissions: [full_clinical_access, ordering, prescribing_with_scope]

  registered_nurse:
    name: Registered Nurse
    description: RN providing nursing care
    permissions: [nursing_documentation, medication_administration]

  medical_assistant:
    name: Medical Assistant
    description: MA supporting clinical care
    permissions: [vitals_entry, patient_intake, messaging]

secondary_actors:
  pharmacist: Clinical pharmacy support
  care_coordinator: Care management support
  social_worker: Psychosocial support
  specialist: Consulting physician

# =============================================================================
# USE CASES - CLINICAL DOCUMENTATION
# =============================================================================
documentation_use_cases:
  - id: UC-PROV-001
    name: Document Clinical Encounter
    display_name_vi: Ghi chú Khám lâm sàng
    description: Provider documents patient visit in EHR
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Patient encounter is open
      - Provider has access to patient record
    trigger: Provider sees patient for visit
    main_flow:
      1: Provider opens patient chart
      2: Provider reviews patient summary
      3: Provider documents HPI
      4: Provider documents examination findings
      5: Provider documents assessment
      6: Provider documents treatment plan
      7: Provider enters diagnoses
      8: Provider signs documentation
    documentation_elements:
      - chief_complaint: Why patient is here
      - hpi: History of present illness
      - ros: Review of systems
      - physical_exam: Examination findings
      - assessment: Clinical impression
      - plan: Treatment plan
      - patient_education: Teaching provided
    alternate_flows:
      A1_use_template:
        trigger: Provider uses documentation template
        flow:
          1: Provider selects appropriate template
          2: Template pre-populates relevant fields
          3: Provider customizes for patient
      A2_trainee_documentation:
        trigger: Resident or student documenting
        flow:
          1: Trainee documents encounter
          2: Attending reviews and co-signs
          3: Attending adds attestation
    postconditions:
      - Documentation complete and signed
      - Encounter closed or pending signature
    business_rules:
      - Documentation must be signed within 72 hours
      - Trainee notes require co-signature

  - id: UC-PROV-002
    name: Write Progress Note
    display_name_vi: Viết Ghi chú Tiến triển
    description: Provider documents daily inpatient progress
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Patient is admitted inpatient
      - Provider is on care team
    trigger: Daily rounds or clinical change
    main_flow:
      1: Provider reviews overnight events
      2: Provider examines patient
      3: Provider reviews vital signs and I/O
      4: Provider reviews lab and imaging results
      5: Provider documents subjective findings
      6: Provider documents objective findings
      7: Provider updates assessment
      8: Provider documents plan changes
      9: Provider signs note
    note_structure:
      - SOAP format preferred
      - Events overnight
      - Current status
      - Assessment by problem
      - Plan with specific orders
    postconditions:
      - Progress note filed in chart
      - Plan communicated to care team

  - id: UC-PROV-003
    name: Document Procedure
    display_name_vi: Ghi chú Thủ thuật
    description: Provider documents performed procedure
    actors: [physician]
    preconditions:
      - Procedure has been performed
      - Consent is documented
    trigger: Procedure completion
    main_flow:
      1: Provider opens procedure note template
      2: Provider documents procedure details
      3: Provider documents findings
      4: Provider documents complications or none
      5: Provider documents specimens obtained
      6: Provider documents post-procedure orders
      7: Provider signs procedure note
    required_elements:
      - procedure_name: What was done
      - indication: Why performed
      - consent_reference: Consent documented
      - anesthesia: Type if applicable
      - technique: How performed
      - findings: What was found
      - complications: Any issues
      - specimens: Tissue sent to pathology
      - estimated_blood_loss: If applicable
      - disposition: Post-procedure status
    postconditions:
      - Procedure note complete within 24 hours
      - Post-procedure orders entered

# =============================================================================
# USE CASES - ORDER ENTRY
# =============================================================================
order_entry_use_cases:
  - id: UC-PROV-004
    name: Order Laboratory Tests
    display_name_vi: Yêu cầu Xét nghiệm
    description: Provider orders lab tests for patient
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Patient encounter is active
      - Provider has ordering privileges
    trigger: Clinical need for laboratory testing
    main_flow:
      1: Provider opens order entry
      2: Provider searches for lab test or panel
      3: Provider selects appropriate tests
      4: Provider specifies priority
      5: Provider enters clinical indication
      6: System checks for duplicates and alerts
      7: Provider reviews and confirms
      8: Provider signs orders
      9: Order transmitted to laboratory
    order_details:
      - test_selection: Individual or panel
      - priority: Routine, urgent, stat, timed
      - diagnosis: Clinical indication
      - specimen: Type if not standard
      - fasting: If required
      - scheduling: Now or future
    clinical_decision_support:
      - duplicate_order_alert
      - frequency_limit_alert
      - medical_necessity_check
    postconditions:
      - Order active in system
      - Collection list updated

  - id: UC-PROV-005
    name: Prescribe Medication
    display_name_vi: Kê đơn Thuốc
    description: Provider prescribes medication for patient
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Provider has prescribing authority
      - Patient allergies are documented
    trigger: Clinical need for medication therapy
    main_flow:
      1: Provider opens prescribing module
      2: Provider searches for medication
      3: Provider selects drug and strength
      4: Provider enters dose and frequency
      5: Provider specifies quantity and refills
      6: Provider selects pharmacy
      7: System performs safety checks
      8: Provider reviews alerts and overrides if appropriate
      9: Provider signs prescription
      10: Prescription transmitted to pharmacy
    safety_checks:
      - drug_allergy: Hard stop if match
      - drug_drug_interaction: Alert with severity
      - drug_disease: Contraindication check
      - dose_range: Min/max dose check
      - duplicate_therapy: Same class alert
      - pregnancy: Category D/X alert
      - renal_adjustment: eGFR-based dosing
    controlled_substance_workflow:
      - PDMP query required
      - EPCS two-factor authentication
      - DEA verification
    postconditions:
      - Prescription sent to pharmacy
      - Medication added to patient list

  - id: UC-PROV-006
    name: Order Imaging Study
    display_name_vi: Yêu cầu Chẩn đoán Hình ảnh
    description: Provider orders diagnostic imaging
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Clinical indication exists
      - Provider has ordering privileges
    trigger: Need for diagnostic imaging
    main_flow:
      1: Provider opens imaging order entry
      2: Provider selects modality (XR, CT, MRI, US)
      3: Provider selects specific exam
      4: Provider enters clinical indication
      5: Provider specifies priority
      6: System checks appropriateness criteria
      7: Provider confirms order
      8: Provider signs order
      9: Order sent to radiology
    special_considerations:
      - contrast_allergy: Check before contrast orders
      - renal_function: Check for IV contrast
      - pregnancy_screening: For ionizing radiation
      - mri_safety: Implant screening
      - prior_authorization: Insurance requirement
    postconditions:
      - Imaging order active
      - Scheduling notified

  - id: UC-PROV-007
    name: Place Referral Order
    display_name_vi: Yêu cầu Chuyển tuyến
    description: Provider refers patient to specialist
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Clinical need for specialist consultation
    trigger: Patient needs specialist care
    main_flow:
      1: Provider opens referral order
      2: Provider selects specialty
      3: Provider selects specific provider if known
      4: Provider enters referral reason
      5: Provider specifies urgency
      6: Provider attaches relevant documents
      7: Provider signs referral
      8: Referral sent for processing
    referral_information:
      - specialty: Type of specialist needed
      - reason: Clinical question
      - urgency: Routine, urgent, emergent
      - attachments: Relevant records
    postconditions:
      - Referral entered in system
      - Tracking initiated

# =============================================================================
# USE CASES - CARE MANAGEMENT
# =============================================================================
care_management_use_cases:
  - id: UC-PROV-008
    name: Review Inbox Messages
    display_name_vi: Xem tin nhắn Hộp thư đến
    description: Provider manages clinical inbox
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Provider has messages in inbox
    trigger: Messages requiring attention
    main_flow:
      1: Provider opens inbox
      2: Provider views message list
      3: Provider prioritizes and filters
      4: Provider reads message
      5: Provider takes action
      6: Provider responds or routes
    message_types:
      - patient_messages: Portal communications
      - refill_requests: Medication refills
      - result_notifications: Labs and imaging
      - task_assignments: From staff
      - prior_auth_requests: Insurance needs
      - referral_responses: Specialist reports
    actions:
      - respond_to_patient
      - approve_refill
      - acknowledge_result
      - complete_task
      - forward_to_staff
    postconditions:
      - Message processed
      - Action documented

  - id: UC-PROV-009
    name: Review Results
    display_name_vi: Xem Kết quả Xét nghiệm
    description: Provider reviews and acts on test results
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Results available in system
    trigger: New results filed
    main_flow:
      1: Provider opens results inbox
      2: Provider views new results
      3: Provider reviews result values
      4: Provider interprets findings
      5: Provider determines action needed
      6: Provider documents interpretation
      7: Provider communicates with patient if needed
      8: Provider marks result as reviewed
    result_actions:
      - normal_no_action: Mark reviewed
      - abnormal_monitor: Note and follow
      - abnormal_action: Order follow-up, call patient
      - critical: Immediate action required
    critical_result_handling:
      - acknowledge_receipt
      - document_action_taken
      - patient_notification
    postconditions:
      - Result marked as reviewed
      - Action documented if needed

  - id: UC-PROV-010
    name: Manage Care Gaps
    display_name_vi: Quản lý Khoảng trống Chăm sóc
    description: Provider addresses preventive care gaps
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Care gaps identified for patient
    trigger: Visit with patient with gaps or population review
    main_flow:
      1: Provider views care gap alerts
      2: Provider reviews patient's gaps
      3: Provider discusses with patient
      4: Provider addresses gaps during visit
      5: Provider documents gap closure
    common_care_gaps:
      - immunizations: Flu, pneumonia, shingles
      - cancer_screenings: Mammogram, colonoscopy
      - chronic_disease: HbA1c, eye exams, foot exams
      - preventive_visits: Annual wellness visit
    postconditions:
      - Care gaps addressed or documented reasons not done

# =============================================================================
# USE CASES - CLINICAL DECISION SUPPORT
# =============================================================================
cds_use_cases:
  - id: UC-PROV-011
    name: Respond to Clinical Alert
    display_name_vi: Phản hồi Cảnh báo Lâm sàng
    description: Provider evaluates and responds to CDS alert
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - System has generated clinical alert
    trigger: CDS rule fires during workflow
    main_flow:
      1: Alert displays to provider
      2: Provider reviews alert details
      3: Provider evaluates clinical relevance
      4: Provider decides to accept or override
      5: If override, provider documents reason
      6: Provider continues with workflow
    alert_types:
      - drug_interaction: Medication conflict
      - allergy_alert: Potential reaction
      - dose_alert: Out of range dosing
      - duplicate_alert: Duplicate order
      - care_gap_alert: Preventive care needed
      - protocol_alert: Best practice suggestion
    override_documentation:
      required_for: [contraindicated, allergy_match]
      reason_categories:
        - patient_tolerates
        - benefit_outweighs_risk
        - will_monitor_closely
        - patient_informed
    postconditions:
      - Alert processed
      - Override documented if applicable

  - id: UC-PROV-012
    name: Use Order Set
    display_name_vi: Sử dụng Bộ Y lệnh
    description: Provider uses evidence-based order set
    actors: [physician, nurse_practitioner, physician_assistant]
    preconditions:
      - Appropriate order set exists
    trigger: Clinical scenario matching order set
    main_flow:
      1: Provider selects appropriate order set
      2: System displays order set contents
      3: Provider reviews pre-selected orders
      4: Provider customizes selections
      5: Provider adds or removes orders
      6: Provider reviews all orders
      7: Provider signs order set
    order_set_types:
      - admission_order_sets: CHF, pneumonia, hip fracture
      - procedure_order_sets: Pre-op, post-op
      - protocol_order_sets: Sepsis, stroke, MI
      - discharge_order_sets: Standard discharge
    postconditions:
      - All selected orders placed
      - Care standardized per protocol

# =============================================================================
# USE CASES - CARE COORDINATION
# =============================================================================
care_coordination_use_cases:
  - id: UC-PROV-013
    name: Conduct Handoff
    display_name_vi: Bàn giao Chăm sóc
    description: Provider hands off patient care to another provider
    actors: [physician]
    preconditions:
      - End of shift or care transfer
      - Receiving provider identified
    trigger: Change in provider responsibility
    main_flow:
      1: Sending provider prepares handoff
      2: Provider generates handoff report
      3: Provider identifies critical issues
      4: Provider communicates with receiving provider
      5: Receiving provider acknowledges handoff
      6: Responsibility transferred
    handoff_content:
      - patient_list: Current patients
      - illness_severity: Sick or stable
      - patient_summary: Brief clinical status
      - action_list: Pending items
      - situation_awareness: What to watch for
      - contingency_plans: If X happens, do Y
    handoff_method:
      - in_person: Preferred for sick patients
      - phone: Acceptable for stable patients
      - written: Always accompanies verbal
    postconditions:
      - Receiving provider has information
      - Responsibility clearly transferred

  - id: UC-PROV-014
    name: Consult Specialist
    display_name_vi: Tham vấn Chuyên gia
    description: Provider requests specialist consultation
    actors: [physician]
    preconditions:
      - Patient needs specialist expertise
    trigger: Clinical question requiring specialist input
    main_flow:
      1: Provider determines specialty needed
      2: Provider places consultation order
      3: Provider documents clinical question
      4: Provider communicates urgency
      5: Consultant sees patient
      6: Consultant documents recommendations
      7: Requesting provider reviews recommendations
      8: Provider incorporates into care plan
    consultation_urgency:
      - routine: Within 48 hours
      - urgent: Within 24 hours
      - emergent: Immediate
    postconditions:
      - Specialist recommendations documented
      - Care plan updated

  - id: UC-PROV-015
    name: Discharge Patient
    display_name_vi: Xuất viện Bệnh nhân
    description: Provider completes inpatient discharge
    actors: [physician]
    preconditions:
      - Patient medically ready for discharge
      - Discharge planning complete
    trigger: Clinical readiness for discharge
    main_flow:
      1: Provider determines discharge readiness
      2: Provider completes medication reconciliation
      3: Provider writes discharge orders
      4: Provider writes discharge prescriptions
      5: Provider schedules follow-up
      6: Provider completes discharge summary
      7: Provider provides discharge instructions
      8: Patient discharged
    discharge_elements:
      - discharge_condition: Status at discharge
      - discharge_medications: Complete list
      - follow_up_appointments: Scheduled visits
      - activity_instructions: Restrictions
      - diet_instructions: Dietary modifications
      - warning_signs: When to seek care
    postconditions:
      - Discharge summary complete within 48 hours
      - Patient safely transitioned

# =============================================================================
# USE CASES - NURSING
# =============================================================================
nursing_use_cases:
  - id: UC-PROV-016
    name: Administer Medication
    display_name_vi: Cấp phát Thuốc
    description: Nurse administers medication to patient
    actors: [registered_nurse]
    preconditions:
      - Medication order is active
      - Medication is available
    trigger: Scheduled medication time
    main_flow:
      1: Nurse reviews medication task
      2: Nurse verifies five rights
      3: Nurse scans patient wristband
      4: Nurse scans medication barcode
      5: System verifies match
      6: Nurse administers medication
      7: Nurse documents administration
      8: Nurse monitors for effects
    five_rights_verification:
      - right_patient: Wristband scan
      - right_medication: Barcode scan
      - right_dose: Verify amount
      - right_route: Verify method
      - right_time: Within time window
    alternate_flows:
      A1_barcode_mismatch:
        trigger: Scanned barcode doesn't match
        flow:
          1: System displays error
          2: Nurse verifies order
          3: Nurse contacts pharmacy if discrepancy
      A2_patient_refuses:
        trigger: Patient declines medication
        flow:
          1: Nurse documents refusal
          2: Nurse notifies provider if appropriate
    postconditions:
      - Medication documented
      - MAR updated

  - id: UC-PROV-017
    name: Document Vital Signs
    display_name_vi: Ghi nhận Dấu hiệu Sinh tồn
    description: Clinical staff records vital signs
    actors: [registered_nurse, medical_assistant]
    preconditions:
      - Patient encounter active
    trigger: Vital sign assessment time
    main_flow:
      1: Staff obtains vital signs
      2: Staff enters values into system
      3: System validates values
      4: System checks for abnormals
      5: Staff reviews and confirms
      6: Vital signs filed to flowsheet
    vital_signs:
      - blood_pressure: Systolic and diastolic
      - heart_rate: Beats per minute
      - respiratory_rate: Breaths per minute
      - temperature: With site
      - oxygen_saturation: SpO2
      - pain_score: 0-10 scale
      - height: For BMI
      - weight: For dosing
    abnormal_handling:
      - out_of_range: Alert displayed
      - critical_value: Immediate provider notification
    postconditions:
      - Vital signs documented
      - Alerts generated if abnormal

  - id: UC-PROV-018
    name: Complete Nursing Assessment
    display_name_vi: Hoàn thành Đánh giá Điều dưỡng
    description: Nurse completes comprehensive assessment
    actors: [registered_nurse]
    preconditions:
      - Patient admitted or assessed
    trigger: Admission or scheduled assessment time
    main_flow:
      1: Nurse reviews patient information
      2: Nurse conducts assessment
      3: Nurse documents findings by system
      4: Nurse identifies nursing diagnoses
      5: Nurse develops care plan
      6: Nurse signs assessment
    assessment_systems:
      - neurological: LOC, orientation, pupils
      - cardiovascular: Heart sounds, pulses, edema
      - respiratory: Breath sounds, oxygen
      - gastrointestinal: Bowel sounds, abdomen
      - genitourinary: Output, bladder
      - musculoskeletal: Mobility, range of motion
      - integumentary: Skin, wounds
      - psychosocial: Mood, support
    postconditions:
      - Assessment documented
      - Care plan updated

# =============================================================================
# NON-FUNCTIONAL REQUIREMENTS
# =============================================================================
non_functional_requirements:
  performance:
    - page_load: "< 3 seconds"
    - order_entry: "< 2 seconds"
    - search_results: "< 1 second"
    - chart_open: "< 5 seconds"

  availability:
    - uptime: "99.9%"
    - downtime_notification: 30_minutes_advance
    - disaster_recovery: 4_hour_rto

  usability:
    - training_time: "< 8 hours for basic competency"
    - click_reduction: minimize_clicks_per_task
    - mobile_access: tablet_and_smartphone_support

  security:
    - session_timeout: 15_minutes_inactivity
    - audit_logging: all_phi_access
    - role_based_access: enforced
