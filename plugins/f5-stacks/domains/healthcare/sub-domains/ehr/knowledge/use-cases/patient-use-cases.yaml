# =============================================================================
# PATIENT USE CASES - EHR Sub-domain
# Ca sử dụng cho Bệnh nhân
# =============================================================================

name: PatientUseCases
display_name: Patient Use Cases / Ca sử dụng cho Bệnh nhân
version: "1.0"
domain: healthcare
sub_domain: ehr
actor_type: patient

description: |
  Use cases for patients interacting with the EHR system through patient portals,
  mobile applications, and care team interactions. Focuses on patient engagement,
  self-service, and care coordination from the patient perspective.

# =============================================================================
# ACTOR DEFINITION
# =============================================================================
primary_actor:
  name: Patient
  description: Healthcare consumer receiving care
  variants:
    - adult_patient: Self-managing care
    - pediatric_patient: Parent/guardian manages
    - elderly_patient: May have caregiver assistance
    - proxy_user: Authorized representative

secondary_actors:
  - care_team: Providers involved in care
  - family_caregiver: Authorized family member
  - patient_advocate: Hospital patient representative

# =============================================================================
# USE CASES - PORTAL ACCESS
# =============================================================================
portal_access_use_cases:
  - id: UC-PAT-001
    name: Register for Patient Portal
    display_name_vi: Đăng ký Cổng thông tin Bệnh nhân
    description: Patient creates account to access health information online
    actors: [patient]
    preconditions:
      - Patient has medical record in system
      - Patient has valid email address
    trigger: Patient receives portal invitation or visits registration page
    main_flow:
      1: Patient navigates to portal registration page
      2: Patient enters personal information (name, DOB, MRN or last 4 SSN)
      3: System verifies patient identity against EHR
      4: Patient creates username and password
      5: Patient provides email and mobile number
      6: System sends verification code
      7: Patient enters verification code
      8: Patient accepts terms of use and privacy notice
      9: System creates portal account
      10: Patient receives confirmation email
    alternate_flows:
      A1_identity_not_verified:
        trigger: Step 3 - Identity verification fails
        flow:
          1: System displays verification failure message
          2: Patient can retry or contact support
          3: Patient can complete in-person identity proofing
      A2_proxy_registration:
        trigger: Registering for minor or incapacitated patient
        flow:
          1: Parent/guardian registers with their identity
          2: System verifies relationship to patient
          3: Proxy access granted with appropriate restrictions
    postconditions:
      - Portal account is active
      - Patient can log in and view health information
    business_rules:
      - Identity verification required per 21st Century Cures Act
      - Proxy access requires documented authorization

  - id: UC-PAT-002
    name: View Health Records
    display_name_vi: Xem Hồ sơ Sức khỏe
    description: Patient views their medical information through portal
    actors: [patient, proxy_user]
    preconditions:
      - Patient has active portal account
      - Patient is logged in
    trigger: Patient navigates to health records section
    main_flow:
      1: Patient selects "Health Records" from portal menu
      2: System displays available record categories
      3: Patient selects category to view
      4: System retrieves and displays information
      5: Patient reviews their health information
    available_records:
      - lab_results: Test results with reference ranges
      - medications: Current and past medications
      - allergies: Documented allergies and reactions
      - immunizations: Vaccination history
      - visit_summaries: After visit summaries
      - clinical_notes: Provider notes (per information blocking)
      - vital_signs: Recent vital sign measurements
      - problem_list: Active diagnoses
      - procedures: Procedure history
      - imaging_results: Radiology reports
    alternate_flows:
      A1_sensitive_information:
        trigger: Record contains sensitive information
        flow:
          1: System checks consent for sensitive data access
          2: If consented, displays with appropriate warnings
          3: If not consented, displays message to contact provider
    postconditions:
      - Patient has viewed requested health information
      - Access logged for audit purposes
    regulatory_compliance:
      - 21st_century_cures_act: Information blocking prohibited
      - hipaa: Patient right of access

  - id: UC-PAT-003
    name: Download Health Records
    display_name_vi: Tải xuống Hồ sơ Sức khỏe
    description: Patient exports health information for personal use or sharing
    actors: [patient]
    preconditions:
      - Patient has active portal account
      - Patient is logged in
    trigger: Patient requests to download health information
    main_flow:
      1: Patient selects download/export option
      2: System presents format options
      3: Patient selects desired format and date range
      4: System compiles requested information
      5: Patient downloads file to their device
    export_formats:
      - pdf: Human-readable document
      - ccda: C-CDA for sharing with providers
      - fhir: FHIR bundle for apps
      - blue_button: Blue Button format
    postconditions:
      - Patient has downloaded health information file
      - Download logged for audit
    business_rules:
      - Must provide in requested format if readily producible
      - May charge reasonable cost-based fee

# =============================================================================
# USE CASES - COMMUNICATION
# =============================================================================
communication_use_cases:
  - id: UC-PAT-004
    name: Send Message to Care Team
    display_name_vi: Gửi tin nhắn cho Đội ngũ Chăm sóc
    description: Patient sends secure message to provider or care team
    actors: [patient]
    preconditions:
      - Patient has active portal account
      - Patient has established relationship with provider
    trigger: Patient has non-urgent question or request
    main_flow:
      1: Patient selects "Messages" from portal
      2: Patient selects "New Message"
      3: Patient selects recipient from care team
      4: Patient selects message category
      5: Patient enters subject and message body
      6: Patient optionally attaches files
      7: Patient sends message
      8: System routes message to provider inbox
      9: Patient receives confirmation
    message_categories:
      - general_question
      - prescription_refill_request
      - appointment_request
      - test_result_question
      - referral_request
      - billing_question
    alternate_flows:
      A1_urgent_symptoms:
        trigger: Patient indicates urgent symptoms
        flow:
          1: System displays warning about messaging for emergencies
          2: Provides emergency contact information
          3: Allows patient to proceed if non-emergency
    postconditions:
      - Message delivered to care team inbox
      - Patient notified of expected response time
    business_rules:
      - Non-emergency use only
      - Response within 2 business days
      - Auto-response after hours

  - id: UC-PAT-005
    name: View Messages from Care Team
    display_name_vi: Xem tin nhắn từ Đội ngũ Chăm sóc
    description: Patient views and responds to provider messages
    actors: [patient]
    preconditions:
      - Patient has messages in inbox
    trigger: Patient receives notification or checks inbox
    main_flow:
      1: Patient navigates to message inbox
      2: System displays list of messages
      3: Patient selects message to read
      4: System displays full message content
      5: Patient may reply or take action
    postconditions:
      - Message marked as read
      - Patient may have responded

  - id: UC-PAT-006
    name: Participate in Telehealth Visit
    display_name_vi: Tham gia Khám bệnh từ xa
    description: Patient joins video visit with provider
    actors: [patient, provider]
    preconditions:
      - Telehealth appointment is scheduled
      - Patient has device with camera and microphone
      - Patient has internet connection
    trigger: Telehealth appointment time approaches
    main_flow:
      1: Patient receives reminder with link
      2: Patient clicks link at appointment time
      3: System prompts for device permissions
      4: Patient grants camera/microphone access
      5: Patient enters virtual waiting room
      6: Provider admits patient to visit
      7: Video consultation begins
      8: Provider and patient conduct visit
      9: Visit concludes
      10: Patient receives after visit summary
    alternate_flows:
      A1_technical_difficulties:
        trigger: Connection issues during visit
        flow:
          1: System attempts to reconnect
          2: If unable, patient can rejoin
          3: Option to convert to phone call
    postconditions:
      - Visit documented
      - After visit summary provided
    technical_requirements:
      - supported_browsers: Chrome, Firefox, Safari, Edge
      - bandwidth: minimum_1mbps
      - devices: desktop, laptop, tablet, smartphone

# =============================================================================
# USE CASES - APPOINTMENTS
# =============================================================================
appointment_use_cases:
  - id: UC-PAT-007
    name: Schedule Appointment
    display_name_vi: Đặt lịch Khám bệnh
    description: Patient schedules appointment through portal
    actors: [patient]
    preconditions:
      - Patient has active portal account
      - Provider has open availability
    trigger: Patient needs to schedule visit
    main_flow:
      1: Patient selects "Schedule Appointment"
      2: Patient selects provider or specialty
      3: Patient selects visit type
      4: System displays available times
      5: Patient selects preferred date and time
      6: Patient confirms appointment details
      7: System books appointment
      8: Patient receives confirmation
    visit_types:
      - new_patient_visit
      - follow_up_visit
      - annual_wellness
      - sick_visit
      - telehealth_visit
    alternate_flows:
      A1_no_availability:
        trigger: No appointments available online
        flow:
          1: System offers to join waitlist
          2: Patient can request callback from scheduling
    postconditions:
      - Appointment scheduled in system
      - Confirmation sent to patient
      - Reminder scheduled

  - id: UC-PAT-008
    name: Cancel or Reschedule Appointment
    display_name_vi: Hủy hoặc Dời lịch Khám
    description: Patient modifies or cancels existing appointment
    actors: [patient]
    preconditions:
      - Patient has upcoming appointment
      - Cancellation window is open
    trigger: Patient cannot attend scheduled appointment
    main_flow:
      1: Patient views upcoming appointments
      2: Patient selects appointment to modify
      3: Patient chooses cancel or reschedule
      4: If reschedule, patient selects new time
      5: System updates appointment
      6: Patient receives confirmation
    business_rules:
      - cancellation_notice: 24_hours_preferred
      - late_cancellation_fee: may_apply
      - no_show_tracking: enabled

  - id: UC-PAT-009
    name: Complete Pre-Visit Questionnaire
    display_name_vi: Hoàn thành Bảng câu hỏi trước Khám
    description: Patient completes intake forms before visit
    actors: [patient]
    preconditions:
      - Appointment is scheduled
      - Pre-visit forms assigned
    trigger: Patient receives pre-visit notification
    main_flow:
      1: Patient receives notification to complete forms
      2: Patient accesses pre-visit forms through portal
      3: Patient updates demographics if needed
      4: Patient confirms or updates medications
      5: Patient confirms or updates allergies
      6: Patient completes symptom questionnaire
      7: Patient signs required consents
      8: Patient submits completed forms
      9: Forms integrated into EHR
    postconditions:
      - Forms available for provider review
      - Patient ready for visit

# =============================================================================
# USE CASES - MEDICATIONS
# =============================================================================
medication_use_cases:
  - id: UC-PAT-010
    name: Request Prescription Refill
    display_name_vi: Yêu cầu Cấp lại Đơn thuốc
    description: Patient requests refill of existing prescription
    actors: [patient]
    preconditions:
      - Prescription exists in patient record
      - Refills may be available
    trigger: Patient needs medication refill
    main_flow:
      1: Patient navigates to medications
      2: Patient selects medication needing refill
      3: Patient selects "Request Refill"
      4: Patient confirms pharmacy
      5: Patient adds notes if needed
      6: Patient submits request
      7: Request routed to provider
      8: Provider approves and sends to pharmacy
      9: Patient notified of approval
    alternate_flows:
      A1_no_refills_remaining:
        trigger: Prescription has no refills
        flow:
          1: System notifies patient refills exhausted
          2: Request sent to provider for new prescription
          3: Provider may require visit
      A2_too_early:
        trigger: Refill requested too early
        flow:
          1: System displays earliest refill date
          2: Patient can request future refill
    postconditions:
      - Refill processed or visit requested
      - Prescription sent to pharmacy

  - id: UC-PAT-011
    name: View Medication Information
    display_name_vi: Xem thông tin Thuốc
    description: Patient reviews medication details and instructions
    actors: [patient]
    preconditions:
      - Patient has medications on file
    trigger: Patient wants medication information
    main_flow:
      1: Patient navigates to medication list
      2: Patient views current medications
      3: Patient selects medication for details
      4: System displays medication information
    displayed_information:
      - medication_name: Brand and generic
      - dosage: Strength and quantity
      - instructions: How to take
      - purpose: Why prescribed
      - side_effects: Common side effects
      - interactions: Drug interactions
      - prescriber: Who prescribed
      - pharmacy: Where to fill

# =============================================================================
# USE CASES - CARE MANAGEMENT
# =============================================================================
care_management_use_cases:
  - id: UC-PAT-012
    name: Review Care Plan
    display_name_vi: Xem Kế hoạch Chăm sóc
    description: Patient views and tracks their care plan
    actors: [patient]
    preconditions:
      - Patient has active care plan
    trigger: Patient wants to review care goals
    main_flow:
      1: Patient navigates to care plan
      2: System displays care plan overview
      3: Patient reviews health goals
      4: Patient views action items
      5: Patient tracks progress
    care_plan_elements:
      - health_goals: Target outcomes
      - action_items: Patient responsibilities
      - care_team: Who is involved
      - appointments: Scheduled visits
      - education: Learning resources
      - progress: Goal achievement

  - id: UC-PAT-013
    name: Log Health Data
    display_name_vi: Ghi lại Dữ liệu Sức khỏe
    description: Patient enters self-reported health information
    actors: [patient]
    preconditions:
      - Patient has active portal account
    trigger: Patient monitors health metrics
    main_flow:
      1: Patient selects "Log Health Data"
      2: Patient selects data type to enter
      3: Patient enters values
      4: System validates and stores data
      5: Data visible to care team
    data_types:
      - blood_pressure: Systolic/diastolic
      - blood_glucose: Fasting or random
      - weight: In pounds or kg
      - temperature: If ill
      - symptoms: Symptom diary
      - medications_taken: Adherence tracking
      - activity: Exercise and steps
    postconditions:
      - Data stored in patient record
      - Available for care team review
      - May trigger alerts if abnormal

  - id: UC-PAT-014
    name: Connect Wearable Device
    display_name_vi: Kết nối Thiết bị Đeo
    description: Patient links fitness tracker or medical device
    actors: [patient]
    preconditions:
      - Patient has compatible device
      - System supports device integration
    trigger: Patient wants to share device data
    main_flow:
      1: Patient navigates to connected devices
      2: Patient selects device type
      3: System guides through authorization
      4: Patient authorizes data sharing
      5: Device data begins syncing
    supported_devices:
      - fitness_trackers: Fitbit, Apple Watch, Garmin
      - glucose_monitors: Dexcom, Libre
      - blood_pressure_monitors: Withings, Omron
      - weight_scales: Withings, Fitbit
    postconditions:
      - Device connected and syncing
      - Data visible in health record

# =============================================================================
# USE CASES - BILLING AND PAYMENTS
# =============================================================================
billing_use_cases:
  - id: UC-PAT-015
    name: View and Pay Bills
    display_name_vi: Xem và Thanh toán Hóa đơn
    description: Patient views statements and makes payments
    actors: [patient]
    preconditions:
      - Patient has outstanding balance
    trigger: Patient receives billing notification
    main_flow:
      1: Patient navigates to billing section
      2: System displays account summary
      3: Patient views statement details
      4: Patient selects payment amount
      5: Patient enters payment method
      6: System processes payment
      7: Patient receives confirmation
    payment_methods:
      - credit_card
      - debit_card
      - bank_account
      - payment_plan
    alternate_flows:
      A1_dispute_charge:
        trigger: Patient disputes charge
        flow:
          1: Patient selects "Dispute" option
          2: Patient explains dispute reason
          3: Request sent to billing department
    postconditions:
      - Payment processed and applied
      - Receipt provided

  - id: UC-PAT-016
    name: Request Good Faith Estimate
    display_name_vi: Yêu cầu Ước tính Giá
    description: Patient requests price estimate for services
    actors: [patient]
    preconditions:
      - Patient has scheduled service
    trigger: Patient wants to know expected cost
    main_flow:
      1: Patient requests estimate
      2: System calculates based on:
         - Scheduled services
         - Insurance coverage
         - Deductible status
      3: Estimate displayed to patient
      4: Patient can download or print
    regulatory_compliance:
      - no_surprises_act: Good faith estimate required

# =============================================================================
# USE CASES - PRIVACY AND CONSENT
# =============================================================================
privacy_use_cases:
  - id: UC-PAT-017
    name: Manage Privacy Settings
    display_name_vi: Quản lý Cài đặt Quyền riêng tư
    description: Patient controls who can access their information
    actors: [patient]
    preconditions:
      - Patient has active portal account
    trigger: Patient wants to modify privacy preferences
    main_flow:
      1: Patient navigates to privacy settings
      2: Patient reviews current settings
      3: Patient modifies preferences
      4: System updates access controls
    privacy_options:
      - proxy_access: Manage who can access on behalf
      - hie_participation: Opt in/out of health exchange
      - marketing: Communication preferences
      - research: Research participation consent
      - sensitive_data: Specific information restrictions
    postconditions:
      - Preferences updated
      - Access controls enforced

  - id: UC-PAT-018
    name: Request Access to Records
    display_name_vi: Yêu cầu Truy cập Hồ sơ
    description: Patient formally requests copy of medical records
    actors: [patient]
    preconditions:
      - Patient is verified
    trigger: Patient needs official copy of records
    main_flow:
      1: Patient submits request through portal
      2: Patient specifies records requested
      3: Patient specifies format preference
      4: Request processed by HIM department
      5: Records compiled and provided
      6: Patient notified when ready
    regulatory_compliance:
      - hipaa: 30 day response required
      - fees: Reasonable cost-based only
    postconditions:
      - Records provided within timeframe
      - Request documented

  - id: UC-PAT-019
    name: Request Amendment to Record
    display_name_vi: Yêu cầu Sửa đổi Hồ sơ
    description: Patient requests correction to health information
    actors: [patient]
    preconditions:
      - Patient believes record contains error
    trigger: Patient identifies incorrect information
    main_flow:
      1: Patient submits amendment request
      2: Patient identifies information to amend
      3: Patient explains why incorrect
      4: Request reviewed by provider
      5: Decision made to accept or deny
      6: Patient notified of decision
    alternate_flows:
      A1_amendment_denied:
        trigger: Provider denies amendment
        flow:
          1: Patient notified with reason
          2: Patient may submit statement of disagreement
          3: Statement appended to record
    regulatory_compliance:
      - hipaa: 60 day response required
    postconditions:
      - Amendment applied or statement attached
      - Patient notified

# =============================================================================
# NON-FUNCTIONAL REQUIREMENTS
# =============================================================================
non_functional_requirements:
  accessibility:
    - wcag_2_1_aa_compliance
    - screen_reader_support
    - keyboard_navigation
    - language_translation

  usability:
    - mobile_responsive_design
    - intuitive_navigation
    - clear_error_messages
    - help_documentation

  security:
    - multi_factor_authentication_available
    - session_timeout
    - encryption_in_transit
    - audit_logging

  availability:
    - 99_9_percent_uptime
    - 24_7_access
    - mobile_app_availability
