name: ehr
display_name: Electronic Health Records / Hồ sơ sức khỏe điện tử
description: |
  Comprehensive Electronic Health Records (EHR) system for healthcare organizations.
  Manages patient records, clinical documentation, orders, and care coordination
  while ensuring compliance with healthcare regulations (HIPAA, GDPR, HL7 FHIR).

domain: healthcare
version: "1.0"
status: active

# =============================================================================
# COMPLIANCE REQUIREMENTS
# =============================================================================
compliance:
  regulations:
    - name: HIPAA
      full_name: Health Insurance Portability and Accountability Act
      jurisdiction: United States
      requirements:
        - Privacy Rule (PHI protection)
        - Security Rule (ePHI safeguards)
        - Breach Notification Rule
        - Minimum Necessary Standard

    - name: HITECH
      full_name: Health Information Technology for Economic and Clinical Health Act
      jurisdiction: United States
      requirements:
        - Meaningful Use requirements
        - Enhanced penalties for violations
        - Business Associate requirements

    - name: GDPR
      full_name: General Data Protection Regulation
      jurisdiction: European Union
      requirements:
        - Lawful basis for processing
        - Data subject rights
        - Data Protection Impact Assessment
        - 72-hour breach notification

    - name: Vietnam_PDPD
      full_name: Nghị định 13/2023/NĐ-CP về bảo vệ dữ liệu cá nhân
      jurisdiction: Vietnam
      requirements:
        - Data subject consent
        - Purpose limitation
        - Cross-border transfer restrictions

  standards:
    - name: HL7_FHIR
      full_name: Fast Healthcare Interoperability Resources
      version: R4
      purpose: Healthcare data interoperability

    - name: ICD-10
      full_name: International Classification of Diseases, 10th Revision
      purpose: Diagnosis coding

    - name: CPT
      full_name: Current Procedural Terminology
      purpose: Procedure coding

    - name: LOINC
      full_name: Logical Observation Identifiers Names and Codes
      purpose: Lab and clinical observations coding

    - name: RxNorm
      full_name: RxNorm
      purpose: Medication coding

    - name: SNOMED_CT
      full_name: Systematized Nomenclature of Medicine - Clinical Terms
      purpose: Clinical terminology

# =============================================================================
# CORE CAPABILITIES
# =============================================================================
capabilities:
  patient_management:
    description: Patient registration, demographics, and identity management
    features:
      - Master Patient Index (MPI)
      - Duplicate detection and merge
      - Patient portal integration
      - Proxy access management

  clinical_documentation:
    description: Electronic documentation of clinical encounters
    features:
      - Progress notes
      - History and Physical (H&P)
      - Operative reports
      - Discharge summaries
      - Template-based documentation

  order_management:
    description: Computerized Provider Order Entry (CPOE)
    features:
      - Laboratory orders
      - Imaging orders
      - Medication orders
      - Referral orders
      - Clinical decision support

  medication_management:
    description: Electronic prescribing and medication tracking
    features:
      - ePrescribing (eRx)
      - Controlled substance prescribing (EPCS)
      - Drug interaction checking
      - Allergy verification
      - Formulary management

  results_management:
    description: Lab and diagnostic results handling
    features:
      - Result notification
      - Critical value alerts
      - Result trending
      - Provider acknowledgment tracking

  care_coordination:
    description: Multi-provider and multi-facility coordination
    features:
      - Referral management
      - Care team assignment
      - Transition of care
      - Health information exchange

# =============================================================================
# USER ROLES
# =============================================================================
user_roles:
  - role: physician
    display_name: Physician / Bác sĩ
    access_level: clinical_full
    capabilities:
      - View and edit patient records
      - Place orders
      - Prescribe medications
      - Sign documents
      - Break the glass access

  - role: nurse
    display_name: Nurse / Y tá
    access_level: clinical_limited
    capabilities:
      - View patient records
      - Document vitals and assessments
      - Administer medications
      - Execute orders

  - role: medical_assistant
    display_name: Medical Assistant / Trợ lý y tế
    access_level: clinical_basic
    capabilities:
      - Record vitals
      - Update demographics
      - Schedule appointments

  - role: pharmacist
    display_name: Pharmacist / Dược sĩ
    access_level: pharmacy
    capabilities:
      - Verify prescriptions
      - Drug utilization review
      - Medication counseling

  - role: lab_technician
    display_name: Lab Technician / Kỹ thuật viên xét nghiệm
    access_level: laboratory
    capabilities:
      - Process specimens
      - Enter results
      - Quality control

  - role: registrar
    display_name: Registrar / Nhân viên đăng ký
    access_level: administrative
    capabilities:
      - Patient registration
      - Insurance verification
      - Scheduling

  - role: billing_staff
    display_name: Billing Staff / Nhân viên thanh toán
    access_level: billing
    capabilities:
      - View diagnoses and procedures for coding
      - Claims processing
      - Payment posting

  - role: health_information_manager
    display_name: Health Information Manager / Quản lý thông tin y tế
    access_level: him
    capabilities:
      - Record release
      - Coding audit
      - Privacy compliance

  - role: system_administrator
    display_name: System Administrator / Quản trị hệ thống
    access_level: system
    capabilities:
      - User management
      - Configuration
      - Audit logs
      - Security settings

# =============================================================================
# INTEGRATION POINTS
# =============================================================================
integrations:
  - name: Laboratory Information System (LIS)
    direction: bidirectional
    standards: [HL7v2, FHIR]
    data: Orders, results

  - name: Radiology Information System (RIS)
    direction: bidirectional
    standards: [HL7v2, DICOM]
    data: Orders, reports, images

  - name: Pharmacy System
    direction: bidirectional
    standards: [NCPDP SCRIPT, FHIR]
    data: Prescriptions, dispensing

  - name: Practice Management System (PMS)
    direction: bidirectional
    standards: [HL7v2, FHIR]
    data: Scheduling, billing

  - name: Health Information Exchange (HIE)
    direction: bidirectional
    standards: [FHIR, CDA]
    data: Care summaries, ADT notifications

  - name: Patient Portal
    direction: bidirectional
    standards: [FHIR, OAuth2]
    data: Records, messaging, appointments

  - name: Medical Devices
    direction: inbound
    standards: [HL7v2, IEEE 11073]
    data: Vital signs, monitoring data

# =============================================================================
# SECURITY REQUIREMENTS
# =============================================================================
security:
  authentication:
    methods:
      - username_password
      - smart_card
      - biometric
      - single_sign_on
    mfa_required: true
    session_timeout_minutes: 15

  authorization:
    model: role_based_access_control
    features:
      - Context-based access (care team)
      - Break the glass
      - VIP patient restrictions

  audit:
    logged_events:
      - All PHI access
      - Login/logout
      - Failed authentication
      - Permission changes
      - Record modifications
    retention_years: 6

  encryption:
    at_rest: AES-256
    in_transit: TLS 1.3
    key_management: HSM

  data_classification:
    levels:
      - public: General information
      - internal: Staff-only information
      - confidential: PHI standard access
      - restricted: Sensitive PHI (HIV, mental health, substance abuse)
      - highly_restricted: VIP, employee health

# =============================================================================
# VARIANTS
# =============================================================================
variants:
  - name: ambulatory
    display_name: Ambulatory/Outpatient EHR
    focus: Clinic and office-based care
    features:
      - Appointment scheduling
      - Check-in/check-out
      - ePrescribing
      - Patient messaging

  - name: inpatient
    display_name: Inpatient/Hospital EHR
    focus: Hospital-based care
    features:
      - ADT (Admit/Discharge/Transfer)
      - Bed management
      - Medication administration
      - Nursing documentation

  - name: emergency
    display_name: Emergency Department EHR
    focus: Emergency care
    features:
      - Triage
      - Track board
      - Rapid documentation
      - Trauma protocols

  - name: integrated
    display_name: Integrated EHR
    focus: Full spectrum care
    features:
      - All ambulatory features
      - All inpatient features
      - Unified patient record
