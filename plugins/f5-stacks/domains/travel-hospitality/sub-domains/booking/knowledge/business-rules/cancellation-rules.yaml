name: cancellation-rules
display_name: Cancellation & Refund Rules
display_name_vi: Quy tắc hủy & Hoàn tiền
version: "1.0"
domain: travel-hospitality
subdomain: booking

description: |
  Business rules governing cancellation policies, refund calculations,
  penalty structures, and exception handling for all product types.

categories:
  - name: flight_cancellation
    display_name: Flight Cancellation Rules
    rules:
      - id: BR-CAN-F001
        name: Refundable Fare Cancellation
        description: |
          Rules for cancelling refundable tickets.
        conditions:
          - fare_type: refundable
          - ticket_status: unused or partially used
        refund_calculation:
          - unused_sectors: full refund minus fees
          - cancellation_fee: per fare rules
          - taxes_refund: YQ/YR may be non-refundable
        timeline:
          - process_time: 7-14 business days
          - refund_method: original form of payment
        priority: high

      - id: BR-CAN-F002
        name: Non-Refundable Fare Cancellation
        description: |
          Rules for cancelling non-refundable tickets.
        conditions:
          - fare_type: non-refundable
          - ticket_status: unused
        options:
          credit:
            - airline_credit: ticket value minus fees
            - validity: 12 months from issue
            - name_change: not allowed (same passenger)
          taxes_only:
            - refundable_taxes: airport taxes, government fees
            - non_refundable: carrier surcharges (YQ/YR)
        fees:
          - cancellation_fee: varies by airline
          - no_show_penalty: higher than cancellation
        priority: high

      - id: BR-CAN-F003
        name: 24-Hour Cancellation
        description: |
          US DOT 24-hour refund rule.
        applicability:
          - origin_or_destination: USA
          - booking_made: 7+ days before departure
          - purchase_direct: from airline or authorized agent
        rights:
          - full_refund: within 24 hours of booking
          - no_penalty: regardless of fare type
          - original_payment: refund method
        exclusions:
          - group_bookings
          - award_tickets
        priority: critical
        compliance: DOT_14_CFR_259.5

      - id: BR-CAN-F004
        name: Airline-Initiated Cancellation
        description: |
          When airline cancels or significantly changes flight.
        triggers:
          - flight_cancelled: by airline
          - schedule_change: > 60 minutes
          - equipment_downgrade: significant
        customer_rights:
          - full_refund: automatic entitlement
          - rebooking: alternative flight
          - compensation: per applicable regulations
        process:
          - notify_customer: immediately
          - offer_options: refund or rebooking
          - process_choice: within 7 days
        priority: critical
        compliance: [EU261, US_DOT]

      - id: BR-CAN-F005
        name: No-Show Policy
        description: |
          Rules for passengers who don't show.
        consequences:
          - ticket_forfeited: entire itinerary at risk
          - remaining_segments: may be cancelled
          - no_refund: unless covered by protection
        prevention:
          - reminder_24h: automated
          - reminder_4h: automated
          - check_in_reminder: automated
        recovery:
          - contact_airline: immediately
          - rebooking_fee: if available
        priority: high

  - name: hotel_cancellation
    display_name: Hotel Cancellation Rules
    rules:
      - id: BR-CAN-H001
        name: Free Cancellation Period
        description: |
          Rules for free cancellation before deadline.
        standard_policy:
          - free_until: cancellation deadline
          - typical_deadline: 24-48 hours before check-in
          - deadline_timezone: hotel local time
        cancellation_deadline_display:
          - prominent: on booking page
          - confirmation: in email
          - reminder: 24 hours before deadline
        refund:
          - amount: full refund
          - timeline: 5-10 business days
        priority: critical

      - id: BR-CAN-H002
        name: Partial Refund Policy
        description: |
          Cancellation after deadline but before check-in.
        penalty_structure:
          - within_24h: 1 night penalty
          - same_day: 1-2 nights penalty
          - early_checkout: remaining nights may be charged
        refund_calculation:
          total_paid - penalty_nights * nightly_rate = refund_amount
        priority: high

      - id: BR-CAN-H003
        name: Non-Refundable Hotel Rates
        description: |
          Rules for non-refundable/prepaid rates.
        conditions:
          - rate_type: non-refundable
          - discount: typically 10-20% off flexible
        cancellation:
          - standard: no refund
          - credit_option: at hotel discretion
          - date_change: may be possible with fee
        exceptions:
          - force_majeure: special consideration
          - hotel_closure: full refund
        priority: high

      - id: BR-CAN-H004
        name: Hotel No-Show Policy
        description: |
          When guest doesn't arrive.
        consequences:
          - first_night: charged to card on file
          - remaining_nights: released
          - prepaid_booking: no refund
        grace_period:
          - late_arrival: communicate to hotel
          - hold_until: 6pm local (standard)
          - guaranteed_arrival: hold all night
        priority: high

  - name: package_cancellation
    display_name: Package Cancellation Rules
    rules:
      - id: BR-CAN-P001
        name: Package Cancellation Timeline
        description: |
          Tiered cancellation penalties for packages.
        penalty_structure:
          - "> 60 days before": deposit forfeited (10-20%)
          - "30-60 days before": 50% penalty
          - "15-30 days before": 75% penalty
          - "< 15 days before": 100% penalty
        calculation:
          - based_on: package_total_price
          - excludes: cancellation_protection_premium
        priority: high

      - id: BR-CAN-P002
        name: Partial Package Cancellation
        description: |
          Cancelling components of a package.
        rules:
          - flight_only_cancel: package price recalculated
          - hotel_only_cancel: package price recalculated
          - activity_cancel: individual cancellation policy
        repricing:
          - new_price: sum of individual components
          - may_exceed: original package price
          - difference: customer responsibility
        priority: medium

      - id: BR-CAN-P003
        name: Package Modification vs Cancellation
        description: |
          When changes count as cancellation.
        modification_allowed:
          - date_change: within same season
          - hotel_change: to equivalent
          - passenger_name: minor corrections
        treated_as_cancellation:
          - destination_change
          - significant_date_shift
          - passenger_removal
        priority: medium

  - name: special_circumstances
    display_name: Special Circumstances Rules
    rules:
      - id: BR-CAN-S001
        name: Force Majeure
        description: |
          Cancellation due to extraordinary circumstances.
        covered_events:
          - natural_disaster: hurricane, earthquake, tsunami
          - pandemic: government-declared health emergency
          - war_terrorism: travel advisory level 4
          - civil_unrest: significant safety concern
          - volcanic_ash: airspace closure
        rights:
          - full_refund: or credit
          - no_penalty: waived
          - rebooking: flexible dates
        documentation:
          - news_sources: verification
          - government_advisories: official
        priority: critical

      - id: BR-CAN-S002
        name: Medical Cancellation
        description: |
          Cancellation due to illness or medical emergency.
        requirements:
          - medical_certificate: required
          - dated: before travel date
          - diagnosis: preventing travel
        coverage:
          - with_insurance: per policy terms
          - without_insurance: airline/hotel discretion
          - serious_illness: often accommodated
        documentation:
          - doctor_letter: signed
          - hospital_records: if applicable
        priority: high

      - id: BR-CAN-S003
        name: Death in Family
        description: |
          Cancellation due to bereavement.
        requirements:
          - death_certificate: copy required
          - relationship: immediate family
          - timing: close to travel date
        treatment:
          - full_refund: typically provided
          - fee_waiver: standard practice
          - compassionate: handling required
        priority: high

      - id: BR-CAN-S004
        name: Jury Duty / Military Orders
        description: |
          Cancellation due to civic or military duty.
        covered:
          - jury_summons: dated documentation
          - military_orders: official orders
          - court_subpoena: official document
        treatment:
          - full_refund: with documentation
          - no_penalty: waived
        priority: medium

  - name: refund_processing
    display_name: Refund Processing Rules
    rules:
      - id: BR-CAN-R001
        name: Refund Method
        description: |
          How refunds are processed.
        rules:
          - original_payment: primary method
          - credit_card: 5-10 business days
          - bank_transfer: 10-15 business days
          - alternative: if original unavailable
        exceptions:
          - expired_card: alternative method
          - closed_account: bank transfer
          - dispute: hold until resolved
        priority: high

      - id: BR-CAN-R002
        name: Refund Timeline
        description: |
          Expected refund processing times.
        timelines:
          cancellation_to_processing:
            - immediate: for instant refunds
            - 24-48_hours: standard processing
            - 7-14_days: airline refunds
          processing_to_receipt:
            - credit_card: 5-10 business days
            - bank_transfer: 10-15 business days
            - paypal: 3-5 business days
        communication:
          - confirmation_email: immediate
          - refund_initiated: when processed
          - expected_date: in communication
        priority: high

      - id: BR-CAN-R003
        name: Partial Refunds
        description: |
          Handling partial use or partial cancellation.
        calculation:
          - used_value: calculated at fare paid
          - unused_value: remaining fare value
          - refund: unused - fees
        scenarios:
          - one_way_used: refund return only
          - hotel_partial_stay: refund unused nights
          - activity_missed: per cancellation policy
        priority: medium

  - name: waiver_exceptions
    display_name: Waiver & Exception Rules
    rules:
      - id: BR-CAN-W001
        name: Goodwill Waivers
        description: |
          Discretionary fee waivers for customer retention.
        eligibility:
          - loyal_customer: gold/platinum members
          - first_cancellation: in 12 months
          - reasonable_request: documented reason
        authority:
          - agent_level: up to VND 500,000
          - supervisor: up to VND 2,000,000
          - manager: unlimited (with justification)
        documentation:
          - reason_recorded: required
          - approval_logged: audit trail
        priority: medium

      - id: BR-CAN-W002
        name: Schedule Change Waivers
        description: |
          Automatic waivers for airline-initiated changes.
        triggers:
          - time_change: > 60 minutes
          - routing_change: different connection
          - equipment_downgrade: cabin class affected
        automatic_rights:
          - free_rebooking: same route
          - full_refund: if unacceptable
          - compensation: per regulations
        priority: high

      - id: BR-CAN-W003
        name: Error Fare Handling
        description: |
          Policy for mistakenly published fares.
        definition:
          - significantly_below_market: > 50% lower
          - obvious_error: technical glitch
        options:
          - honor_fare: customer-friendly approach
          - cancel_and_refund: with notification
          - offer_alternative: discounted but corrected
        communication:
          - notify_within: 24 hours of discovery
          - clear_explanation: required
        priority: medium

cancellation_protection:
  - id: CP-001
    name: Cancel For Any Reason
    description: |
      Optional protection allowing cancellation for any reason.
    coverage:
      - refund_percentage: 75-80%
      - deadline: up to 48 hours before
      - no_documentation: required
    pricing:
      - percentage_of_booking: 8-12%
      - minimum_premium: VND 200,000
    exclusions:
      - already_cancelled_flights
      - group_bookings

  - id: CP-002
    name: Standard Trip Protection
    description: |
      Coverage for specific covered reasons.
    covered_reasons:
      - illness_or_injury
      - death_in_family
      - weather_events
      - job_loss
      - jury_duty
    refund: 100% of covered expenses
    pricing:
      - percentage_of_booking: 5-8%

consumer_rights:
  - region: EU
    regulations:
      - EU261: flight delay/cancellation compensation
      - Package_Travel_Directive: package protection
    requirements:
      - clear_cancellation_policy: pre-booking
      - right_to_refund: within 14 days

  - region: Vietnam
    regulations:
      - Consumer_Protection_Law
      - Civil_Aviation_Law
    requirements:
      - cancellation_disclosure: in Vietnamese
      - refund_timeline: as advertised

error_handling:
  - error: refund_processing_failed
    action: retry_and_escalate
    message: "Refund processing delayed. We're working on it."

  - error: supplier_refund_denied
    action: review_and_advocate
    message: "We're reviewing your refund request with the supplier."

audit_requirements:
  - log_all_cancellation_requests
  - log_waiver_decisions
  - track_refund_timelines
  - monitor_cancellation_rates
  - retain_records_7_years
