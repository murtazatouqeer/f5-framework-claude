name: admin-use-cases
display_name: Administrator Use Cases
display_name_vi: Ca sử dụng của Quản trị viên
version: "1.0"
domain: travel-hospitality
subdomain: booking

description: |
  Use cases for platform administrators who manage
  the booking system, suppliers, pricing, and operations.

actor:
  name: Administrator
  type: primary
  description: |
    Internal user with administrative access to manage
    the booking platform, suppliers, agents, and operations.
  roles:
    - system_admin: full_platform_access
    - product_manager: supplier_content_management
    - finance_admin: payments_refunds_reconciliation
    - operations_manager: booking_operations
    - support_supervisor: customer_service_escalations

use_cases:
  # ===== SUPPLIER MANAGEMENT =====
  - id: UC-ADM-001
    name: Manage Supplier Connection
    display_name_vi: Quản lý kết nối nhà cung cấp
    category: supplier
    description: |
      Admin configures and manages API connections
      to flight, hotel, and activity suppliers.
    preconditions:
      - admin_logged_in
      - supplier_access_granted
    trigger: supplier_setup_or_update
    main_flow:
      1: Access supplier management
      2: Add/edit supplier configuration:
          - API credentials
          - Endpoint URLs
          - Rate limits
          - Timeout settings
      3: Configure mapping rules
      4: Test connection
      5: Enable/disable supplier
      6: Set priority order
    supplier_types:
      - GDS: Amadeus, Sabre, Travelport
      - direct_airlines
      - hotel_aggregators: Hotelbeds, WebBeds
      - direct_hotels
      - activity_providers
    monitoring:
      - connection_status
      - response_times
      - error_rates
    postconditions:
      - supplier_configured
      - connection_tested

  - id: UC-ADM-002
    name: Configure Hotel Contract
    display_name_vi: Cấu hình hợp đồng khách sạn
    category: supplier
    description: |
      Admin sets up contracted hotel rates and
      allotments from direct relationships.
    preconditions:
      - hotel_contract_signed
    trigger: contract_setup
    main_flow:
      1: Create hotel profile
      2: Upload room inventory
      3: Configure rate plans:
          - Net rates
          - Validity periods
          - Allotments
          - Stop sales
          - Minimum stays
      4: Set cancellation policies
      5: Configure blackout dates
      6: Enable for sale
    contract_elements:
      - static_rates
      - dynamic_rates
      - free_sale_allotment
      - on_request
    postconditions:
      - contract_loaded
      - rates_available

  - id: UC-ADM-003
    name: Manage Airline Content
    display_name_vi: Quản lý nội dung hãng bay
    category: supplier
    description: |
      Admin manages airline content including
      fare rules, baggage, and ancillaries.
    preconditions:
      - airline_data_access
    trigger: content_update_needed
    main_flow:
      1: Access airline content manager
      2: Update fare rule displays
      3: Configure baggage allowances
      4: Set up ancillary products
      5: Map fare families
      6: Configure EMD products
    content_types:
      - fare_rules
      - baggage_policies
      - seat_maps
      - ancillary_catalog
      - fare_brand_mapping
    postconditions:
      - content_updated
      - display_configured

  # ===== PRICING MANAGEMENT =====
  - id: UC-ADM-010
    name: Configure Markup Rules
    display_name_vi: Cấu hình quy tắc phí
    category: pricing
    description: |
      Admin configures markup and service fee
      rules for different products and channels.
    preconditions:
      - pricing_admin_access
    trigger: markup_configuration
    main_flow:
      1: Access pricing rules manager
      2: Create/edit markup rule:
          - Product type
          - Supplier
          - Route/destination
          - Date range
          - Customer segment
      3: Set markup type (fixed/percentage)
      4: Set markup amount
      5: Configure service fees
      6: Set priority/order
      7: Activate rule
    rule_hierarchy:
      - specific_supplier_route: highest
      - supplier_level
      - product_level
      - default: lowest
    postconditions:
      - markup_rules_active
      - pricing_calculated_correctly

  - id: UC-ADM-011
    name: Manage Promotions
    display_name_vi: Quản lý khuyến mãi
    category: pricing
    description: |
      Admin creates and manages promotional
      campaigns and discount codes.
    preconditions:
      - marketing_access
    trigger: promotion_creation
    main_flow:
      1: Access promotion manager
      2: Create promotion:
          - Name and description
          - Discount type (percentage/fixed)
          - Discount value
          - Eligibility rules
          - Usage limits
          - Validity period
      3: Generate promo codes
      4: Set distribution channel
      5: Activate promotion
      6: Monitor usage
    promotion_types:
      - public_promo_code
      - private_promo_code
      - automatic_discount
      - flash_sale
      - loyalty_reward
    controls:
      - budget_cap
      - usage_limit
      - per_customer_limit
      - stackable_rules
    postconditions:
      - promotion_active
      - codes_generated

  - id: UC-ADM-012
    name: Configure Dynamic Pricing
    display_name_vi: Cấu hình giá động
    category: pricing
    description: |
      Admin configures dynamic pricing rules
      based on demand and inventory.
    preconditions:
      - pricing_admin_access
    trigger: dynamic_pricing_setup
    main_flow:
      1: Access dynamic pricing engine
      2: Configure pricing factors:
          - Demand signals
          - Inventory levels
          - Time to departure
          - Competitive positioning
      3: Set adjustment ranges
      4: Define constraints
      5: Enable for products
      6: Monitor adjustments
    pricing_factors:
      - search_volume_weight
      - booking_velocity_weight
      - inventory_threshold
      - advance_purchase_curve
    guardrails:
      - max_increase_percentage
      - max_decrease_percentage
      - price_floor
      - price_ceiling
    postconditions:
      - dynamic_pricing_configured

  # ===== AGENT MANAGEMENT =====
  - id: UC-ADM-020
    name: Manage Agency Account
    display_name_vi: Quản lý tài khoản đại lý
    category: agent
    description: |
      Admin manages B2B agency accounts including
      onboarding, credit, and commissions.
    preconditions:
      - b2b_admin_access
    trigger: agency_management
    main_flow:
      1: Access agency management
      2: Create/edit agency:
          - Business details
          - Contact information
          - Credentials
      3: Set credit terms:
          - Credit limit
          - Payment terms
          - Deposit requirements
      4: Configure commission rates
      5: Set product access
      6: Activate account
    agency_settings:
      - credit_limit
      - commission_structure
      - markup_permissions
      - product_access
      - API_access
    postconditions:
      - agency_configured

  - id: UC-ADM-021
    name: Configure Commission Structure
    display_name_vi: Cấu hình cơ cấu hoa hồng
    category: agent
    description: |
      Admin sets up commission rates and
      incentive structures for agents.
    preconditions:
      - commission_admin_access
    trigger: commission_setup
    main_flow:
      1: Access commission manager
      2: Create commission rule:
          - Product type
          - Supplier
          - Route/region
          - Volume tier
      3: Set commission rate
      4: Configure overrides
      5: Set incentive bonuses
      6: Activate structure
    commission_types:
      - base_commission
      - volume_bonus
      - growth_incentive
      - segment_bonus
      - override_commission
    postconditions:
      - commission_structure_active

  # ===== OPERATIONS =====
  - id: UC-ADM-030
    name: Monitor Booking Operations
    display_name_vi: Giám sát vận hành đặt chỗ
    category: operations
    description: |
      Admin monitors real-time booking operations
      and system health.
    preconditions:
      - operations_access
    trigger: operations_monitoring
    main_flow:
      1: Access operations dashboard
      2: Monitor:
          - Booking volume
          - Success rates
          - Error rates
          - Response times
      3: View alerts
      4: Investigate issues
      5: Take corrective action
    dashboards:
      - real_time_bookings
      - supplier_performance
      - payment_processing
      - error_monitoring
      - queue_status
    alerts:
      - supplier_down
      - high_error_rate
      - payment_failures
      - queue_backlog
    postconditions:
      - operations_monitored
      - issues_addressed

  - id: UC-ADM-031
    name: Handle Booking Escalation
    display_name_vi: Xử lý đặt chỗ leo thang
    category: operations
    description: |
      Admin handles escalated booking issues
      that require special intervention.
    preconditions:
      - escalation_received
    trigger: escalation_assigned
    main_flow:
      1: Review escalation details
      2: Investigate issue:
          - Review booking history
          - Check supplier status
          - Verify payments
      3: Contact supplier if needed
      4: Determine resolution
      5: Execute resolution:
          - Manual booking fix
          - Refund processing
          - Compensation
      6: Document resolution
      7: Notify customer/agent
    escalation_types:
      - failed_booking
      - supplier_dispute
      - refund_dispute
      - overbooking
      - VIP_request
    postconditions:
      - escalation_resolved
      - customer_notified

  - id: UC-ADM-032
    name: Process Manual Booking
    display_name_vi: Xử lý đặt chỗ thủ công
    category: operations
    description: |
      Admin creates or modifies booking manually
      when automated systems fail.
    preconditions:
      - manual_booking_justified
    trigger: manual_intervention_needed
    main_flow:
      1: Access booking directly
      2: Create/modify booking:
          - Enter details manually
          - Override validations if needed
      3: Process payment manually
      4: Confirm with supplier
      5: Generate documents
      6: Update systems
      7: Document actions
    scenarios:
      - system_failure_recovery
      - supplier_system_down
      - special_customer_request
      - correction_of_errors
    audit:
      - full_audit_trail
      - supervisor_notification
    postconditions:
      - booking_completed
      - audit_recorded

  # ===== FINANCE =====
  - id: UC-ADM-040
    name: Process Refund
    display_name_vi: Xử lý hoàn tiền
    category: finance
    description: |
      Finance admin processes refund requests
      including manual and escalated cases.
    preconditions:
      - finance_access
      - refund_request_pending
    trigger: refund_processing
    main_flow:
      1: Access refund queue
      2: Review refund request
      3: Verify entitlement
      4: Calculate refund amount
      5: Approve/reject/modify
      6: Process refund
      7: Update records
      8: Notify customer
    refund_queue:
      - automated_pending
      - manual_required
      - disputed
      - supplier_pending
    postconditions:
      - refund_processed
      - customer_notified

  - id: UC-ADM-041
    name: Reconcile Payments
    display_name_vi: Đối soát thanh toán
    category: finance
    description: |
      Finance admin reconciles payments between
      platform, suppliers, and agents.
    preconditions:
      - finance_access
      - reconciliation_period_complete
    trigger: reconciliation_cycle
    main_flow:
      1: Access reconciliation module
      2: Import supplier statements
      3: Match transactions
      4: Identify discrepancies
      5: Investigate mismatches
      6: Resolve discrepancies
      7: Generate reconciliation report
      8: Process settlements
    reconciliation_types:
      - supplier_settlement
      - agent_commission
      - refund_reconciliation
      - payment_gateway
    postconditions:
      - reconciliation_complete
      - settlements_processed

  - id: UC-ADM-042
    name: Manage Agency Credit
    display_name_vi: Quản lý tín dụng đại lý
    category: finance
    description: |
      Finance admin manages agency credit limits,
      payments, and collections.
    preconditions:
      - credit_management_access
    trigger: credit_management
    main_flow:
      1: Access credit management
      2: Review credit requests
      3: Approve/adjust limits
      4: Monitor credit usage
      5: Process payments
      6: Manage overdue accounts
      7: Generate statements
    credit_actions:
      - increase_limit
      - decrease_limit
      - suspend_account
      - reinstate_account
      - write_off_debt
    postconditions:
      - credit_managed
      - accounts_current

  # ===== CONTENT MANAGEMENT =====
  - id: UC-ADM-050
    name: Manage Destination Content
    display_name_vi: Quản lý nội dung điểm đến
    category: content
    description: |
      Admin manages destination and property
      content for display to customers.
    preconditions:
      - content_admin_access
    trigger: content_management
    main_flow:
      1: Access content manager
      2: Edit destination info:
          - Description
          - Images
          - Points of interest
          - Travel advisories
      3: Edit hotel content:
          - Descriptions
          - Amenities
          - Images
          - Room descriptions
      4: Manage translations
      5: Publish content
    content_sources:
      - supplier_provided
      - curated_editorial
      - user_generated: reviews
    quality_control:
      - image_standards
      - description_guidelines
      - translation_review
    postconditions:
      - content_updated
      - published_live

  - id: UC-ADM-051
    name: Manage Email Templates
    display_name_vi: Quản lý mẫu email
    category: content
    description: |
      Admin manages email and notification
      templates for customer communication.
    preconditions:
      - template_admin_access
    trigger: template_management
    main_flow:
      1: Access template manager
      2: Edit template:
          - Subject line
          - Body content
          - Dynamic fields
          - Design/layout
      3: Preview template
      4: Test send
      5: Manage translations
      6: Publish template
    template_types:
      - booking_confirmation
      - payment_receipt
      - cancellation_confirmation
      - reminder_emails
      - marketing_emails
    postconditions:
      - template_updated
      - deployed_to_production

  # ===== REPORTING & ANALYTICS =====
  - id: UC-ADM-060
    name: Generate Reports
    display_name_vi: Tạo báo cáo
    category: reporting
    description: |
      Admin generates operational and financial
      reports for management review.
    preconditions:
      - reporting_access
    trigger: report_request
    main_flow:
      1: Access reporting module
      2: Select report type
      3: Configure parameters
      4: Generate report
      5: Review output
      6: Export/distribute
    report_categories:
      sales_reports:
        - daily_sales_summary
        - booking_volume
        - revenue_report
        - product_mix
      operational_reports:
        - supplier_performance
        - error_analysis
        - queue_statistics
        - SLA_compliance
      financial_reports:
        - commission_report
        - refund_report
        - settlement_report
        - aging_report
      agent_reports:
        - agent_performance
        - credit_utilization
        - agency_sales
    scheduling:
      - on_demand
      - scheduled_daily
      - scheduled_weekly
      - scheduled_monthly
    postconditions:
      - report_generated
      - distributed_to_stakeholders

  - id: UC-ADM-061
    name: Analyze Performance
    display_name_vi: Phân tích hiệu suất
    category: reporting
    description: |
      Admin analyzes platform performance metrics
      and business KPIs.
    preconditions:
      - analytics_access
    trigger: performance_analysis
    main_flow:
      1: Access analytics dashboard
      2: Select metrics/KPIs
      3: Set analysis period
      4: Review visualizations
      5: Drill down into data
      6: Identify trends
      7: Export findings
    kpis:
      business:
        - gross_booking_value
        - net_revenue
        - conversion_rate
        - average_booking_value
      operational:
        - booking_success_rate
        - search_response_time
        - ticketing_compliance
        - customer_satisfaction
      financial:
        - gross_margin
        - commission_earned
        - refund_rate
    postconditions:
      - insights_generated

  # ===== SYSTEM ADMINISTRATION =====
  - id: UC-ADM-070
    name: Manage User Access
    display_name_vi: Quản lý quyền truy cập
    category: system
    description: |
      System admin manages internal user accounts
      and access permissions.
    preconditions:
      - system_admin_access
    trigger: user_management
    main_flow:
      1: Access user management
      2: Create/edit user
      3: Assign roles
      4: Set permissions
      5: Configure MFA
      6: Activate/deactivate
    role_based_access:
      - super_admin
      - finance_admin
      - operations_admin
      - product_admin
      - support_agent
      - read_only
    security:
      - MFA_required
      - password_policy
      - session_timeout
      - audit_logging
    postconditions:
      - user_access_configured

  - id: UC-ADM-071
    name: Configure System Settings
    display_name_vi: Cấu hình hệ thống
    category: system
    description: |
      Admin configures global system settings
      and platform behavior.
    preconditions:
      - system_admin_access
    trigger: configuration_change
    main_flow:
      1: Access system configuration
      2: Modify settings:
          - Business rules
          - Validation rules
          - Timeout settings
          - Feature flags
      3: Test in staging
      4: Deploy to production
      5: Monitor impact
    configuration_areas:
      - booking_settings
      - payment_settings
      - notification_settings
      - integration_settings
      - feature_toggles
    change_management:
      - approval_required
      - audit_trail
      - rollback_capability
    postconditions:
      - configuration_updated
      - system_behavior_changed

metrics:
  - name: escalation_resolution_time
    description: Average time to resolve escalations

  - name: manual_booking_rate
    description: Percentage requiring manual intervention

  - name: reconciliation_accuracy
    description: Percentage of transactions matched automatically

  - name: system_uptime
    description: Platform availability percentage

  - name: fraud_detection_rate
    description: Fraudulent transactions caught
