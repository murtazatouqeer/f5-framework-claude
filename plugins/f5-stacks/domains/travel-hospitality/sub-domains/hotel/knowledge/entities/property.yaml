name: property
display_name: Property
display_name_vi: Cơ sở lưu trú
version: "1.0"
domain: travel-hospitality
subdomain: hotel

description: |
  Hotel property entity representing a physical hotel location
  with its facilities, configuration, and operational settings.

description_vi: |
  Thực thể cơ sở lưu trú đại diện cho một địa điểm khách sạn vật lý
  với các tiện nghi, cấu hình và thiết lập vận hành.

attributes:
  identity:
    - name: property_id
      type: string
      format: "PROP-{chain_code}-{sequence}"
      required: true
      description: Unique property identifier

    - name: property_code
      type: string
      max_length: 10
      required: true
      description: Short code for property (used in PMS)

    - name: chain_id
      type: string
      description: Parent hotel chain identifier

    - name: brand_id
      type: string
      description: Brand within chain

  basic_info:
    - name: name
      type: string
      max_length: 200
      required: true
      description: Official property name

    - name: legal_name
      type: string
      max_length: 300
      description: Legal entity name

    - name: star_rating
      type: integer
      min: 1
      max: 5
      description: Official star classification

    - name: property_type
      type: enum
      values:
        - hotel
        - resort
        - boutique
        - hostel
        - apartment
        - villa
        - motel
        - bed_and_breakfast
      required: true

    - name: category
      type: enum
      values:
        - luxury
        - upscale
        - midscale
        - economy
        - budget

  location:
    - name: address
      type: object
      properties:
        street: string
        city: string
        state_province: string
        postal_code: string
        country_code: string (ISO 3166-1 alpha-2)
      required: true

    - name: coordinates
      type: object
      properties:
        latitude: decimal
        longitude: decimal

    - name: timezone
      type: string
      format: IANA timezone
      required: true

    - name: location_type
      type: enum
      values:
        - city_center
        - airport
        - beach
        - mountain
        - suburban
        - highway

  contact:
    - name: phone
      type: string
      format: E.164

    - name: fax
      type: string
      format: E.164

    - name: email
      type: string
      format: email

    - name: website
      type: string
      format: url

    - name: reservation_phone
      type: string
      format: E.164

  configuration:
    - name: total_rooms
      type: integer
      min: 1
      required: true

    - name: total_floors
      type: integer
      min: 1

    - name: check_in_time
      type: time
      default: "14:00"

    - name: check_out_time
      type: time
      default: "12:00"

    - name: currency_code
      type: string
      format: ISO 4217
      required: true

    - name: tax_rate
      type: decimal
      description: Default tax rate percentage

    - name: service_charge_rate
      type: decimal
      description: Service charge percentage

  facilities:
    - name: amenities
      type: array
      items:
        type: enum
        values:
          - wifi
          - parking
          - pool
          - spa
          - gym
          - restaurant
          - bar
          - room_service
          - concierge
          - business_center
          - meeting_rooms
          - laundry
          - airport_shuttle
          - beach_access
          - kids_club
          - pet_friendly

    - name: accessibility_features
      type: array
      items:
        type: enum
        values:
          - wheelchair_accessible
          - elevator
          - accessible_parking
          - accessible_bathroom
          - hearing_loop
          - braille_signage

  policies:
    - name: cancellation_policy
      type: object
      properties:
        default_hours_before: integer
        penalty_type: enum [percentage, nights, fixed]
        penalty_amount: decimal

    - name: deposit_policy
      type: object
      properties:
        required: boolean
        type: enum [percentage, nights, fixed]
        amount: decimal

    - name: guarantee_policy
      type: object
      properties:
        credit_card_required: boolean
        accepted_cards: array

    - name: pet_policy
      type: object
      properties:
        allowed: boolean
        fee: decimal
        restrictions: string

    - name: child_policy
      type: object
      properties:
        max_child_age: integer
        extra_bed_available: boolean
        extra_bed_fee: decimal

  operational:
    - name: pms_system
      type: string
      description: Property Management System name

    - name: channel_manager
      type: string
      description: Channel manager integration

    - name: revenue_management_system
      type: string
      description: RMS integration

    - name: is_active
      type: boolean
      default: true

    - name: opening_date
      type: date
      description: Property opening date

    - name: last_renovation_date
      type: date

  audit:
    - name: created_at
      type: timestamp
      auto: true

    - name: updated_at
      type: timestamp
      auto: true

    - name: created_by
      type: string

    - name: updated_by
      type: string

relationships:
  - entity: room
    type: one_to_many
    description: Property has many rooms

  - entity: room_type
    type: one_to_many
    description: Property defines room types

  - entity: rate_plan
    type: one_to_many
    description: Property has rate plans

  - entity: reservation
    type: one_to_many
    description: Property receives reservations

  - entity: channel
    type: many_to_many
    description: Property distributed through channels

  - entity: inventory
    type: one_to_many
    description: Property tracks inventory by date

indexes:
  - fields: [property_code]
    unique: true
  - fields: [chain_id, brand_id]
  - fields: [location.city, property_type]
  - fields: [star_rating, category]

business_rules:
  - rule: BR-PROP-001
    description: Property code must be unique within chain
  - rule: BR-PROP-002
    description: Total rooms must match sum of room inventory
  - rule: BR-PROP-003
    description: Check-out time must be before check-in time (same day)

htng_mapping:
  standard: HTNG Property Message
  elements:
    - HotelCode → property_code
    - HotelName → name
    - StarRating → star_rating
    - Position → coordinates
