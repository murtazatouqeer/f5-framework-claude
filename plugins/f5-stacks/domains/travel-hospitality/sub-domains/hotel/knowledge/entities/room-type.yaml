name: room-type
display_name: Room Type
display_name_vi: Loại phòng
version: "1.0"
domain: travel-hospitality
subdomain: hotel

description: |
  Room type classification defining room category, standard amenities,
  base pricing, and inventory configuration for the property.

description_vi: |
  Phân loại loại phòng định nghĩa danh mục phòng, tiện nghi tiêu chuẩn,
  giá cơ sở và cấu hình tồn kho cho cơ sở lưu trú.

attributes:
  identity:
    - name: room_type_id
      type: string
      format: "RT-{property_code}-{type_code}"
      required: true
      description: Unique room type identifier

    - name: property_id
      type: string
      required: true
      description: Parent property reference

    - name: type_code
      type: string
      max_length: 10
      required: true
      description: Short code (e.g., STD, DLX, STE)

  naming:
    - name: name
      type: string
      max_length: 100
      required: true
      description: Room type name (e.g., Deluxe Ocean View)

    - name: name_vi
      type: string
      max_length: 100
      description: Vietnamese name

    - name: short_name
      type: string
      max_length: 50
      description: Abbreviated name for displays

    - name: description
      type: text
      required: true
      description: Marketing description

    - name: description_vi
      type: text
      description: Vietnamese description

  classification:
    - name: category
      type: enum
      values:
        - standard
        - superior
        - deluxe
        - premium
        - suite
        - villa
        - apartment
        - penthouse
      required: true

    - name: class
      type: enum
      values:
        - economy
        - standard
        - moderate
        - upscale
        - luxury

    - name: sort_order
      type: integer
      description: Display ordering

  physical_specs:
    - name: min_square_meters
      type: decimal
      description: Minimum room size

    - name: max_square_meters
      type: decimal
      description: Maximum room size

    - name: default_bed_configuration
      type: array
      items:
        type: object
        properties:
          bed_type: enum [king, queen, double, twin, single]
          quantity: integer
      required: true

    - name: alternative_bed_configurations
      type: array
      items:
        type: object
        properties:
          name: string
          beds: array

  occupancy:
    - name: base_occupancy
      type: integer
      required: true
      description: Standard included occupancy

    - name: max_occupancy
      type: integer
      required: true
      description: Maximum allowed occupancy

    - name: max_adults
      type: integer
      required: true

    - name: max_children
      type: integer
      default: 0

    - name: extra_bed_allowed
      type: boolean
      default: false

    - name: max_extra_beds
      type: integer
      default: 0

    - name: infant_age_max
      type: integer
      default: 2

    - name: child_age_max
      type: integer
      default: 12

  amenities:
    - name: standard_amenities
      type: array
      items:
        type: enum
        values:
          - air_conditioning
          - heating
          - wifi
          - tv
          - minibar
          - safe
          - coffee_maker
          - kettle
          - iron
          - hairdryer
          - bathrobe
          - slippers
          - toiletries
          - desk
          - sitting_area
          - balcony

    - name: bathroom_type
      type: enum
      values:
        - private_bathroom
        - shared_bathroom
        - ensuite

    - name: bathroom_amenities
      type: array
      items:
        type: enum
        values:
          - bathtub
          - shower
          - jacuzzi
          - bidet
          - dual_sink

    - name: view_types
      type: array
      items:
        type: enum
        values:
          - ocean_view
          - garden_view
          - city_view
          - pool_view
          - mountain_view
          - no_view

  pricing:
    - name: rack_rate
      type: decimal
      required: true
      description: Published rate (BAR)

    - name: min_rate
      type: decimal
      description: Floor rate

    - name: extra_adult_rate
      type: decimal
      default: 0
      description: Charge per extra adult

    - name: extra_child_rate
      type: decimal
      default: 0
      description: Charge per extra child

    - name: extra_bed_rate
      type: decimal
      default: 0
      description: Extra bed charge

  inventory:
    - name: total_rooms
      type: integer
      required: true
      description: Total rooms of this type

    - name: sellable_rooms
      type: integer
      description: Rooms available for sale

    - name: complimentary_rooms
      type: integer
      default: 0
      description: Rooms reserved for comp

    - name: house_use_rooms
      type: integer
      default: 0
      description: Rooms for internal use

  channel_mapping:
    - name: ota_codes
      type: array
      items:
        type: object
        properties:
          channel: string
          channel_room_code: string
          channel_room_name: string
      description: OTA room type mappings

    - name: gds_codes
      type: object
      properties:
        amadeus: string
        sabre: string
        galileo: string
        worldspan: string

  media:
    - name: images
      type: array
      items:
        type: object
        properties:
          url: string
          type: enum [main, bedroom, bathroom, view, amenity]
          caption: string
          sort_order: integer

    - name: virtual_tour_url
      type: string
      format: url

    - name: floor_plan_url
      type: string
      format: url

  policies:
    - name: smoking_allowed
      type: boolean
      default: false

    - name: pets_allowed
      type: boolean
      default: false

    - name: accessible_rooms_count
      type: integer
      default: 0

  operational:
    - name: is_active
      type: boolean
      default: true

    - name: sell_online
      type: boolean
      default: true

    - name: sell_at_desk
      type: boolean
      default: true

  audit:
    - name: created_at
      type: timestamp
      auto: true

    - name: updated_at
      type: timestamp
      auto: true

    - name: created_by
      type: string

    - name: updated_by
      type: string

relationships:
  - entity: property
    type: many_to_one
    required: true
    description: Room type belongs to property

  - entity: room
    type: one_to_many
    description: Room type has many rooms

  - entity: rate_plan
    type: many_to_many
    description: Room type available in rate plans

  - entity: inventory
    type: one_to_many
    description: Room type has daily inventory

  - entity: reservation
    type: one_to_many
    description: Room type booked in reservations

indexes:
  - fields: [property_id, type_code]
    unique: true
  - fields: [property_id, category]
  - fields: [property_id, is_active, sell_online]

business_rules:
  - rule: BR-RT-001
    description: Type code must be unique within property
  - rule: BR-RT-002
    description: Max occupancy must be >= base occupancy
  - rule: BR-RT-003
    description: Total rooms must match actual room count
  - rule: BR-RT-004
    description: Rack rate must be >= min rate

htng_mapping:
  standard: HTNG Room Type Message
  elements:
    - RoomTypeCode → type_code
    - RoomTypeName → name
    - MaxOccupancy → max_occupancy
    - RackRate → rack_rate
