name: Traveler Use Cases
display_name: Traveler Use Cases / Ca sử dụng du khách
description: |
  Use cases for travelers using the tour booking platform including
  searching, booking, managing reservations, and post-tour interactions.

domain: travel-hospitality
subdomain: tour
actor: Traveler
version: "1.0"

use_cases:
  # ============================================
  # SEARCH & DISCOVERY
  # ============================================
  - id: UC-TRV-001
    name: Search Tours
    name_vi: Tìm kiếm tour
    description: Traveler searches for available tours
    actor: Traveler/Guest
    preconditions:
      - Platform is accessible
    main_flow:
      1: Traveler enters destination or keyword
      2: Traveler selects travel dates
      3: Traveler specifies number of travelers
      4: System returns matching tours
      5: Traveler views search results
    alternative_flows:
      - id: 1a
        condition: Browse by category
        steps:
          1: Traveler selects category (adventure, food, cultural)
          2: System displays tours in category
          3: Traveler applies additional filters
      - id: 2a
        condition: Flexible dates
        steps:
          1: Traveler selects "flexible dates"
          2: System shows availability calendar
          3: Traveler picks preferred dates
    postconditions:
      - Search results displayed
      - Search logged for analytics
    business_rules: []
    related_entities: [Tour, TourAvailability]

  - id: UC-TRV-002
    name: Filter and Sort Tours
    name_vi: Lọc và sắp xếp tour
    description: Traveler refines search results using filters
    actor: Traveler/Guest
    preconditions:
      - Search results displayed
    main_flow:
      1: Traveler views filter options
      2: Traveler applies price range filter
      3: Traveler selects tour type filter
      4: Traveler applies duration filter
      5: System updates results instantly
      6: Traveler sorts by price/rating/popularity
    alternative_flows:
      - id: 2a
        condition: Language filter
        steps:
          1: Traveler selects language preference
          2: System filters tours offered in that language
      - id: 5a
        condition: No results after filtering
        steps:
          1: System suggests relaxing filters
          2: System shows similar alternatives
    postconditions:
      - Filtered results displayed
    related_entities: [Tour, Activity]

  - id: UC-TRV-003
    name: View Tour Details
    name_vi: Xem chi tiết tour
    description: Traveler views detailed information about a tour
    actor: Traveler/Guest
    preconditions:
      - Tour exists and is active
    main_flow:
      1: Traveler clicks on tour from search results
      2: System displays tour detail page
      3: Traveler views description and highlights
      4: Traveler views itinerary breakdown
      5: Traveler views photos and videos
      6: Traveler reads inclusions/exclusions
      7: Traveler checks availability calendar
    alternative_flows:
      - id: 5a
        condition: Virtual tour available
        steps:
          1: Traveler clicks "Virtual Preview"
          2: System displays 360° view or video tour
      - id: 7a
        condition: Tour not available on selected date
        steps:
          1: System shows alternative dates
          2: System offers waitlist option
    postconditions:
      - Tour view recorded for analytics
    related_entities: [Tour, TourSchedule, Itinerary]

  - id: UC-TRV-004
    name: Read Reviews
    name_vi: Đọc đánh giá
    description: Traveler reads customer reviews for a tour
    actor: Traveler/Guest
    preconditions:
      - Tour has reviews
    main_flow:
      1: Traveler navigates to reviews section
      2: System displays overall rating summary
      3: Traveler views rating distribution
      4: Traveler reads individual reviews
      5: Traveler filters reviews (recent, helpful, with photos)
      6: Traveler views guide-specific ratings
    alternative_flows:
      - id: 5a
        condition: Search within reviews
        steps:
          1: Traveler enters search term
          2: System highlights matching reviews
    postconditions:
      - Reviews displayed
    related_entities: [TourReview, Guide]

  - id: UC-TRV-005
    name: Compare Tours
    name_vi: So sánh tour
    description: Traveler compares multiple tours side by side
    actor: Traveler/Guest
    preconditions:
      - At least 2 tours selected for comparison
    main_flow:
      1: Traveler adds tours to comparison
      2: Traveler opens comparison view
      3: System displays side-by-side comparison
      4: Traveler views price, duration, ratings
      5: Traveler views inclusions comparison
      6: Traveler selects preferred tour
    postconditions:
      - Comparison viewed
    related_entities: [Tour]

  # ============================================
  # BOOKING PROCESS
  # ============================================
  - id: UC-TRV-010
    name: Check Availability
    name_vi: Kiểm tra tình trạng
    description: Traveler checks real-time availability for a tour
    actor: Traveler/Guest
    preconditions:
      - Tour is active
    main_flow:
      1: Traveler selects tour
      2: Traveler chooses date
      3: System checks real-time availability
      4: System displays available time slots
      5: System shows remaining spots
    alternative_flows:
      - id: 4a
        condition: No availability
        steps:
          1: System shows next available dates
          2: System offers notification when available
    postconditions:
      - Availability displayed
    business_rules: [BR-CAP-010]
    related_entities: [TourAvailability, TourSchedule]

  - id: UC-TRV-011
    name: Select Tour Options
    name_vi: Chọn tùy chọn tour
    description: Traveler configures booking options
    actor: Traveler
    preconditions:
      - Tour selected
      - Date and time selected
      - Spots available
    main_flow:
      1: Traveler selects number of adults
      2: Traveler selects number of children
      3: Traveler selects language preference
      4: Traveler views available pickup points
      5: Traveler selects pickup location
      6: Traveler views available add-ons
      7: Traveler selects add-ons (optional)
      8: System calculates total price
    alternative_flows:
      - id: 5a
        condition: Hotel pickup requested
        steps:
          1: Traveler enters hotel name
          2: System verifies hotel is in pickup zone
          3: System adds pickup fee if applicable
      - id: 7a
        condition: Private tour option
        steps:
          1: Traveler selects private tour
          2: System recalculates pricing
    postconditions:
      - Booking configuration complete
      - Price calculated
    business_rules: [BR-BKG-002, BR-BKG-003, BR-PRC-010]
    related_entities: [Tour, PickupPoint, TourPackage]

  - id: UC-TRV-012
    name: Add Participant Details
    name_vi: Thêm thông tin người tham gia
    description: Traveler enters details for all participants
    actor: Traveler
    preconditions:
      - Number of participants specified
    main_flow:
      1: Traveler enters lead participant details
      2: Traveler enters additional participant names
      3: Traveler adds special requirements
      4: Traveler adds dietary requirements (if applicable)
      5: System validates participant information
    alternative_flows:
      - id: 3a
        condition: Participant has restrictions
        steps:
          1: Traveler indicates health condition
          2: System checks tour restrictions
          3: System alerts if participant may not be eligible
      - id: 4a
        condition: Activity requires waiver
        steps:
          1: System displays waiver requirement
          2: Traveler acknowledges waiver
    postconditions:
      - Participant details saved
    business_rules: [BR-BKG-004, BR-SAF-001, BR-SAF-002]
    related_entities: [Participant]

  - id: UC-TRV-013
    name: Apply Promo Code
    name_vi: Áp dụng mã khuyến mãi
    description: Traveler applies promotional discount
    actor: Traveler
    preconditions:
      - Booking in progress
      - Valid promo code
    main_flow:
      1: Traveler enters promo code
      2: System validates promo code
      3: System checks eligibility
      4: System applies discount
      5: System updates total price
    alternative_flows:
      - id: 2a
        condition: Invalid promo code
        steps:
          1: System displays error message
          2: System suggests checking code
      - id: 3a
        condition: Code not eligible
        steps:
          1: System displays eligibility requirements
          2: Code not applied
    postconditions:
      - Discount applied if valid
    business_rules: [BR-PRC-030, BR-PRC-031]
    related_entities: [TourVoucher]

  - id: UC-TRV-014
    name: Complete Booking
    name_vi: Hoàn tất đặt tour
    description: Traveler completes booking with payment
    actor: Traveler
    preconditions:
      - All booking details configured
      - Traveler logged in or guest checkout
    main_flow:
      1: Traveler reviews booking summary
      2: Traveler accepts terms and conditions
      3: Traveler selects payment method
      4: Traveler enters payment details
      5: System processes payment
      6: System confirms booking
      7: System generates voucher
      8: System sends confirmation email
    alternative_flows:
      - id: 5a
        condition: Payment fails
        steps:
          1: System displays error
          2: Traveler retries or changes payment method
      - id: 1a
        condition: Request-to-book tour
        steps:
          1: System creates booking request
          2: Operator reviews and approves
          3: Traveler completes payment after approval
    postconditions:
      - Booking confirmed
      - Payment processed
      - Voucher generated
      - Confirmation sent
    business_rules: [BR-BKG-010, BR-BKG-011]
    related_entities: [TourBooking, TourVoucher]
    related_workflows: [tour-booking-workflow]

  # ============================================
  # BOOKING MANAGEMENT
  # ============================================
  - id: UC-TRV-020
    name: View My Bookings
    name_vi: Xem đặt chỗ của tôi
    description: Traveler views list of their bookings
    actor: Traveler
    preconditions:
      - Traveler is logged in
      - Has at least one booking
    main_flow:
      1: Traveler navigates to "My Bookings"
      2: System displays booking list
      3: System shows upcoming and past bookings
      4: Traveler selects a booking
      5: System displays booking details
    postconditions:
      - Bookings displayed
    related_entities: [TourBooking]

  - id: UC-TRV-021
    name: Download Voucher
    name_vi: Tải voucher
    description: Traveler downloads tour voucher
    actor: Traveler
    preconditions:
      - Booking is confirmed and paid
    main_flow:
      1: Traveler navigates to booking details
      2: Traveler clicks "Download Voucher"
      3: System generates PDF voucher
      4: Traveler downloads voucher
    alternative_flows:
      - id: 4a
        condition: Mobile device
        steps:
          1: Traveler adds to mobile wallet
          2: System generates QR pass
    postconditions:
      - Voucher downloaded
    related_entities: [TourVoucher]

  - id: UC-TRV-022
    name: Request Date Change
    name_vi: Yêu cầu đổi ngày
    description: Traveler requests to change booking date
    actor: Traveler
    preconditions:
      - Booking is confirmed
      - Tour allows date changes
      - Requested date is available
    main_flow:
      1: Traveler opens booking details
      2: Traveler clicks "Change Date"
      3: System displays available dates
      4: Traveler selects new date
      5: System checks for price difference
      6: Traveler confirms change
      7: System updates booking
      8: System issues new voucher
    alternative_flows:
      - id: 5a
        condition: Price higher on new date
        steps:
          1: System displays price difference
          2: Traveler pays additional amount
      - id: 5b
        condition: Price lower on new date
        steps:
          1: System credits difference as voucher/refund
    postconditions:
      - Booking date updated
      - New voucher issued
    business_rules: [BR-CAN-030]
    related_entities: [TourBooking, TourSchedule]

  - id: UC-TRV-023
    name: Cancel Booking
    name_vi: Hủy đặt chỗ
    description: Traveler cancels a tour booking
    actor: Traveler
    preconditions:
      - Booking exists and is cancellable
    main_flow:
      1: Traveler opens booking details
      2: Traveler clicks "Cancel Booking"
      3: System displays cancellation policy
      4: System calculates refund amount
      5: Traveler confirms cancellation
      6: System processes cancellation
      7: System initiates refund
    postconditions:
      - Booking cancelled
      - Refund initiated
    business_rules: [BR-CAN-001 through BR-CAN-022]
    related_entities: [TourBooking]
    related_workflows: [cancellation-workflow]

  - id: UC-TRV-024
    name: Contact Operator
    name_vi: Liên hệ nhà điều hành
    description: Traveler contacts tour operator with questions
    actor: Traveler
    preconditions:
      - Tour or booking exists
    main_flow:
      1: Traveler clicks "Contact Operator"
      2: System displays message form
      3: Traveler enters message
      4: Traveler submits inquiry
      5: System notifies operator
      6: Operator responds via platform
    postconditions:
      - Message sent to operator
    related_entities: [Supplier]

  # ============================================
  # ON-TOUR EXPERIENCE
  # ============================================
  - id: UC-TRV-030
    name: Check In for Tour
    name_vi: Check-in tour
    description: Traveler checks in at meeting point
    actor: Traveler
    preconditions:
      - Tour day has arrived
      - At meeting point
    main_flow:
      1: Traveler arrives at meeting point
      2: Traveler opens voucher/app
      3: Guide scans QR code
      4: System marks traveler as checked in
      5: Guide verifies participant count
    alternative_flows:
      - id: 3a
        condition: Offline check-in
        steps:
          1: Traveler shows voucher number
          2: Guide manually checks in
    postconditions:
      - Traveler checked in
    related_entities: [TourBooking, TourVoucher]

  - id: UC-TRV-031
    name: View Tour Information On Day
    name_vi: Xem thông tin tour trong ngày
    description: Traveler accesses tour info during tour day
    actor: Traveler
    preconditions:
      - Tour day has arrived
    main_flow:
      1: Traveler opens booking in app
      2: System displays day-of information
      3: Traveler views meeting point map
      4: Traveler views guide contact info
      5: Traveler views itinerary timeline
    postconditions:
      - Information displayed
    related_entities: [TourBooking, Guide, Itinerary]

  - id: UC-TRV-032
    name: Report Issue During Tour
    name_vi: Báo cáo vấn đề trong tour
    description: Traveler reports an issue while on tour
    actor: Traveler
    preconditions:
      - Tour is in progress
    main_flow:
      1: Traveler opens emergency/issue reporting
      2: Traveler selects issue type
      3: Traveler describes issue
      4: System alerts operator immediately
      5: Operator responds to resolve
    issue_types:
      - safety_concern
      - guide_issue
      - itinerary_change
      - medical_emergency
    postconditions:
      - Issue reported
      - Operator notified
    related_entities: [TourBooking, Supplier]

  # ============================================
  # POST-TOUR
  # ============================================
  - id: UC-TRV-040
    name: Write Review
    name_vi: Viết đánh giá
    description: Traveler writes review after completing tour
    actor: Traveler
    preconditions:
      - Tour is completed
      - Traveler was participant
    main_flow:
      1: Traveler receives review request
      2: Traveler clicks review link
      3: Traveler rates overall experience
      4: Traveler rates individual aspects
      5: Traveler writes review text
      6: Traveler uploads photos (optional)
      7: Traveler submits review
    postconditions:
      - Review submitted for moderation
    business_rules: [BR-REV-010 through BR-REV-012]
    related_entities: [TourReview]
    related_workflows: [review-workflow]

  - id: UC-TRV-041
    name: Share Tour Experience
    name_vi: Chia sẻ trải nghiệm
    description: Traveler shares tour on social media
    actor: Traveler
    preconditions:
      - Tour completed
    main_flow:
      1: Traveler views completed booking
      2: Traveler clicks "Share"
      3: Traveler selects social platform
      4: System generates share content
      5: Traveler posts to social media
    postconditions:
      - Content shared
    related_entities: [TourBooking]

  - id: UC-TRV-042
    name: Request Refund
    name_vi: Yêu cầu hoàn tiền
    description: Traveler requests refund for issues
    actor: Traveler
    preconditions:
      - Tour completed or cancelled by operator
      - Within refund request period
    main_flow:
      1: Traveler navigates to booking
      2: Traveler clicks "Request Refund"
      3: Traveler selects refund reason
      4: Traveler provides details/evidence
      5: System creates refund request
      6: Operator reviews request
      7: Refund processed if approved
    refund_reasons:
      - tour_cancelled_by_operator
      - tour_significantly_different
      - safety_issue
      - medical_emergency
    postconditions:
      - Refund request submitted
    business_rules: [BR-CAN-040, BR-CAN-041]
    related_entities: [TourBooking]

  # ============================================
  # ACCOUNT MANAGEMENT
  # ============================================
  - id: UC-TRV-050
    name: Create Account
    name_vi: Tạo tài khoản
    description: Guest creates a traveler account
    actor: Guest
    preconditions:
      - Email not already registered
    main_flow:
      1: Guest clicks "Sign Up"
      2: Guest enters email and password
      3: Guest enters profile information
      4: System sends verification email
      5: Guest verifies email
      6: Account activated
    alternative_flows:
      - id: 2a
        condition: Social login
        steps:
          1: Guest selects social provider
          2: Guest authorizes access
          3: System creates account
    postconditions:
      - Account created
      - Welcome email sent
    related_entities: [Customer]

  - id: UC-TRV-051
    name: Save to Wishlist
    name_vi: Lưu vào danh sách yêu thích
    description: Traveler saves tours to wishlist
    actor: Traveler
    preconditions:
      - Traveler is logged in
    main_flow:
      1: Traveler views tour
      2: Traveler clicks "Save to Wishlist"
      3: System adds to wishlist
      4: System confirms action
    postconditions:
      - Tour saved to wishlist
    related_entities: [Tour]

  - id: UC-TRV-052
    name: Set Price Alert
    name_vi: Đặt cảnh báo giá
    description: Traveler sets alert for price drops
    actor: Traveler
    preconditions:
      - Traveler is logged in
    main_flow:
      1: Traveler views tour
      2: Traveler clicks "Price Alert"
      3: Traveler sets target price
      4: System creates alert
      5: System notifies when price drops
    postconditions:
      - Alert created
    related_entities: [Tour]

  - id: UC-TRV-053
    name: Manage Preferences
    name_vi: Quản lý tùy chọn
    description: Traveler manages travel preferences
    actor: Traveler
    preconditions:
      - Traveler is logged in
    main_flow:
      1: Traveler opens preferences
      2: Traveler sets language preference
      3: Traveler sets currency preference
      4: Traveler sets notification preferences
      5: Traveler saves preferences
    postconditions:
      - Preferences updated
    related_entities: [Customer]

non_functional_requirements:
  - Search results load < 2 seconds
  - Booking process completable in < 5 minutes
  - Mobile-responsive design (all use cases)
  - Offline voucher access capability
  - Multi-language support
  - Multi-currency support
