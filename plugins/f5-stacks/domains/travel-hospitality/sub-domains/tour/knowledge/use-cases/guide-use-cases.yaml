name: Guide Use Cases
display_name: Guide Use Cases / Ca sử dụng hướng dẫn viên
description: |
  Use cases for tour guides including managing assignments,
  conducting tours, tracking earnings, and managing profiles.

domain: travel-hospitality
subdomain: tour
actor: Guide
version: "1.0"

use_cases:
  # ============================================
  # ONBOARDING & PROFILE
  # ============================================
  - id: UC-GDE-001
    name: Register as Guide
    name_vi: Đăng ký làm hướng dẫn viên
    description: Person applies to become a tour guide
    actor: Prospective Guide
    preconditions:
      - Has required qualifications
      - Platform accepting new guides
    main_flow:
      1: Applicant visits guide registration page
      2: Applicant creates account
      3: Applicant uploads required documents
      4: Applicant completes profile
      5: Applicant submits application
      6: Platform reviews application
      7: Background check initiated
      8: Application approved/rejected
    required_documents:
      - government_id
      - guide_license
      - certifications
      - first_aid_certificate
      - profile_photo
    alternative_flows:
      - id: 8a
        condition: Additional info needed
        steps:
          1: Platform requests additional documents
          2: Applicant provides documents
          3: Review continues
    postconditions:
      - Guide account created (if approved)
      - Status set to pending_verification
    business_rules: [BR-SAF-050]
    related_entities: [Guide]

  - id: UC-GDE-002
    name: Manage Guide Profile
    name_vi: Quản lý hồ sơ hướng dẫn viên
    description: Guide updates their profile information
    actor: Guide
    preconditions:
      - Guide account is active
    main_flow:
      1: Guide navigates to profile settings
      2: Guide updates bio and specialties
      3: Guide updates languages spoken
      4: Guide uploads new photos
      5: Guide updates certifications
      6: System saves changes
    alternative_flows:
      - id: 5a
        condition: License renewal
        steps:
          1: Guide uploads new license
          2: Platform verifies validity
          3: License expiry updated
    postconditions:
      - Profile updated
    related_entities: [Guide]

  - id: UC-GDE-003
    name: Set Availability
    name_vi: Đặt lịch rảnh
    description: Guide sets their availability calendar
    actor: Guide
    preconditions:
      - Guide account is active
    main_flow:
      1: Guide opens availability calendar
      2: Guide marks available dates
      3: Guide sets time preferences
      4: Guide blocks unavailable dates
      5: System updates availability
    alternative_flows:
      - id: 2a
        condition: Recurring availability
        steps:
          1: Guide sets recurring pattern
          2: System applies to future dates
      - id: 4a
        condition: Has existing assignments
        steps:
          1: System warns about conflicts
          2: Guide confirms or adjusts
    postconditions:
      - Calendar updated
      - Availability visible to operators
    related_entities: [Guide, TourSchedule]

  - id: UC-GDE-004
    name: Update Tour Expertise
    name_vi: Cập nhật chuyên môn tour
    description: Guide updates their tour type expertise
    actor: Guide
    preconditions:
      - Guide account is active
    main_flow:
      1: Guide opens expertise settings
      2: Guide selects tour types they can lead
      3: Guide selects operating areas
      4: Guide indicates experience level per type
      5: System updates matching preferences
    tour_types:
      - walking_tour
      - food_tour
      - cultural_tour
      - adventure_tour
      - historical_tour
      - photography_tour
      - wildlife_tour
    postconditions:
      - Expertise profile updated
    related_entities: [Guide]

  # ============================================
  # ASSIGNMENT MANAGEMENT
  # ============================================
  - id: UC-GDE-010
    name: View Assignments
    name_vi: Xem phân công
    description: Guide views their tour assignments
    actor: Guide
    preconditions:
      - Guide account is active
    main_flow:
      1: Guide opens assignments dashboard
      2: System displays upcoming assignments
      3: Guide views assignment details
      4: Guide sees participant count
      5: Guide views tour itinerary
    postconditions:
      - Assignments displayed
    related_entities: [TourSchedule, TourBooking]
    related_workflows: [guide-assignment-workflow]

  - id: UC-GDE-011
    name: Accept Assignment
    name_vi: Chấp nhận phân công
    description: Guide accepts a tour assignment
    actor: Guide
    preconditions:
      - Assignment offered to guide
      - Guide is available
    main_flow:
      1: Guide receives assignment notification
      2: Guide reviews tour details
      3: Guide checks compensation
      4: Guide accepts assignment
      5: System confirms assignment
      6: System notifies operator
    alternative_flows:
      - id: 4a
        condition: Guide declines
        steps:
          1: Guide provides reason
          2: System notifies operator
          3: Operator assigns another guide
    postconditions:
      - Assignment confirmed or declined
    business_rules: [BR-CAP-040]
    related_entities: [Guide, TourSchedule]

  - id: UC-GDE-012
    name: Request Schedule Change
    name_vi: Yêu cầu đổi lịch
    description: Guide requests change to assignment
    actor: Guide
    preconditions:
      - Has accepted assignment
      - Sufficient notice period
    main_flow:
      1: Guide opens assignment
      2: Guide requests schedule change
      3: Guide provides reason
      4: Operator receives request
      5: Operator approves/denies
      6: Guide notified of decision
    change_reasons:
      - personal_emergency
      - health_issue
      - schedule_conflict
      - transportation_issue
    postconditions:
      - Change request submitted
    related_entities: [TourSchedule]

  - id: UC-GDE-013
    name: View Tour Briefing
    name_vi: Xem thông tin tour
    description: Guide reviews pre-tour briefing materials
    actor: Guide
    preconditions:
      - Assignment accepted
      - Tour date approaching
    main_flow:
      1: Guide opens tour briefing
      2: Guide reviews itinerary details
      3: Guide reviews participant list
      4: Guide notes special requirements
      5: Guide reviews emergency contacts
      6: Guide confirms briefing read
    briefing_contents:
      - detailed_itinerary
      - participant_list
      - special_requirements
      - dietary_restrictions
      - pickup_locations
      - emergency_procedures
      - operator_contact
    postconditions:
      - Guide briefed on tour
    related_entities: [TourBooking, Itinerary, Participant]

  # ============================================
  # TOUR OPERATIONS
  # ============================================
  - id: UC-GDE-020
    name: Start Tour
    name_vi: Bắt đầu tour
    description: Guide initiates tour on tour day
    actor: Guide
    preconditions:
      - Tour date and time reached
      - Guide at meeting point
    main_flow:
      1: Guide opens tour management
      2: Guide clicks "Start Tour"
      3: System records start time
      4: System notifies operator
      5: Guide proceeds with check-in
    postconditions:
      - Tour status: in_progress
      - Start time recorded
    related_entities: [TourSchedule]
    related_workflows: [tour-operation-workflow]

  - id: UC-GDE-021
    name: Check In Participants
    name_vi: Check-in người tham gia
    description: Guide checks in tour participants
    actor: Guide
    preconditions:
      - Tour started
      - Participants arriving
    main_flow:
      1: Guide opens participant list
      2: Participant shows voucher/QR
      3: Guide scans QR code
      4: System marks participant checked in
      5: Guide repeats for all participants
      6: Guide reviews final headcount
    alternative_flows:
      - id: 2a
        condition: Offline mode
        steps:
          1: Participant shows booking reference
          2: Guide manually checks in
          3: Syncs when online
      - id: 6a
        condition: No-show detected
        steps:
          1: Guide marks participant as no-show
          2: System records no-show
          3: No-show policy applied
    postconditions:
      - Participants checked in
      - Attendance recorded
    business_rules: [BR-BKG-040]
    related_entities: [TourBooking, Participant]

  - id: UC-GDE-022
    name: Report Issue During Tour
    name_vi: Báo cáo vấn đề trong tour
    description: Guide reports issues during tour
    actor: Guide
    preconditions:
      - Tour in progress
    main_flow:
      1: Guide opens issue reporting
      2: Guide selects issue type
      3: Guide describes issue
      4: Guide uploads photo (if relevant)
      5: System alerts operator
      6: Operator responds with instructions
    issue_types:
      - participant_medical
      - participant_behavior
      - weather_delay
      - venue_closed
      - transportation_issue
      - safety_concern
      - equipment_failure
    postconditions:
      - Issue logged
      - Operator notified
    related_entities: [TourSchedule]

  - id: UC-GDE-023
    name: Update Tour Progress
    name_vi: Cập nhật tiến độ tour
    description: Guide updates tour status at checkpoints
    actor: Guide
    preconditions:
      - Tour in progress
    main_flow:
      1: Guide reaches checkpoint
      2: Guide opens progress tracker
      3: Guide marks checkpoint complete
      4: System records timestamp
      5: System updates ETA for remaining
    checkpoints:
      - departure
      - each_stop
      - lunch_break
      - return_journey
    postconditions:
      - Progress updated
      - Timeline tracked
    related_entities: [Itinerary]

  - id: UC-GDE-024
    name: Complete Tour
    name_vi: Hoàn thành tour
    description: Guide ends tour and completes reporting
    actor: Guide
    preconditions:
      - All itinerary items completed
      - Back at end point
    main_flow:
      1: Guide opens tour management
      2: Guide clicks "Complete Tour"
      3: Guide confirms all participants returned
      4: Guide submits any incident notes
      5: System records completion time
      6: System marks tour as completed
      7: System triggers review requests
    alternative_flows:
      - id: 4a
        condition: Incidents occurred
        steps:
          1: Guide documents incidents
          2: Guide uploads photos/evidence
          3: Operator reviews report
    postconditions:
      - Tour completed
      - Completion recorded
      - Review process initiated
    related_entities: [TourSchedule]
    related_workflows: [tour-operation-workflow]

  # ============================================
  # COMMUNICATION
  # ============================================
  - id: UC-GDE-030
    name: Message Participants
    name_vi: Nhắn tin người tham gia
    description: Guide sends message to tour participants
    actor: Guide
    preconditions:
      - Has upcoming or active assignment
    main_flow:
      1: Guide opens messaging
      2: Guide selects tour group
      3: Guide composes message
      4: System sends to all participants
    message_types:
      - meeting_point_reminder
      - schedule_update
      - what_to_bring_reminder
      - delay_notification
    postconditions:
      - Message sent to participants
    related_entities: [TourBooking, Participant]

  - id: UC-GDE-031
    name: Contact Operator
    name_vi: Liên hệ nhà điều hành
    description: Guide contacts tour operator
    actor: Guide
    preconditions:
      - Guide is active
    main_flow:
      1: Guide opens operator contact
      2: Guide selects contact reason
      3: Guide sends message
      4: Operator receives notification
      5: Operator responds
    contact_reasons:
      - schedule_question
      - participant_issue
      - emergency_support
      - feedback
    postconditions:
      - Message sent to operator
    related_entities: [Supplier]

  - id: UC-GDE-032
    name: Respond to Participant Query
    name_vi: Trả lời câu hỏi người tham gia
    description: Guide responds to participant questions
    actor: Guide
    preconditions:
      - Question received from participant
    main_flow:
      1: Guide receives notification
      2: Guide opens query
      3: Guide composes response
      4: Guide sends response
      5: Participant receives answer
    postconditions:
      - Query answered
    related_entities: [Participant]

  # ============================================
  # EARNINGS & PERFORMANCE
  # ============================================
  - id: UC-GDE-040
    name: View Earnings
    name_vi: Xem thu nhập
    description: Guide views their earnings summary
    actor: Guide
    preconditions:
      - Guide has completed tours
    main_flow:
      1: Guide opens earnings dashboard
      2: System displays earnings summary
      3: Guide views period breakdown
      4: Guide views tour-by-tour earnings
      5: Guide views pending payments
    earnings_views:
      - total_earnings
      - by_period
      - by_tour_type
      - pending_payment
      - payment_history
    postconditions:
      - Earnings displayed
    related_entities: [Guide]

  - id: UC-GDE-041
    name: Request Payout
    name_vi: Yêu cầu thanh toán
    description: Guide requests payout of earnings
    actor: Guide
    preconditions:
      - Has earnings above minimum threshold
      - Payment details on file
    main_flow:
      1: Guide opens payout section
      2: Guide views available balance
      3: Guide requests payout
      4: System validates request
      5: System processes payout
      6: Guide receives confirmation
    alternative_flows:
      - id: 2a
        condition: Below minimum threshold
        steps:
          1: System shows minimum required
          2: Guide waits for more earnings
    postconditions:
      - Payout initiated
    related_entities: [Guide]

  - id: UC-GDE-042
    name: View Performance Metrics
    name_vi: Xem chỉ số hiệu suất
    description: Guide reviews their performance statistics
    actor: Guide
    preconditions:
      - Guide has completed tours
    main_flow:
      1: Guide opens performance dashboard
      2: System displays overall rating
      3: Guide views rating breakdown
      4: Guide views review summary
      5: Guide views completion rate
      6: Guide views comparison to platform average
    metrics_displayed:
      - average_rating
      - total_reviews
      - completion_rate
      - on_time_rate
      - repeat_booking_rate
      - cancellation_rate
    postconditions:
      - Performance metrics displayed
    related_entities: [Guide, TourReview]

  - id: UC-GDE-043
    name: View and Respond to Reviews
    name_vi: Xem và phản hồi đánh giá
    description: Guide views and responds to tour reviews
    actor: Guide
    preconditions:
      - Has received reviews
    main_flow:
      1: Guide opens reviews section
      2: System displays received reviews
      3: Guide reads review details
      4: Guide composes response (if allowed)
      5: Response submitted for approval
    alternative_flows:
      - id: 4a
        condition: Negative review
        steps:
          1: Guide flags for operator attention
          2: Operator reviews and mediates
    postconditions:
      - Reviews viewed
      - Response submitted if applicable
    related_entities: [TourReview]

  # ============================================
  # TRAINING & COMPLIANCE
  # ============================================
  - id: UC-GDE-050
    name: Complete Training Module
    name_vi: Hoàn thành khóa đào tạo
    description: Guide completes required training
    actor: Guide
    preconditions:
      - Training assigned or available
    main_flow:
      1: Guide opens training center
      2: Guide selects training module
      3: Guide completes training content
      4: Guide takes assessment quiz
      5: System records completion
      6: Certificate issued (if applicable)
    training_types:
      - platform_onboarding
      - safety_training
      - customer_service
      - tour_specific
      - compliance_updates
    postconditions:
      - Training completed
      - Record updated
    related_entities: [Guide]

  - id: UC-GDE-051
    name: Renew Certifications
    name_vi: Gia hạn chứng chỉ
    description: Guide renews expiring certifications
    actor: Guide
    preconditions:
      - Certification expiring
    main_flow:
      1: Guide receives expiry notification
      2: Guide obtains renewed certification
      3: Guide uploads new certificate
      4: Platform verifies document
      5: Certification status updated
    alternative_flows:
      - id: 5a
        condition: Verification fails
        steps:
          1: Guide notified of issue
          2: Guide provides correct document
    postconditions:
      - Certification renewed
    business_rules: [BR-SAF-051]
    related_entities: [Guide]

  - id: UC-GDE-052
    name: Report Emergency
    name_vi: Báo cáo khẩn cấp
    description: Guide reports emergency during tour
    actor: Guide
    preconditions:
      - Tour in progress
      - Emergency situation
    main_flow:
      1: Guide opens emergency contact
      2: Guide selects emergency type
      3: Guide provides location
      4: Guide describes situation
      5: System alerts emergency response
      6: Operator provides immediate support
    emergency_types:
      - medical_emergency
      - accident
      - natural_disaster
      - security_threat
      - lost_participant
    postconditions:
      - Emergency reported
      - Response initiated
    business_rules: [BR-SAF-060]
    related_entities: [TourSchedule]

non_functional_requirements:
  - Mobile-first interface
  - Offline capability for core functions
  - Quick check-in (<5 seconds per participant)
  - Real-time sync when online
  - Push notifications for assignments
  - GPS tracking (with consent)
  - Multi-language interface
