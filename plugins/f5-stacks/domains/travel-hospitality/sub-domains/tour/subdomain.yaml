name: tour
parent: travel-hospitality
display_name: Tour & Experience Platform

description: |
  Tour and experience booking platform for day trips, multi-day tours,
  activities, and local experiences. Supports booking management,
  guide assignment, and real-time availability.

variants:
  - id: marketplace
    name: Tour Marketplace
    scale: [starter, growth]
    features: [tour-listing, booking, reviews, basic-analytics]

  - id: operator
    name: Tour Operator Platform
    scale: [growth, enterprise]
    features: [multi-supplier, inventory-management, channel-manager, advanced-analytics]

  - id: dmc
    name: DMC Platform
    scale: [enterprise]
    features: [b2b-distribution, group-booking, custom-itinerary, white-label]

entities:
  - name: Tour
    attributes:
      - tour_code: string
      - title: string
      - tour_type: enum[day_trip, multi_day, walking_tour, food_tour, adventure, cultural, wildlife, cruise, workshop]
      - status: enum[draft, pending_review, active, paused, archived]
      - duration_hours: number
      - base_price_adult: number
      - max_participants: number

  - name: Activity
    attributes:
      - activity_code: string
      - title: string
      - activity_type: enum[adventure, water_sport, air_sport, land_sport, wellness, workshop, entertainment]
      - difficulty_level: enum[easy, moderate, challenging, extreme]
      - duration_minutes: number
      - price_per_person: number

  - name: Guide
    attributes:
      - guide_id: string
      - status: enum[pending, active, suspended, inactive]
      - languages: string[]
      - certifications: string[]
      - average_rating: number

  - name: TourBooking
    attributes:
      - booking_reference: string
      - status: enum[pending, confirmed, paid, cancelled, completed, no_show, refunded]
      - tour_date: date
      - total_participants: number
      - total_amount: number

  - name: TourSchedule
    attributes:
      - tour_id: string
      - schedule_type: enum[fixed, flexible, on_demand]
      - tour_date: date
      - available_spots: number

workflows:
  - name: tour-booking
    steps: [search, select, configure, add-participants, pay, confirm, voucher]

  - name: tour-operation
    steps: [prepare, assign-guide, check-in, conduct, complete, feedback]

  - name: cancellation
    steps: [request, validate-policy, calculate-refund, process, notify]

compliance:
  - atol-protection
  - eu-package-travel-directive
  - vietnam-tourism-law
  - activity-safety-standards

integrations:
  - payment-gateway
  - channel-manager
  - review-aggregator
  - weather-api
  - maps-api

suggested_services:
  - name: tour-service
    stack: nestjs
    database: postgresql
    cache: redis
    features: [tour-management, availability, pricing]

  - name: booking-service
    stack: nestjs
    database: postgresql
    queue: rabbitmq
    features: [booking-management, payment-integration, voucher-generation]

  - name: guide-service
    stack: nestjs
    database: postgresql
    features: [guide-management, assignment, scheduling]

  - name: review-service
    stack: nestjs
    database: mongodb
    features: [review-collection, moderation, aggregation]
