# Agent Use Cases
# F5 Framework v2.0 - Real Estate/Transaction
# Use cases from the agent's perspective

use_cases:
  name: AgentUseCases
  name_vi: Các trường hợp sử dụng của môi giới
  name_ja: 仲介者ユースケース
  domain: real-estate
  subdomain: transaction
  version: "1.0.0"

  description: |
    Comprehensive use cases covering agent interactions
    throughout the real estate transaction process,
    including both listing agents and buyer agents.

  # Primary Actors
  primary_actors:
    listing_agent:
      role: Seller's Representative
      name_vi: Môi giới bán
      responsibilities:
        - Market property effectively
        - Present offers to seller
        - Negotiate on seller's behalf
        - Coordinate closing
        - Maximize seller value

    buyer_agent:
      role: Buyer's Representative
      name_vi: Môi giới mua
      responsibilities:
        - Help buyer find properties
        - Prepare and submit offers
        - Negotiate on buyer's behalf
        - Coordinate due diligence
        - Protect buyer interests

  # Use Case Categories
  categories:
    - listing_management
    - offer_management
    - negotiation
    - transaction_coordination
    - due_diligence_support
    - closing_coordination
    - commission_management

  # ==========================================
  # LISTING MANAGEMENT USE CASES
  # ==========================================

  listing_management:
    - use_case_id: UC-AGT-001
      name: Create Transaction from Listing
      name_vi: Tạo giao dịch từ niêm yết
      description: Agent creates transaction when offer accepted
      actor: listing_agent

      preconditions:
        - Property listed in system
        - Offer accepted
        - Listing agreement valid

      main_flow:
        - step: 1
          action: Agent confirms offer acceptance
        - step: 2
          action: System creates transaction record
          auto_populated:
            - property_details
            - seller_information
            - listing_agent_details
            - accepted_offer_terms
        - step: 3
          action: Agent verifies transaction details
        - step: 4
          action: Agent adds buyer agent information
        - step: 5
          action: System notifies all parties
        - step: 6
          action: Transaction workflow initiated

      postconditions:
        - Transaction record created
        - All parties linked
        - Workflow started

    - use_case_id: UC-AGT-002
      name: Update Transaction Status
      name_vi: Cập nhật trạng thái giao dịch
      description: Agent updates transaction progress
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Active transaction exists
        - Agent has permission

      main_flow:
        - step: 1
          action: Agent accesses transaction
        - step: 2
          action: Agent selects status update
          statuses:
            - under_contract
            - inspection_scheduled
            - inspection_complete
            - title_clear
            - clear_to_close
        - step: 3
          action: Agent adds notes if needed
        - step: 4
          action: System updates status
        - step: 5
          action: Relevant parties notified

      postconditions:
        - Status updated
        - History logged
        - Notifications sent

  # ==========================================
  # OFFER MANAGEMENT USE CASES
  # ==========================================

  offer_management:
    - use_case_id: UC-AGT-010
      name: Prepare Purchase Offer
      name_vi: Chuẩn bị đề nghị mua
      description: Buyer agent prepares offer for client
      actor: buyer_agent

      preconditions:
        - Client wants to make offer
        - Property identified
        - Client qualified

      main_flow:
        - step: 1
          action: Agent gathers client requirements
          requirements:
            - target_price
            - preferred_closing_date
            - contingencies_needed
            - special_terms
        - step: 2
          action: Agent analyzes market data
          analysis:
            - comparable_sales
            - days_on_market
            - price_trends
            - seller_motivation
        - step: 3
          action: Agent recommends offer strategy
        - step: 4
          action: Agent prepares offer document
          system: Use offer template
        - step: 5
          action: Agent reviews with client
        - step: 6
          action: Client approves and signs
        - step: 7
          action: Agent submits offer

      postconditions:
        - Offer prepared
        - Client signed
        - Submitted to listing agent

    - use_case_id: UC-AGT-011
      name: Present Offer to Seller
      name_vi: Trình bày đề nghị cho người bán
      description: Listing agent presents offer to seller
      actor: listing_agent

      preconditions:
        - Offer received from buyer agent
        - Offer complete and valid

      main_flow:
        - step: 1
          action: Agent receives offer
        - step: 2
          action: Agent reviews offer completeness
          checklist:
            - all_terms_clear
            - signatures_present
            - earnest_money_adequate
            - financing_verified
        - step: 3
          action: Agent prepares presentation
          includes:
            - offer_summary
            - buyer_qualification
            - market_comparison
            - pros_and_cons
            - recommendation
        - step: 4
          action: Agent schedules presentation
        - step: 5
          action: Agent presents to seller
        - step: 6
          action: Agent answers seller questions
        - step: 7
          action: Agent records seller decision

      postconditions:
        - Offer presented
        - Seller decision recorded
        - Response prepared

    - use_case_id: UC-AGT-012
      name: Manage Multiple Offers
      name_vi: Quản lý nhiều đề nghị
      description: Listing agent handles multiple offers
      actor: listing_agent

      preconditions:
        - Multiple offers received
        - All currently valid

      main_flow:
        - step: 1
          action: Agent logs all received offers
        - step: 2
          action: Agent notifies buyer agents
          notification: Multiple offers situation
        - step: 3
          action: Agent creates comparison matrix
          criteria:
            - net_price
            - terms
            - contingencies
            - buyer_strength
            - closing_timeline
        - step: 4
          action: Agent presents all offers to seller
        - step: 5
          action: Agent advises on options
          options:
            - accept_best_offer
            - counter_one
            - counter_multiple
            - highest_and_best
        - step: 6
          action: Agent executes seller decision
        - step: 7
          action: Agent notifies all parties

      postconditions:
        - All offers addressed
        - Decisions communicated
        - Backup offers managed

  # ==========================================
  # NEGOTIATION USE CASES
  # ==========================================

  negotiation:
    - use_case_id: UC-AGT-020
      name: Negotiate Counter Offer
      name_vi: Đàm phán đề nghị ngược
      description: Agent negotiates between parties
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Initial offer submitted
        - Counter offer needed

      main_flow:
        - step: 1
          action: Agent identifies negotiation points
        - step: 2
          action: Agent counsels client on strategy
        - step: 3
          action: Agent prepares counter offer
        - step: 4
          action: Client reviews and approves
        - step: 5
          action: Agent submits counter
        - step: 6
          action: Agent communicates with other agent
        - step: 7
          action: Process continues until resolution

      postconditions:
        - Agreement reached or negotiations end
        - All communications documented

    - use_case_id: UC-AGT-021
      name: Negotiate Repairs
      name_vi: Đàm phán sửa chữa
      description: Agent negotiates inspection repair resolution
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Inspection completed
        - Issues identified
        - Within contingency period

      main_flow:
        - step: 1
          action: Buyer agent prepares repair request
        - step: 2
          action: Listing agent presents to seller
        - step: 3
          action: Seller responds with position
        - step: 4
          action: Agents negotiate resolution
          resolution_types:
            - repairs_completed
            - credit_at_closing
            - price_reduction
            - as_is_acceptance
        - step: 5
          action: Agreement documented
        - step: 6
          action: Amendment signed by all parties

      postconditions:
        - Resolution agreed
        - Amendment executed
        - Transaction proceeds

  # ==========================================
  # TRANSACTION COORDINATION USE CASES
  # ==========================================

  transaction_coordination:
    - use_case_id: UC-AGT-030
      name: Coordinate Document Collection
      name_vi: Phối hợp thu thập tài liệu
      description: Agent coordinates required documents
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Transaction in progress
        - Documents needed

      main_flow:
        - step: 1
          action: Agent identifies required documents
          by_party:
            seller:
              - property_certificate
              - identification
              - marriage_docs
              - mortgage_info
            buyer:
              - identification
              - financing_docs
              - proof_of_funds
        - step: 2
          action: Agent sends request to client
        - step: 3
          action: Agent tracks document status
        - step: 4
          action: Agent follows up on missing items
        - step: 5
          action: Agent verifies received documents
        - step: 6
          action: Agent forwards to appropriate parties

      postconditions:
        - All documents collected
        - Verification complete
        - Transaction can proceed

    - use_case_id: UC-AGT-031
      name: Schedule Notarization
      name_vi: Lên lịch công chứng
      description: Agent coordinates notarization appointment
      actor: listing_agent

      preconditions:
        - Contract ready
        - Documents verified
        - All parties available

      main_flow:
        - step: 1
          action: Agent identifies available notary
        - step: 2
          action: Agent proposes dates to parties
        - step: 3
          action: Agent confirms availability
        - step: 4
          action: Agent books appointment
        - step: 5
          action: Agent sends confirmation
          includes:
            - date_time_location
            - required_documents
            - parties_to_attend
        - step: 6
          action: Agent sends reminders
        - step: 7
          action: Agent attends notarization

      postconditions:
        - Appointment confirmed
        - All parties notified
        - Contract notarized

    - use_case_id: UC-AGT-032
      name: Track Transaction Timeline
      name_vi: Theo dõi tiến độ giao dịch
      description: Agent monitors all transaction deadlines
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Active transaction
        - Deadlines established

      main_flow:
        - step: 1
          action: Agent views transaction timeline
          key_dates:
            - inspection_deadline
            - financing_contingency
            - appraisal_deadline
            - title_deadline
            - closing_date
        - step: 2
          action: Agent monitors progress
        - step: 3
          action: Agent identifies at-risk items
        - step: 4
          action: Agent takes action on delays
        - step: 5
          action: Agent communicates status
        - step: 6
          action: Agent documents issues

      postconditions:
        - Deadlines tracked
        - Issues addressed
        - Parties informed

  # ==========================================
  # DUE DILIGENCE SUPPORT USE CASES
  # ==========================================

  due_diligence_support:
    - use_case_id: UC-AGT-040
      name: Coordinate Inspection
      name_vi: Phối hợp kiểm tra
      description: Buyer agent coordinates property inspection
      actor: buyer_agent

      preconditions:
        - Under contract
        - Within inspection period

      main_flow:
        - step: 1
          action: Agent helps client select inspector
          options:
            - recommended_inspectors
            - client_provided
        - step: 2
          action: Agent contacts listing agent
        - step: 3
          action: Agent schedules inspection
        - step: 4
          action: Agent confirms with all parties
        - step: 5
          action: Agent attends inspection
        - step: 6
          action: Agent receives report
        - step: 7
          action: Agent reviews with client

      postconditions:
        - Inspection complete
        - Report received
        - Client advised

    - use_case_id: UC-AGT-041
      name: Review Title Report
      name_vi: Xem xét báo cáo quyền sở hữu
      description: Agent reviews title search results
      actor: buyer_agent

      preconditions:
        - Title search ordered
        - Report received

      main_flow:
        - step: 1
          action: Agent receives title report
        - step: 2
          action: Agent reviews key findings
          review_items:
            - ownership_chain
            - encumbrances
            - easements
            - liens
            - exceptions
        - step: 3
          action: Agent identifies issues
        - step: 4
          action: Agent discusses with client
        - step: 5
          action: Agent coordinates resolution
        - step: 6
          action: Agent documents outcomes

      postconditions:
        - Report reviewed
        - Issues identified
        - Resolution planned

  # ==========================================
  # CLOSING COORDINATION USE CASES
  # ==========================================

  closing_coordination:
    - use_case_id: UC-AGT-050
      name: Coordinate Closing
      name_vi: Phối hợp đóng giao dịch
      description: Agent coordinates closing process
      actor: [listing_agent, buyer_agent]

      preconditions:
        - All contingencies satisfied
        - Clear to close

      main_flow:
        - step: 1
          action: Agent confirms closing date
        - step: 2
          action: Agent coordinates with closing agent
        - step: 3
          action: Agent reviews closing statement
        - step: 4
          action: Agent sends to client for review
        - step: 5
          action: Agent resolves any discrepancies
        - step: 6
          action: Agent confirms wire instructions (buyer)
        - step: 7
          action: Agent schedules final walkthrough
        - step: 8
          action: Agent attends closing

      postconditions:
        - Closing coordinated
        - All issues resolved
        - Closing successful

    - use_case_id: UC-AGT-051
      name: Conduct Final Walkthrough
      name_vi: Thực hiện kiểm tra lần cuối
      description: Buyer agent conducts final property walkthrough
      actor: buyer_agent

      preconditions:
        - Closing scheduled
        - Within 24-48 hours

      main_flow:
        - step: 1
          action: Agent schedules walkthrough
        - step: 2
          action: Agent meets buyer at property
        - step: 3
          action: Agent guides inspection
          checklist:
            - repairs_completed
            - property_condition
            - seller_moved_out
            - fixtures_present
            - no_new_damage
        - step: 4
          action: Agent documents any issues
        - step: 5
          action: Agent addresses issues found
        - step: 6
          action: Agent confirms ready for closing

      postconditions:
        - Walkthrough complete
        - Issues addressed
        - Ready for closing

    - use_case_id: UC-AGT-052
      name: Attend Closing
      name_vi: Tham dự đóng giao dịch
      description: Agent attends closing ceremony
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Closing scheduled
        - All prerequisites met

      main_flow:
        - step: 1
          action: Agent arrives at closing
        - step: 2
          action: Agent supports client
        - step: 3
          action: Agent reviews documents
        - step: 4
          action: Agent answers questions
        - step: 5
          action: Agent witnesses signing
        - step: 6
          action: Agent facilitates key transfer
        - step: 7
          action: Agent congratulates parties

      postconditions:
        - Closing attended
        - Client supported
        - Transaction closed

  # ==========================================
  # COMMISSION MANAGEMENT USE CASES
  # ==========================================

  commission_management:
    - use_case_id: UC-AGT-060
      name: View Commission Details
      name_vi: Xem chi tiết hoa hồng
      description: Agent views commission for transaction
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Transaction exists
        - Commission calculated

      main_flow:
        - step: 1
          action: Agent accesses commission details
        - step: 2
          action: System displays breakdown
          details:
            - gross_commission
            - listing_buyer_split
            - agent_share
            - referral_fees
            - deductions
            - net_to_agent
        - step: 3
          action: Agent reviews accuracy
        - step: 4
          action: Agent reports discrepancies

      postconditions:
        - Commission understood
        - Discrepancies addressed

    - use_case_id: UC-AGT-061
      name: Process Referral Fee
      name_vi: Xử lý phí giới thiệu
      description: Agent processes referral fee agreement
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Referral agreement exists
        - Transaction closing

      main_flow:
        - step: 1
          action: Agent documents referral
          details:
            - referring_agent
            - referral_percentage
            - payment_terms
        - step: 2
          action: Agent submits for processing
        - step: 3
          action: System calculates fee
        - step: 4
          action: Fee included in disbursement
        - step: 5
          action: Referring agent paid at closing

      postconditions:
        - Referral documented
        - Fee calculated
        - Payment processed

    - use_case_id: UC-AGT-062
      name: Receive Commission Payment
      name_vi: Nhận thanh toán hoa hồng
      description: Agent receives commission after closing
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Transaction closed
        - Commission approved

      main_flow:
        - step: 1
          action: Transaction closes
        - step: 2
          action: Commission disbursed to agency
        - step: 3
          action: Agency processes agent payment
        - step: 4
          action: Agent receives statement
        - step: 5
          action: Agent receives payment
        - step: 6
          action: Agent confirms receipt

      postconditions:
        - Payment received
        - Statement reviewed
        - Transaction complete

  # ==========================================
  # ADDITIONAL AGENT USE CASES
  # ==========================================

  additional:
    - use_case_id: UC-AGT-070
      name: Generate Transaction Report
      name_vi: Tạo báo cáo giao dịch
      description: Agent generates transaction summary report
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Transaction exists
        - Agent has access

      main_flow:
        - step: 1
          action: Agent selects report type
          types:
            - status_summary
            - timeline_report
            - financial_summary
            - complete_history
        - step: 2
          action: Agent customizes options
        - step: 3
          action: System generates report
        - step: 4
          action: Agent downloads/shares

      postconditions:
        - Report generated
        - Available for sharing

    - use_case_id: UC-AGT-071
      name: Communicate with Other Agent
      name_vi: Giao tiếp với môi giới khác
      description: Agent communicates through platform
      actor: [listing_agent, buyer_agent]

      preconditions:
        - Active transaction
        - Both agents on platform

      main_flow:
        - step: 1
          action: Agent accesses messaging
        - step: 2
          action: Agent composes message
        - step: 3
          action: Agent attaches documents if needed
        - step: 4
          action: Agent sends message
        - step: 5
          action: Recipient notified
        - step: 6
          action: Message logged in transaction

      postconditions:
        - Message delivered
        - Communication logged

    - use_case_id: UC-AGT-072
      name: Archive Transaction
      name_vi: Lưu trữ giao dịch
      description: Agent completes and archives transaction
      actor: listing_agent

      preconditions:
        - Transaction closed
        - All activities complete

      main_flow:
        - step: 1
          action: Agent reviews completion checklist
        - step: 2
          action: Agent verifies all documents
        - step: 3
          action: Agent adds final notes
        - step: 4
          action: Agent marks as complete
        - step: 5
          action: System archives transaction
        - step: 6
          action: Reports generated

      postconditions:
        - Transaction archived
        - Records preserved
        - Statistics updated

  # Summary Statistics
  summary:
    total_use_cases: 22
    categories: 7
    listing_agent_use_cases: 14
    buyer_agent_use_cases: 16
    shared_use_cases: 8
    business_rules_referenced: 6
