# Buyer Use Cases
# F5 Framework v2.0 - Real Estate/Transaction
# Use cases from the buyer's perspective

use_cases:
  name: BuyerUseCases
  name_vi: Các trường hợp sử dụng của người mua
  name_ja: 買主ユースケース
  domain: real-estate
  subdomain: transaction
  version: "1.0.0"

  description: |
    Comprehensive use cases covering all buyer interactions
    throughout the real estate transaction process.

  # Primary Actor
  primary_actor:
    role: Buyer
    name_vi: Người mua
    description: Individual or entity purchasing real estate property
    goals:
      - Find and purchase suitable property
      - Minimize purchase price and costs
      - Ensure clear title and property condition
      - Complete transaction securely
      - Receive property certificate

  # Use Case Categories
  categories:
    - offer_submission
    - negotiation
    - due_diligence
    - financing
    - closing
    - post_purchase

  # ==========================================
  # OFFER SUBMISSION USE CASES
  # ==========================================

  offer_submission:
    - use_case_id: UC-BUY-001
      name: Submit Purchase Offer
      name_vi: Gửi đề nghị mua
      description: Buyer submits an offer to purchase a property

      preconditions:
        - Buyer has viewed the property
        - Buyer has verified financing capability
        - Property is listed for sale
        - Buyer has engaged agent or acting directly

      main_flow:
        - step: 1
          action: Buyer reviews property details and listing price
          system: Display property information, comparables, market data
        - step: 2
          action: Buyer determines offer terms with agent guidance
          terms:
            - offer_price
            - earnest_money_amount
            - closing_date
            - contingencies
            - special_requests
        - step: 3
          action: Buyer completes offer form
          system: Generate offer document from template
        - step: 4
          action: Buyer provides required documents
          documents:
            - identification
            - pre-approval_letter
            - proof_of_funds
        - step: 5
          action: Buyer signs offer electronically or physically
          system: Capture signature and timestamp
        - step: 6
          action: System validates offer completeness
          validation:
            - all_required_fields
            - minimum_earnest_money
            - valid_dates
        - step: 7
          action: System submits offer to listing agent
          notification: Send to listing agent and seller
        - step: 8
          action: Buyer receives confirmation of submission
          system: Display submission receipt with expiration

      alternative_flows:
        A1_missing_documents:
          trigger: Required documents not provided
          steps:
            - System identifies missing documents
            - System prompts for upload
            - Buyer provides documents
            - Return to step 6
        A2_validation_failure:
          trigger: Offer fails validation
          steps:
            - System displays validation errors
            - Buyer corrects errors
            - Return to step 6

      postconditions:
        - Offer recorded in system
        - Listing agent notified
        - Expiration timer started
        - Buyer can track offer status

      business_rules:
        - BR-OFF-001: Minimum earnest money 1%
        - BR-OFF-003: Buyer ID required

    - use_case_id: UC-BUY-002
      name: Submit Offer on Multiple Properties
      name_vi: Gửi đề nghị cho nhiều bất động sản
      description: Buyer submits offers on multiple properties simultaneously

      preconditions:
        - Buyer interested in multiple properties
        - Buyer understands obligations if multiple accepted

      main_flow:
        - step: 1
          action: Buyer marks multiple properties of interest
        - step: 2
          action: System warns about multiple offer implications
          warning: |
            Submitting offers on multiple properties may result
            in obligations if more than one is accepted.
        - step: 3
          action: Buyer acknowledges understanding
        - step: 4
          action: Buyer prepares each offer with specific terms
        - step: 5
          action: System submits all offers
        - step: 6
          action: Buyer tracks status of each offer

      special_considerations:
        - Buyer may need to withdraw offers if one accepted
        - Earnest money may be at risk for multiple properties
        - Agent coordination required

    - use_case_id: UC-BUY-003
      name: Withdraw Offer
      name_vi: Rút đề nghị
      description: Buyer withdraws submitted offer before acceptance

      preconditions:
        - Offer has been submitted
        - Offer not yet accepted
        - Within offer validity period

      main_flow:
        - step: 1
          action: Buyer requests offer withdrawal
          location: Offer management screen
        - step: 2
          action: System confirms withdrawal intent
          confirmation: "Are you sure you want to withdraw this offer?"
        - step: 3
          action: Buyer provides withdrawal reason (optional)
        - step: 4
          action: System processes withdrawal
        - step: 5
          action: System notifies listing agent and seller
        - step: 6
          action: Buyer receives withdrawal confirmation

      postconditions:
        - Offer status changed to withdrawn
        - No penalty to buyer
        - Seller can no longer accept

  # ==========================================
  # NEGOTIATION USE CASES
  # ==========================================

  negotiation:
    - use_case_id: UC-BUY-010
      name: Respond to Counter Offer
      name_vi: Phản hồi đề nghị ngược
      description: Buyer responds to seller's counter offer

      preconditions:
        - Seller has submitted counter offer
        - Counter offer not expired
        - Buyer received notification

      main_flow:
        - step: 1
          action: Buyer reviews counter offer details
          system: Display comparison of original vs counter terms
        - step: 2
          action: Buyer consults with agent
        - step: 3
          action: Buyer decides on response
          options:
            - accept_counter
            - submit_counter_to_counter
            - withdraw
        - step: 4
          action: Buyer executes chosen response
        - step: 5
          action: System processes and notifies parties

      alternative_flows:
        A1_accept_counter:
          steps:
            - Buyer signs acceptance
            - System creates binding agreement
            - Initiates contract phase
        A2_counter_again:
          steps:
            - Buyer modifies terms
            - System creates new counter
            - Submits to seller

      postconditions:
        - Response recorded
        - Appropriate parties notified
        - Next phase initiated if accepted

    - use_case_id: UC-BUY-011
      name: Request Best and Final Offer
      name_vi: Yêu cầu đề nghị tốt nhất
      description: Buyer submits best and final offer in multiple offer situation

      preconditions:
        - Multiple offers situation announced
        - Seller requesting highest and best
        - Buyer wants to remain competitive

      main_flow:
        - step: 1
          action: Buyer receives multiple offers notification
        - step: 2
          action: Buyer reviews current offer position
        - step: 3
          action: Buyer decides to improve offer
        - step: 4
          action: Buyer submits improved terms
          improvements:
            - higher_price
            - fewer_contingencies
            - faster_closing
            - larger_earnest_money
        - step: 5
          action: System submits improved offer
        - step: 6
          action: Buyer awaits seller decision

  # ==========================================
  # DUE DILIGENCE USE CASES
  # ==========================================

  due_diligence:
    - use_case_id: UC-BUY-020
      name: Schedule Property Inspection
      name_vi: Lên lịch kiểm tra tài sản
      description: Buyer schedules and coordinates property inspection

      preconditions:
        - Offer accepted or under contract
        - Within inspection contingency period
        - Inspector selected

      main_flow:
        - step: 1
          action: Buyer selects inspector from list or provides own
          system: Display recommended inspectors with ratings
        - step: 2
          action: Buyer selects preferred dates/times
        - step: 3
          action: System coordinates with seller for access
        - step: 4
          action: Inspection appointment confirmed
        - step: 5
          action: Buyer attends inspection (optional)
        - step: 6
          action: Buyer receives inspection report
        - step: 7
          action: Buyer reviews findings with agent

      postconditions:
        - Inspection completed
        - Report available in system
        - Buyer can proceed with requests

    - use_case_id: UC-BUY-021
      name: Request Repairs or Credits
      name_vi: Yêu cầu sửa chữa hoặc giảm giá
      description: Buyer requests repairs or credits based on inspection

      preconditions:
        - Inspection completed
        - Issues identified
        - Within contingency period

      main_flow:
        - step: 1
          action: Buyer reviews inspection findings
        - step: 2
          action: Buyer categorizes issues by priority
          categories:
            - must_address
            - nice_to_address
            - accept_as_is
        - step: 3
          action: Buyer prepares repair request
          options:
            - request_repair
            - request_credit
            - request_price_reduction
        - step: 4
          action: System generates repair request document
        - step: 5
          action: Buyer signs and submits to seller
        - step: 6
          action: Buyer awaits seller response

      alternative_flows:
        A1_seller_agrees:
          postcondition: Amendment signed, proceed
        A2_seller_counters:
          postcondition: Negotiate resolution
        A3_no_agreement:
          postcondition: May terminate with deposit return

    - use_case_id: UC-BUY-022
      name: Review Title Report
      name_vi: Xem xét báo cáo quyền sở hữu
      description: Buyer reviews title search results

      preconditions:
        - Title search ordered
        - Report received

      main_flow:
        - step: 1
          action: Buyer accesses title report
        - step: 2
          action: System highlights key findings
          highlights:
            - ownership_confirmation
            - encumbrances
            - liens
            - easements
            - exceptions
        - step: 3
          action: Buyer reviews with agent/attorney
        - step: 4
          action: Buyer accepts or objects to items
        - step: 5
          action: If objections, system initiates resolution

      postconditions:
        - Title status understood
        - Issues addressed or accepted
        - Clear to proceed or terminate

    - use_case_id: UC-BUY-023
      name: Waive Contingency
      name_vi: Từ bỏ điều kiện
      description: Buyer waives remaining due diligence contingencies

      preconditions:
        - Contingencies exist in contract
        - Buyer decides to waive
        - Understands risks

      main_flow:
        - step: 1
          action: Buyer requests contingency waiver
        - step: 2
          action: System displays waiver implications
          warning: |
            Waiving contingencies means you may lose your
            deposit if you later withdraw for these reasons.
        - step: 3
          action: Buyer acknowledges risks
        - step: 4
          action: Buyer signs waiver document
        - step: 5
          action: System records waiver
        - step: 6
          action: Parties notified

      postconditions:
        - Contingencies waived
        - Deposit may be at risk
        - Transaction proceeds

    - use_case_id: UC-BUY-024
      name: Terminate Based on Due Diligence
      name_vi: Chấm dứt dựa trên thẩm định
      description: Buyer terminates contract due to DD findings

      preconditions:
        - Valid grounds for termination
        - Within contingency period
        - Proper documentation

      main_flow:
        - step: 1
          action: Buyer decides to terminate
          valid_reasons:
            - unacceptable_inspection_findings
            - title_defects
            - financing_denied
            - appraisal_shortfall
        - step: 2
          action: Buyer selects termination reason
        - step: 3
          action: System validates termination validity
        - step: 4
          action: Buyer provides supporting documentation
        - step: 5
          action: System processes termination
        - step: 6
          action: Deposit return initiated

      postconditions:
        - Contract terminated
        - Deposit returned to buyer
        - Transaction closed

  # ==========================================
  # FINANCING USE CASES
  # ==========================================

  financing:
    - use_case_id: UC-BUY-030
      name: Submit Loan Application
      name_vi: Nộp đơn vay
      description: Buyer applies for mortgage financing

      preconditions:
        - Offer accepted
        - Financing contingency in contract
        - Lender selected

      main_flow:
        - step: 1
          action: Buyer gathers required documents
          documents:
            - income_verification
            - bank_statements
            - tax_returns
            - employment_verification
            - id_documents
        - step: 2
          action: Buyer completes loan application
        - step: 3
          action: Buyer submits to lender
        - step: 4
          action: Track application status
        - step: 5
          action: Respond to lender requests
        - step: 6
          action: Receive loan decision

      alternative_flows:
        A1_loan_approved:
          postcondition: Proceed to closing
        A2_loan_denied:
          postcondition: May terminate with contingency

    - use_case_id: UC-BUY-031
      name: Coordinate Appraisal
      name_vi: Phối hợp định giá
      description: Buyer coordinates property appraisal for lender

      preconditions:
        - Loan application submitted
        - Lender requires appraisal

      main_flow:
        - step: 1
          action: Lender orders appraisal
        - step: 2
          action: Buyer pays appraisal fee
        - step: 3
          action: Appraiser schedules visit
        - step: 4
          action: Buyer coordinates access with seller
        - step: 5
          action: Appraisal completed
        - step: 6
          action: Buyer receives appraisal results
        - step: 7
          action: Compare to purchase price

  # ==========================================
  # CLOSING USE CASES
  # ==========================================

  closing:
    - use_case_id: UC-BUY-040
      name: Review Closing Statement
      name_vi: Xem xét bảng kê thanh toán
      description: Buyer reviews and approves closing figures

      preconditions:
        - Closing scheduled
        - Statement prepared
        - Sent to buyer for review

      main_flow:
        - step: 1
          action: Buyer receives closing statement
          timing: minimum_24_hours_before_closing
        - step: 2
          action: Buyer reviews all figures
          items:
            - purchase_price
            - deposits_credited
            - loan_amount
            - closing_costs
            - prorations
            - amount_due
        - step: 3
          action: Buyer questions any discrepancies
        - step: 4
          action: Discrepancies resolved
        - step: 5
          action: Buyer approves statement

      postconditions:
        - Statement approved
        - Final amount confirmed
        - Ready to wire funds

    - use_case_id: UC-BUY-041
      name: Wire Closing Funds
      name_vi: Chuyển tiền đóng giao dịch
      description: Buyer wires funds for closing

      preconditions:
        - Closing statement approved
        - Wire instructions received
        - Funds available

      main_flow:
        - step: 1
          action: Buyer receives wire instructions
          security: Verify by phone, never email only
        - step: 2
          action: Buyer verifies instructions
          method: Call closing agent directly
        - step: 3
          action: Buyer initiates wire transfer
          from: Buyer's bank
          to: Escrow account
        - step: 4
          action: Buyer confirms wire sent
        - step: 5
          action: System tracks wire receipt
        - step: 6
          action: Buyer receives confirmation

      postconditions:
        - Funds received in escrow
        - Closing can proceed

    - use_case_id: UC-BUY-042
      name: Conduct Final Walkthrough
      name_vi: Kiểm tra lần cuối
      description: Buyer inspects property before closing

      preconditions:
        - Closing scheduled
        - Within 24-48 hours of closing
        - Seller has vacated

      main_flow:
        - step: 1
          action: Buyer schedules walkthrough
        - step: 2
          action: Buyer inspects property
          checklist:
            - agreed_repairs_completed
            - property_condition_unchanged
            - seller_belongings_removed
            - fixtures_present
            - no_new_damage
        - step: 3
          action: Buyer documents any issues
        - step: 4
          action: Buyer decides to proceed or address issues

      alternative_flows:
        A1_issues_found:
          steps:
            - Document issues with photos
            - Notify agent
            - Negotiate resolution
            - May delay closing

    - use_case_id: UC-BUY-043
      name: Attend Closing
      name_vi: Tham dự đóng giao dịch
      description: Buyer attends closing ceremony

      preconditions:
        - All prerequisites met
        - Funds received
        - Documents prepared

      main_flow:
        - step: 1
          action: Buyer arrives at closing location
          bring:
            - valid_id
            - additional_funds_if_needed
        - step: 2
          action: Buyer verifies identity
        - step: 3
          action: Closing agent explains documents
        - step: 4
          action: Buyer reviews and signs documents
        - step: 5
          action: Buyer receives keys
        - step: 6
          action: Buyer receives copies of documents

      postconditions:
        - Transaction closed
        - Buyer owns property
        - Keys received

  # ==========================================
  # POST-PURCHASE USE CASES
  # ==========================================

  post_purchase:
    - use_case_id: UC-BUY-050
      name: Track Certificate Issuance
      name_vi: Theo dõi cấp giấy chứng nhận
      description: Buyer tracks new property certificate

      preconditions:
        - Closing completed
        - Registration submitted

      main_flow:
        - step: 1
          action: Buyer accesses certificate tracking
        - step: 2
          action: System displays status
          statuses:
            - submitted
            - under_review
            - processing
            - ready_for_pickup
        - step: 3
          action: Buyer receives updates
        - step: 4
          action: Buyer notified when ready
        - step: 5
          action: Buyer receives certificate

      postconditions:
        - Certificate in buyer's possession
        - Ownership officially recorded

    - use_case_id: UC-BUY-051
      name: Report Post-Closing Issue
      name_vi: Báo cáo vấn đề sau đóng
      description: Buyer reports issue discovered after closing

      preconditions:
        - Closing completed
        - Issue discovered

      main_flow:
        - step: 1
          action: Buyer identifies issue
          types:
            - undisclosed_defect
            - seller_left_items
            - missing_items
            - utility_problems
        - step: 2
          action: Buyer documents issue
        - step: 3
          action: Buyer reports through platform
        - step: 4
          action: Agent reviews and advises
        - step: 5
          action: Resolution pursued if warranted

      alternative_flows:
        A1_warranty_claim:
          condition: Covered by home warranty
        A2_seller_liability:
          condition: Seller responsible
        A3_buyer_responsibility:
          condition: Normal wear or buyer issue

    - use_case_id: UC-BUY-052
      name: Provide Feedback
      name_vi: Cung cấp phản hồi
      description: Buyer provides transaction feedback

      preconditions:
        - Transaction completed
        - Survey sent

      main_flow:
        - step: 1
          action: Buyer receives survey invitation
        - step: 2
          action: Buyer rates various aspects
          aspects:
            - agent_service
            - platform_experience
            - closing_process
            - overall_satisfaction
        - step: 3
          action: Buyer provides comments
        - step: 4
          action: Buyer submits feedback
        - step: 5
          action: System records and thanks buyer

      postconditions:
        - Feedback recorded
        - Used for improvement

  # Summary Statistics
  summary:
    total_use_cases: 17
    categories: 6
    primary_flows: 17
    alternative_flows: 12
    business_rules_referenced: 5
