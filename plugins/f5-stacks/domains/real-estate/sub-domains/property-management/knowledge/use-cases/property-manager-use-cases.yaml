# Property Manager Use Cases
# F5 Framework v2.0 - Real Estate/Property Management
# Use cases for property managers and staff

use_cases:
  domain: real-estate
  subdomain: property-management
  actor: property_manager
  version: "1.0.0"

  description: |
    Use cases for property managers who handle day-to-day operations
    including tenant management, rent collection, maintenance coordination,
    leasing, and property oversight.

  actor_profile:
    name: Property Manager
    name_ja: プロパティマネージャー
    name_vi: Quản lý bất động sản
    description: |
      Professionals responsible for managing rental properties on behalf
      of owners. Handle tenant relations, rent collection, maintenance,
      leasing, and financial reporting.
    segments:
      - residential_manager
      - commercial_manager
      - portfolio_manager
      - on_site_manager
      - regional_manager
    goals:
      - Maximize occupancy and rental income
      - Minimize vacancy and turnover costs
      - Ensure timely rent collection
      - Maintain property condition
      - Ensure tenant satisfaction
      - Comply with regulations
      - Provide accurate reporting to owners

  # Vacancy Management Use Cases
  vacancy:
    - id: UC-PM-001
      name: List Vacant Units
      name_vi: Liệt kê các căn hộ trống
      description: View and manage vacant units in portfolio
      priority: P0
      frequency: daily

      preconditions:
        - Manager has property access

      main_flow:
        1: Manager navigates to "Vacancy Dashboard"
        2: System displays vacant units
           - Unit details
           - Days vacant
           - Rental rate
           - Listing status
           - Last tenant move-out date
        3: Manager can filter by property
        4: Manager can sort by vacancy duration
        5: Manager can take actions
           - Create listing
           - Adjust price
           - Schedule make-ready

      displayed_metrics:
        - total_vacant_units
        - vacancy_rate
        - average_days_vacant
        - total_potential_rent_loss
        - units_pending_make_ready

      postconditions:
        - Vacancy status visible
        - Actions available

      acceptance_criteria:
        - All vacant units displayed
        - Filtering works correctly
        - Metrics calculated accurately

    - id: UC-PM-002
      name: Manage Unit Make-Ready
      name_vi: Quản lý chuẩn bị căn hộ
      description: Coordinate unit turnover and preparation
      priority: P1
      frequency: weekly

      preconditions:
        - Unit is vacant or tenant moving out

      main_flow:
        1: Manager views unit status
        2: Manager creates make-ready checklist
           - Cleaning requirements
           - Repairs needed
           - Paint/flooring
           - Appliance check
        3: Manager assigns tasks to vendors/staff
        4: Manager schedules inspections
        5: Manager tracks completion
        6: Manager marks unit ready for showing

      make_ready_tasks:
        - deep_cleaning
        - carpet_cleaning_replacement
        - paint_touch_up
        - appliance_check
        - hvac_filter_change
        - smoke_detector_test
        - lock_rekey
        - final_inspection

      postconditions:
        - Make-ready work scheduled
        - Unit ready for new tenant

  # Tenant Screening Use Cases
  screening:
    - id: UC-PM-010
      name: Screen Applicants
      name_vi: Sàng lọc người nộp đơn
      description: Review and process rental applications
      priority: P0
      frequency: daily

      preconditions:
        - Application submitted by prospective tenant

      main_flow:
        1: Manager navigates to "Applications"
        2: System displays pending applications
        3: Manager reviews application
           - Personal information
           - Employment details
           - Income verification
           - Rental history
        4: Manager initiates background check
        5: System returns screening results
           - Credit report
           - Criminal background
           - Eviction history
           - Reference verification
        6: Manager reviews screening results
        7: Manager makes decision
           - Approve
           - Deny (with reason)
           - Approve with conditions
        8: System notifies applicant

      screening_criteria:
        income:
          minimum_ratio: 3x monthly rent
          documentation: [pay_stubs, tax_returns, bank_statements]
        credit:
          minimum_score: 600
          red_flags: [bankruptcy, collections, eviction]
        background:
          check_types: [identity, criminal, eviction]
          disqualifying: [violent_crimes, fraud]
        rental_history:
          previous_landlord_contact: true
          minimum_history: 1 year

      postconditions:
        - Application processed
        - Decision recorded
        - Applicant notified

      acceptance_criteria:
        - Screening completed within 24-48 hours
        - Decision documented with reason
        - Fair housing compliance ensured

    - id: UC-PM-011
      name: Process Adverse Action
      name_vi: Xử lý từ chối đơn
      description: Handle application denial properly
      priority: P1
      frequency: as_needed

      preconditions:
        - Application denied based on screening

      main_flow:
        1: Manager selects denial reason
        2: System generates adverse action notice
        3: Manager reviews notice
        4: System sends to applicant
           - Reason for denial
           - Credit bureau information
           - Dispute rights

      compliance_requirements:
        - fair_housing_compliance
        - fcra_compliance
        - adverse_action_notice
        - appeal_process

      postconditions:
        - Adverse action documented
        - Applicant notified properly
        - Records retained

  # Lease Management Use Cases
  lease:
    - id: UC-PM-020
      name: Create Lease
      name_vi: Tạo hợp đồng thuê
      description: Generate lease agreement for approved tenant
      priority: P0
      frequency: weekly

      preconditions:
        - Application approved
        - Unit assigned

      main_flow:
        1: Manager navigates to "Create Lease"
        2: System pre-fills information
           - Tenant details
           - Unit details
           - Rental rate
        3: Manager configures lease terms
           - Start date
           - Lease duration
           - Monthly rent
           - Security deposit
           - Pet policy
           - Utility responsibility
        4: Manager adds special provisions
        5: Manager generates lease document
        6: System sends for electronic signature
        7: All parties sign lease
        8: System activates lease

      lease_components:
        - tenant_information
        - unit_details
        - term_and_rent
        - security_deposit
        - utilities_included
        - pet_policy
        - rules_and_regulations
        - addendums
        - signatures

      postconditions:
        - Lease created and signed
        - Tenant account activated
        - Move-in process initiated

    - id: UC-PM-021
      name: Process Move-In
      name_vi: Xử lý nhận nhà
      description: Complete tenant move-in process
      priority: P0
      frequency: weekly

      preconditions:
        - Lease signed
        - Deposits collected
        - Unit ready

      main_flow:
        1: Manager verifies all requirements
           - Lease signed
           - Deposit received
           - First month rent paid
           - Insurance verified (if required)
        2: Manager schedules move-in inspection
        3: Manager conducts inspection with tenant
        4: Manager documents unit condition
           - Photos
           - Condition checklist
           - Meter readings
        5: Manager provides keys and access
        6: Manager provides move-in packet
           - Welcome letter
           - Rules and regulations
           - Emergency contacts
           - Utility setup info
        7: System updates unit status to occupied

      move_in_checklist:
        - lease_executed
        - security_deposit_collected
        - first_month_rent_collected
        - renters_insurance_verified
        - move_in_inspection_completed
        - keys_provided
        - access_cards_programmed
        - utilities_transferred
        - welcome_packet_provided

      postconditions:
        - Tenant moved in
        - Unit marked occupied
        - Documentation complete

    - id: UC-PM-022
      name: Manage Lease Renewals
      name_vi: Quản lý gia hạn hợp đồng
      description: Process lease renewals for expiring leases
      priority: P1
      frequency: daily

      preconditions:
        - Leases approaching expiration

      main_flow:
        1: Manager views renewal queue
        2: System shows leases expiring in 60-90 days
        3: Manager reviews tenant history
           - Payment history
           - Violations
           - Maintenance history
        4: Manager determines renewal terms
           - Rent adjustment
           - Term options
        5: Manager sends renewal offer
        6: Tenant responds
        7: If accepted, generate renewal
        8: If declined, schedule move-out

      renewal_considerations:
        - market_rent_analysis
        - tenant_payment_history
        - lease_violations
        - property_condition
        - owner_preferences

      postconditions:
        - Renewal processed or move-out scheduled

  # Rent Collection Use Cases
  rent:
    - id: UC-PM-030
      name: Collect Rent
      name_vi: Thu tiền thuê
      description: Manage rent collection process
      priority: P0
      frequency: daily

      main_flow:
        1: Manager navigates to "Rent Roll"
        2: System displays payment status
           - Paid
           - Pending
           - Overdue
        3: Manager can record payments
           - Manual payment entry
           - Check deposit
           - Cash receipt
        4: Manager applies payments to charges
        5: Manager generates receipts

      payment_tracking:
        - total_rent_due
        - total_collected
        - outstanding_balance
        - delinquency_rate

      postconditions:
        - Payments recorded
        - Receipts generated
        - Ledger updated

    - id: UC-PM-031
      name: Process Late Payments
      name_vi: Xử lý thanh toán trễ
      description: Handle overdue rent and late fees
      priority: P0
      frequency: daily

      preconditions:
        - Rent past due date and grace period

      main_flow:
        1: System flags overdue accounts
        2: Manager reviews delinquent tenants
        3: Manager applies late fees
        4: Manager sends late notices
           - First reminder
           - Late notice
           - Pay or quit notice
        5: Manager tracks payment arrangements
        6: Manager escalates to collections if needed

      delinquency_process:
        day_1: rent_due_reminder
        day_6: late_fee_applied
        day_7: late_notice_sent
        day_10: phone_call
        day_14: demand_letter
        day_30: legal_notice
        day_45: eviction_filing

      postconditions:
        - Late fees applied
        - Notices sent
        - Escalation tracked

    - id: UC-PM-032
      name: Issue Late Notices
      name_vi: Gửi thông báo trễ hạn
      description: Generate and send delinquency notices
      priority: P0
      frequency: weekly

      preconditions:
        - Rent overdue per policy

      main_flow:
        1: Manager selects delinquent accounts
        2: Manager chooses notice type
           - Friendly reminder
           - Formal late notice
           - Pay or quit notice
           - Legal notice
        3: System generates notice
        4: Manager reviews and sends
        5: System tracks delivery

      notice_types:
        - friendly_reminder:
            timing: day 3-5
            tone: courteous
            legal_weight: none
        - late_notice:
            timing: day 6-7
            tone: formal
            legal_weight: low
        - pay_or_quit:
            timing: day 10-14
            tone: legal
            legal_weight: medium
        - legal_notice:
            timing: day 30+
            tone: formal_legal
            legal_weight: high

      postconditions:
        - Notice generated
        - Delivery tracked
        - Records maintained

  # Maintenance Management Use Cases
  maintenance:
    - id: UC-PM-040
      name: Manage Maintenance Requests
      name_vi: Quản lý yêu cầu bảo trì
      description: Process and coordinate maintenance requests
      priority: P0
      frequency: daily

      main_flow:
        1: Manager views maintenance queue
        2: System displays requests by priority
           - Emergency
           - Urgent
           - Normal
           - Low
        3: Manager reviews request details
        4: Manager determines action
           - Assign to staff
           - Assign to vendor
           - Request more info
           - Close (not warranted)
        5: Manager schedules work
        6: Manager tracks completion

      queue_views:
        - new_requests
        - in_progress
        - pending_parts
        - scheduled
        - completed_today
        - overdue

      postconditions:
        - Requests triaged
        - Work assigned
        - SLA tracked

    - id: UC-PM-041
      name: Assign Work Orders
      name_vi: Phân công công việc bảo trì
      description: Create and assign work orders to vendors
      priority: P0
      frequency: daily

      preconditions:
        - Maintenance request requires vendor

      main_flow:
        1: Manager creates work order
        2: Manager selects vendor based on
           - Category specialization
           - Availability
           - Pricing
           - Performance history
        3: Manager provides work details
           - Scope of work
           - Access instructions
           - Budget approval
        4: Manager sends to vendor
        5: Vendor confirms acceptance
        6: Manager tracks progress

      work_order_details:
        - request_reference
        - property_unit
        - work_description
        - priority_level
        - budget_estimate
        - access_instructions
        - tenant_contact
        - completion_deadline

      postconditions:
        - Work order created
        - Vendor assigned
        - Tracking enabled

    - id: UC-PM-042
      name: Conduct Inspections
      name_vi: Thực hiện kiểm tra
      description: Perform routine and special inspections
      priority: P1
      frequency: periodic

      inspection_types:
        - move_in:
            frequency: once
            required: true
        - move_out:
            frequency: once
            required: true
        - routine:
            frequency: annual
            required: recommended
        - complaint:
            frequency: as_needed
            required: if_reported
        - safety:
            frequency: annual
            required: true

      main_flow:
        1: Manager schedules inspection
        2: Manager provides required notice (24-48 hrs)
        3: Manager conducts inspection
        4: Manager completes checklist
           - Each room/area
           - Condition rating
           - Photos
           - Notes
        5: Manager generates report
        6: Manager follows up on issues

      inspection_checklist:
        areas:
          - living_room
          - bedrooms
          - bathrooms
          - kitchen
          - exterior
        items:
          - walls_ceilings
          - floors
          - windows_doors
          - appliances
          - plumbing
          - electrical
          - hvac
          - smoke_detectors

      postconditions:
        - Inspection documented
        - Issues identified
        - Follow-up scheduled

  # Move-Out Processing Use Cases
  move_out:
    - id: UC-PM-050
      name: Process Move-Out
      name_vi: Xử lý trả nhà
      description: Handle tenant move-out and turnover
      priority: P0
      frequency: weekly

      preconditions:
        - Notice received or lease ended

      main_flow:
        1: Manager receives notice to vacate
        2: Manager sends move-out instructions
        3: Manager schedules pre-move inspection
        4: Manager conducts final inspection
        5: Manager documents condition
           - Compare to move-in
           - Note damages
           - Take photos
        6: Manager calculates charges
           - Unpaid rent
           - Damages beyond normal wear
           - Cleaning costs
           - Other charges
        7: Manager processes deposit return

      move_out_checklist:
        - notice_received
        - pre_move_inspection
        - final_inspection
        - keys_returned
        - utilities_final_read
        - condition_documented
        - charges_calculated
        - deposit_disposition_sent

      postconditions:
        - Move-out completed
        - Deposit processed
        - Unit ready for turnover

    - id: UC-PM-051
      name: Return Deposits
      name_vi: Hoàn trả tiền đặt cọc
      description: Process security deposit returns
      priority: P0
      frequency: weekly

      preconditions:
        - Move-out inspection completed
        - All keys returned

      main_flow:
        1: Manager calculates deductions
           - Cleaning beyond normal
           - Damages beyond wear and tear
           - Unpaid rent/charges
           - Lease break fees
        2: Manager documents each deduction
           - Description
           - Amount
           - Photos/evidence
        3: Manager prepares itemized statement
        4: Manager processes refund
        5: System sends to forwarding address
        6: Records retained for compliance

      deduction_categories:
        - cleaning_excess
        - damage_repair
        - unpaid_rent
        - unpaid_utilities
        - early_termination_fee
        - lost_keys
        - lease_violations

      compliance:
        - return_deadline: 21-30 days (varies by jurisdiction)
        - itemized_statement: required
        - evidence: required for deductions

      postconditions:
        - Deposit disposition sent
        - Refund processed
        - Records complete

  # Reporting Use Cases
  reporting:
    - id: UC-PM-060
      name: Generate Reports
      name_vi: Tạo báo cáo
      description: Create operational and financial reports
      priority: P1
      frequency: periodic

      report_types:
        operational:
          - occupancy_report
          - vacancy_report
          - rent_roll
          - delinquency_report
          - maintenance_summary
          - inspection_schedule
        financial:
          - income_statement
          - expense_report
          - owner_statement
          - budget_variance
          - accounts_receivable
        compliance:
          - lease_expiration_report
          - insurance_tracking
          - inspection_compliance

      main_flow:
        1: Manager selects report type
        2: Manager sets parameters
           - Date range
           - Properties
           - Grouping
        3: System generates report
        4: Manager reviews
        5: Manager exports/shares

      postconditions:
        - Report generated
        - Data accurate
        - Export available

    - id: UC-PM-061
      name: Send Owner Statements
      name_vi: Gửi báo cáo cho chủ nhà
      description: Generate and send monthly owner reports
      priority: P0
      frequency: monthly

      main_flow:
        1: System compiles monthly data
        2: Manager reviews statement
           - Income
           - Expenses
           - Net operating income
           - Cash flow
        3: Manager approves statement
        4: System sends to owner
        5: Manager processes distributions

      statement_sections:
        - rent_collected
        - other_income
        - operating_expenses
        - maintenance_costs
        - management_fees
        - net_operating_income
        - reserves
        - owner_distribution

      postconditions:
        - Statement sent
        - Owner notified
        - Distribution processed

  # Communication Use Cases
  communication:
    - id: UC-PM-070
      name: Communicate with Tenants
      name_vi: Giao tiếp với người thuê
      description: Send communications to tenants
      priority: P1
      frequency: daily

      communication_types:
        individual:
          - direct_message
          - email
          - phone_call
        bulk:
          - property_announcement
          - building_notice
          - maintenance_schedule
        automated:
          - payment_reminders
          - renewal_notices
          - inspection_schedules

      main_flow:
        1: Manager composes message
        2: Manager selects recipients
        3: Manager chooses channel
        4: Manager sends communication
        5: System tracks delivery

      postconditions:
        - Message delivered
        - Delivery tracked

  # Vendor Management Use Cases
  vendor:
    - id: UC-PM-080
      name: Manage Vendors
      name_vi: Quản lý nhà thầu
      description: Maintain vendor database and relationships
      priority: P2
      frequency: weekly

      main_flow:
        1: Manager navigates to "Vendors"
        2: Manager views vendor list
        3: Manager can
           - Add new vendor
           - Update information
           - View performance
           - Check insurance status
        4: Manager assigns to preferred list

      vendor_information:
        - company_name
        - contact_details
        - service_categories
        - pricing_rates
        - insurance_info
        - license_info
        - performance_rating
        - work_history

      postconditions:
        - Vendor database maintained
        - Performance tracked

  # Emergency Response Use Cases
  emergency:
    - id: UC-PM-090
      name: Handle Emergency
      name_vi: Xử lý tình huống khẩn cấp
      description: Respond to property emergencies
      priority: P0
      frequency: as_needed

      emergency_types:
        - fire
        - flood
        - break_in
        - major_damage
        - utility_failure
        - medical_emergency

      main_flow:
        1: Manager receives emergency alert
        2: Manager assesses situation
        3: Manager coordinates response
           - Emergency services if needed
           - Emergency vendors
           - Tenant communication
        4: Manager documents incident
        5: Manager follows up on resolution
        6: Manager files insurance claim if needed

      response_protocols:
        - assess_safety
        - contact_emergency_services
        - secure_property
        - notify_affected_parties
        - document_damage
        - coordinate_repairs
        - file_incident_report

      postconditions:
        - Emergency addressed
        - Incident documented
        - Insurance notified
