# Learning Path Entity
# F5 Framework v2.0 - Education/LMS
# Curated sequence of courses for skill development

entity:
  id: learning-path
  name: Learning Path
  name_ja: 学習パス
  description: Curated course sequence for comprehensive skill development
  domain: education
  subdomain: lms
  version: "1.0.0"

  attributes:
    id:
      type: uuid
      primary_key: true
      
    path_code:
      type: string
      max_length: 50
      unique: true
      pattern: "^LP-[A-Z0-9-]+$"
      
    # Basic Information
    title:
      type: string
      max_length: 200
      required: true
      
    subtitle:
      type: string
      max_length: 300
      
    description:
      type: text
      max_length: 5000
      supports_markdown: true
      
    slug:
      type: string
      max_length: 200
      unique: true
      
    # Status
    status:
      type: enum
      values: [draft, published, archived]
      default: draft
      
    # Path Type
    path_type:
      type: enum
      values:
        - sequential    # Must complete in order
        - flexible      # Any order
        - milestone     # Core + electives
      default: sequential
      
    # Classification
    category_id:
      type: uuid
      references: category
      
    tags:
      type: array
      items: string
      
    difficulty_level:
      type: enum
      values: [beginner, intermediate, advanced, expert]
      
    target_role:
      type: string
      max_length: 100
      description: Career role this path prepares for
      
    # Content
    courses:
      type: array
      items:
        type: object
        properties:
          course_id: uuid
          sequence: integer
          is_required: boolean
          milestone_name: string
          
    total_courses:
      type: integer
      computed: true
      
    required_courses_count:
      type: integer
      computed: true
      
    elective_courses_count:
      type: integer
      computed: true
      
    # Duration
    total_duration_hours:
      type: decimal
      precision: 6
      scale: 1
      computed: true
      
    estimated_completion_weeks:
      type: integer
      
    estimated_completion_months:
      type: integer
      
    # Learning Objectives
    learning_objectives:
      type: array
      items: string
      
    skills_gained:
      type: array
      items: string
      
    prerequisites:
      type: array
      items: uuid
      description: Prerequisite course or path IDs
      
    # Completion
    completion_criteria:
      type: enum
      values:
        - all_required    # All required courses
        - percentage      # X% of courses
        - points          # Earn X points
        - custom          # Custom rules
      default: all_required
      
    completion_threshold:
      type: integer
      description: Percentage or points required
      
    # Certificate
    certificate_enabled:
      type: boolean
      default: true
      
    certificate_template_id:
      type: uuid
      
    credential_name:
      type: string
      max_length: 100
      description: Title earned upon completion
      
    # Media
    image_url:
      type: string
      format: url
      
    promo_video_url:
      type: string
      format: url
      
    # Pricing (for bundled purchase)
    is_free:
      type: boolean
      default: true
      
    bundle_price:
      type: decimal
      precision: 10
      scale: 2
      description: Discounted price for whole path
      
    individual_price_total:
      type: decimal
      precision: 10
      scale: 2
      computed: true
      description: Sum of individual course prices
      
    currency:
      type: string
      format: iso_4217
      
    # Statistics
    total_enrollments:
      type: integer
      default: 0
      computed: true
      
    total_completions:
      type: integer
      default: 0
      computed: true
      
    average_completion_weeks:
      type: decimal
      precision: 5
      scale: 1
      computed: true
      
    average_rating:
      type: decimal
      precision: 3
      scale: 2
      computed: true
      
    # Creator
    created_by:
      type: uuid
      references: user
      
    # Metadata
    created_at:
      type: datetime
      auto_set: create
      
    updated_at:
      type: datetime
      auto_set: update
      
    published_at:
      type: datetime

  state_machine:
    field: status
    initial: draft
    transitions:
      - from: draft
        to: published
        action: publish
        conditions:
          - has_at_least_two_courses
        triggers:
          - index_for_search
          
      - from: published
        to: archived
        action: archive
        triggers:
          - hide_from_catalog

  relationships:
    courses:
      type: many_to_many
      entity: course
      through: learning_path_course
      
    category:
      type: belongs_to
      entity: category
      foreign_key: category_id
      
    enrollments:
      type: has_many
      entity: learning_path_enrollment
      foreign_key: learning_path_id

  indexes:
    - columns: [path_code]
      unique: true
    - columns: [slug]
      unique: true
    - columns: [status]
    - columns: [category_id]

  audit:
    enabled: true
    track_changes: true
