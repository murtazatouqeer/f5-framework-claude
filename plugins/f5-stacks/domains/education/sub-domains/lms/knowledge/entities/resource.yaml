# Resource Entity
# F5 Framework v2.0 - Education/LMS
# Downloadable resources and supplementary materials

entity:
  id: resource
  name: Resource
  name_ja: リソース
  description: Downloadable files and supplementary learning materials
  domain: education
  subdomain: lms
  version: "1.0.0"

  attributes:
    id:
      type: uuid
      primary_key: true
      
    # Context
    course_id:
      type: uuid
      references: course
      
    module_id:
      type: uuid
      references: module
      
    lesson_id:
      type: uuid
      references: lesson
      
    # Basic Information
    title:
      type: string
      max_length: 200
      required: true
      
    description:
      type: text
      max_length: 1000
      
    # Resource Type
    resource_type:
      type: enum
      values:
        - document       # PDF, DOC, etc.
        - spreadsheet    # Excel, CSV
        - presentation   # PPT
        - image          # JPG, PNG
        - audio          # MP3, etc.
        - video          # MP4 (downloadable)
        - archive        # ZIP, RAR
        - code           # Source code files
        - link           # External link
        - template       # Reusable templates
        - exercise       # Practice exercises
        - cheatsheet     # Quick reference
        - ebook          # eBook files
      required: true
      
    # File Information
    file_url:
      type: string
      format: url
      
    file_name:
      type: string
      max_length: 255
      
    file_type:
      type: string
      max_length: 50
      description: MIME type
      
    file_extension:
      type: string
      max_length: 10
      
    file_size_bytes:
      type: bigint
      
    # External Link (for link type)
    external_url:
      type: string
      format: url
      
    # Access Control
    downloadable:
      type: boolean
      default: true
      
    requires_enrollment:
      type: boolean
      default: true
      
    is_preview:
      type: boolean
      default: false
      description: Available without enrollment
      
    # Display
    display_order:
      type: integer
      default: 0
      
    icon:
      type: string
      max_length: 50
      description: Icon class or emoji
      
    # Status
    status:
      type: enum
      values: [active, hidden, deleted]
      default: active
      
    # Analytics
    download_count:
      type: integer
      default: 0
      
    view_count:
      type: integer
      default: 0
      
    # Version Control
    version:
      type: string
      max_length: 20
      
    previous_version_id:
      type: uuid
      references: resource
      
    # Metadata
    uploaded_by:
      type: uuid
      references: user
      
    created_at:
      type: datetime
      auto_set: create
      
    updated_at:
      type: datetime
      auto_set: update

  relationships:
    course:
      type: belongs_to
      entity: course
      foreign_key: course_id
      
    module:
      type: belongs_to
      entity: module
      foreign_key: module_id
      
    lesson:
      type: belongs_to
      entity: lesson
      foreign_key: lesson_id
      
    uploader:
      type: belongs_to
      entity: user
      foreign_key: uploaded_by
      
    previous_version:
      type: belongs_to
      entity: resource
      foreign_key: previous_version_id

  indexes:
    - columns: [course_id, status]
    - columns: [lesson_id, display_order]
    - columns: [module_id]
    - columns: [resource_type]

  audit:
    enabled: true
    track_changes: true
