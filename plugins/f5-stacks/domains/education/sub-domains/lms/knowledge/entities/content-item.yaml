# Content Item Entity
# F5 Framework v2.0 - Education/LMS
# Individual content elements within lessons

entity:
  id: content-item
  name: Content Item
  name_ja: コンテンツアイテム
  description: Individual piece of content within a lesson
  domain: education
  subdomain: lms
  version: "1.0.0"

  attributes:
    id:
      type: uuid
      primary_key: true
      
    lesson_id:
      type: uuid
      references: lesson
      required: true
      
    # Basic Information
    title:
      type: string
      max_length: 200
      
    # Ordering
    sequence_order:
      type: integer
      required: true
      min: 1
      
    # Content Type
    content_type:
      type: enum
      values:
        - text
        - video
        - audio
        - image
        - document
        - embed
        - interactive
        - scorm_package
        - h5p
        - code_block
        - quiz_inline
      required: true
      
    # Generic Content Data
    content_data:
      type: json
      description: Type-specific content configuration
      
    # File Information
    file_url:
      type: string
      format: url
      
    file_size_bytes:
      type: bigint
      
    file_type:
      type: string
      max_length: 50
      description: MIME type
      
    file_name:
      type: string
      max_length: 255
      
    # Duration (for media)
    duration_seconds:
      type: integer
      
    # Text Content
    html_content:
      type: text
      description: Rich text HTML content
      
    markdown_content:
      type: text
      description: Markdown source
      
    # Video Content
    video_url:
      type: string
      format: url
      
    video_provider:
      type: enum
      values: [internal, youtube, vimeo, wistia, cloudflare]
      
    thumbnail_url:
      type: string
      format: url
      
    captions:
      type: array
      items:
        type: object
        properties:
          language: string
          url: string
          is_auto_generated: boolean
          
    # Audio Content
    audio_url:
      type: string
      format: url
      
    audio_waveform_data:
      type: json
      
    # Image Content
    image_url:
      type: string
      format: url
      
    image_alt_text:
      type: string
      max_length: 500
      
    image_width:
      type: integer
      
    image_height:
      type: integer
      
    # Embed Content
    embed_code:
      type: text
      description: HTML embed code
      
    embed_url:
      type: string
      format: url
      
    embed_provider:
      type: string
      examples: ["codepen", "codesandbox", "figma", "miro"]
      
    # Interactive Content
    interaction_type:
      type: enum
      values:
        - quiz_inline
        - flashcard
        - drag_drop
        - fill_blank
        - matching
        - sorting
        - hotspot
        - timeline
      
    interaction_data:
      type: json
      description: Interaction configuration
      
    # SCORM/xAPI Content
    scorm_version:
      type: enum
      values: ["1.2", "2004"]
      
    scorm_package_url:
      type: string
      format: url
      
    launch_url:
      type: string
      
    xapi_activity_id:
      type: string
      format: iri
      
    # Code Block
    code_language:
      type: string
      examples: ["javascript", "python", "java", "html", "css"]
      
    code_content:
      type: text
      
    code_runnable:
      type: boolean
      default: false
      
    # Tracking
    trackable:
      type: boolean
      default: true
      
    xapi_verb:
      type: string
      description: xAPI verb for tracking
      
    # Display Settings
    display_mode:
      type: enum
      values: [inline, modal, fullscreen, popup]
      default: inline
      
    is_collapsible:
      type: boolean
      default: false
      
    default_collapsed:
      type: boolean
      default: false
      
    # Metadata
    created_at:
      type: datetime
      auto_set: create
      
    updated_at:
      type: datetime
      auto_set: update

  relationships:
    lesson:
      type: belongs_to
      entity: lesson
      foreign_key: lesson_id

  indexes:
    - columns: [lesson_id, sequence_order]
      unique: true
    - columns: [content_type]

  audit:
    enabled: true
    track_changes: true
