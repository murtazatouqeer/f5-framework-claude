# Course Creation Workflow
# F5 Framework v2.0 - Education/LMS
# End-to-end workflow for course creation and publishing

workflow:
  id: course-creation-workflow
  name: Course Creation Workflow
  name_ja: コース作成ワークフロー
  description: Complete workflow for creating and publishing a course
  domain: education
  subdomain: lms
  version: "1.0.0"

  actors:
    primary:
      - instructor
      - content_creator
    supporting:
      - course_admin
      - reviewer
      - qa_specialist
    system:
      - video_processor
      - content_validator

  triggers:
    - event: new_course_initiated
      source: instructor_dashboard
    - event: course_draft_started
      source: course_wizard

  states:
    draft:
      description: Initial course setup
      name_ja: 下書き
      
    content_development:
      description: Adding modules, lessons, and content
      name_ja: コンテンツ開発
      
    review:
      description: Under review for quality and compliance
      name_ja: レビュー中
      
    revision:
      description: Revisions based on review feedback
      name_ja: 修正中
      
    pending_approval:
      description: Awaiting final approval
      name_ja: 承認待ち
      
    approved:
      description: Approved for publishing
      name_ja: 承認済み
      
    publishing:
      description: Being prepared for publication
      name_ja: 公開準備中
      
    published:
      description: Live and available to learners
      name_ja: 公開済み
      
    archived:
      description: No longer actively available
      name_ja: アーカイブ済み

  stages:
    # Stage 1: Course Setup
    - id: course_setup
      name: Course Setup
      name_ja: コース設定
      state: draft
      
      steps:
        - id: create_course_shell
          name: Create Course Shell
          actor: instructor
          action: create_course
          inputs:
            - title
            - description
            - category
            - language
            - target_audience
          outputs:
            - course_id
            - course_draft
          validations:
            - title_length: 5-200 characters
            - description_required: true
            
        - id: set_course_settings
          name: Configure Course Settings
          actor: instructor
          action: configure_settings
          inputs:
            - pricing_model
            - access_duration
            - certificate_enabled
            - delivery_mode
          ui: settings_form
          
        - id: upload_thumbnail
          name: Upload Course Thumbnail
          actor: instructor
          action: upload_media
          inputs:
            - thumbnail_image
          validations:
            - format: [jpg, png, webp]
            - min_resolution: 1280x720
            - max_size: 2MB
            
        - id: set_learning_objectives
          name: Define Learning Objectives
          actor: instructor
          action: add_objectives
          inputs:
            - objectives_list
          guidance:
            - start_with_action_verb
            - measurable_outcome
            - learner_focused
            
      completion_criteria:
        required:
          - course_shell_created
          - basic_settings_configured
        optional:
          - thumbnail_uploaded
          - objectives_defined

    # Stage 2: Curriculum Design
    - id: curriculum_design
      name: Curriculum Design
      name_ja: カリキュラム設計
      state: draft
      
      steps:
        - id: create_modules
          name: Create Course Modules
          actor: instructor
          action: create_modules
          inputs:
            - module_titles
            - module_descriptions
            - module_order
          repeatable: true
          min_count: 1
          
        - id: create_lessons
          name: Create Lessons
          actor: instructor
          action: create_lessons
          inputs:
            - lesson_title
            - lesson_type
            - duration_estimate
            - module_assignment
          repeatable: true
          min_per_module: 1
          
        - id: set_prerequisites
          name: Configure Prerequisites
          actor: instructor
          action: set_prerequisites
          inputs:
            - course_prerequisites
            - module_prerequisites
            - lesson_prerequisites
            
        - id: configure_completion
          name: Set Completion Rules
          actor: instructor
          action: configure_completion
          inputs:
            - module_completion_criteria
            - course_completion_threshold
            - certificate_requirements
            
      completion_criteria:
        required:
          - at_least_one_module
          - at_least_one_lesson_per_module
        validation:
          - curriculum_structure_valid

    # Stage 3: Content Development
    - id: content_development
      name: Content Development
      name_ja: コンテンツ開発
      state: content_development
      
      steps:
        - id: create_video_content
          name: Create Video Lessons
          actor: instructor
          action: upload_video
          inputs:
            - video_file
            - caption_file
          processing:
            - transcode_to_hls
            - generate_thumbnails
            - extract_duration
            - auto_generate_captions
          for_each: lesson.type == 'video'
          
        - id: create_text_content
          name: Create Text/Article Content
          actor: instructor
          action: create_article
          inputs:
            - content_markdown
            - images
            - code_blocks
          for_each: lesson.type == 'article'
          
        - id: create_quizzes
          name: Create Quizzes
          actor: instructor
          action: create_quiz
          inputs:
            - questions
            - answers
            - scoring_settings
            - time_limit
          question_types:
            - multiple_choice
            - multiple_select
            - true_false
            - fill_in_blank
            - matching
          for_each: lesson.type == 'quiz'
          
        - id: create_assignments
          name: Create Assignments
          actor: instructor
          action: create_assignment
          inputs:
            - instructions
            - rubric
            - due_date_offset
            - submission_types
          for_each: lesson.type == 'assignment'
          
        - id: upload_resources
          name: Upload Resources
          actor: instructor
          action: upload_resources
          inputs:
            - resource_files
            - resource_descriptions
          file_types:
            - documents: [pdf, doc, docx]
            - spreadsheets: [xls, xlsx, csv]
            - presentations: [ppt, pptx]
            - archives: [zip]
            
        - id: add_scorm_content
          name: Add SCORM Packages
          actor: instructor
          action: upload_scorm
          inputs:
            - scorm_package
          processing:
            - extract_package
            - validate_manifest
            - configure_tracking
          optional: true
          
      completion_criteria:
        required:
          - all_lessons_have_content
        validation:
          - videos_processed_successfully
          - quizzes_have_answers

    # Stage 4: Quality Review
    - id: quality_review
      name: Quality Review
      name_ja: 品質レビュー
      state: review
      
      steps:
        - id: submit_for_review
          name: Submit for Review
          actor: instructor
          action: submit_review
          triggers:
            - notify_reviewers
            - create_review_task
            
        - id: content_review
          name: Content Quality Review
          actor: reviewer
          action: review_content
          checklist:
            - content_accuracy
            - content_completeness
            - content_clarity
            - grammar_spelling
            - formatting_consistency
          outputs:
            - review_comments
            - review_decision
            
        - id: technical_review
          name: Technical Quality Review
          actor: qa_specialist
          action: review_technical
          checklist:
            - video_quality
            - audio_quality
            - accessibility_compliance
            - link_validity
            - interactive_elements_working
          outputs:
            - technical_issues
            - technical_decision
            
        - id: compliance_review
          name: Compliance Review
          actor: reviewer
          action: review_compliance
          checklist:
            - copyright_clearance
            - accessibility_wcag
            - privacy_compliance
            - content_policy_compliance
          outputs:
            - compliance_issues
            - compliance_decision
            
      completion_criteria:
        required:
          - all_reviews_completed
        decision:
          approve: all_reviews_passed
          revise: any_review_has_issues
          reject: critical_issues_found

    # Stage 5: Revisions (if needed)
    - id: revisions
      name: Revisions
      name_ja: 修正
      state: revision
      conditional: review_requires_changes
      
      steps:
        - id: address_feedback
          name: Address Review Feedback
          actor: instructor
          action: revise_content
          inputs:
            - review_comments
          tracking:
            - changes_made
            - comments_addressed
            
        - id: resubmit
          name: Resubmit for Review
          actor: instructor
          action: resubmit_review
          triggers:
            - notify_reviewers
            - increment_revision_count
            
      loop:
        max_iterations: 3
        exit_condition: review_approved

    # Stage 6: Final Approval
    - id: final_approval
      name: Final Approval
      name_ja: 最終承認
      state: pending_approval
      
      steps:
        - id: approval_request
          name: Request Final Approval
          actor: instructor
          action: request_approval
          triggers:
            - notify_admin
            
        - id: admin_approval
          name: Administrative Approval
          actor: course_admin
          action: approve_course
          checklist:
            - review_completed
            - pricing_configured
            - legal_compliance
            - marketing_ready
          outputs:
            - approval_decision
            - approval_notes
            
      completion_criteria:
        required:
          - admin_approval_granted

    # Stage 7: Publishing
    - id: publishing
      name: Publishing
      name_ja: 公開
      state: publishing
      
      steps:
        - id: pre_publish_checks
          name: Pre-publish Checks
          actor: system
          action: validate_publish_ready
          checks:
            - all_content_uploaded
            - all_settings_configured
            - pricing_set
            - thumbnail_exists
            - category_assigned
            
        - id: set_publish_date
          name: Set Publish Date
          actor: instructor
          action: schedule_publish
          inputs:
            - publish_date
            - visibility
          options:
            - publish_immediately
            - schedule_future
            - publish_hidden
            
        - id: generate_marketing
          name: Generate Marketing Assets
          actor: system
          action: generate_assets
          outputs:
            - social_share_images
            - email_templates
            - landing_page_preview
            
        - id: publish_course
          name: Publish Course
          actor: system
          action: publish
          triggers:
            - update_course_status
            - index_for_search
            - notify_instructor
            - notify_waitlist
            
      completion_criteria:
        required:
          - course_status_published

  transitions:
    - from: draft
      to: content_development
      trigger: curriculum_completed
      
    - from: content_development
      to: review
      trigger: submit_for_review
      
    - from: review
      to: revision
      trigger: review_requires_changes
      
    - from: review
      to: pending_approval
      trigger: review_approved
      
    - from: revision
      to: review
      trigger: revisions_submitted
      
    - from: pending_approval
      to: approved
      trigger: admin_approved
      
    - from: pending_approval
      to: revision
      trigger: admin_requests_changes
      
    - from: approved
      to: publishing
      trigger: publish_initiated
      
    - from: publishing
      to: published
      trigger: publish_completed
      
    - from: published
      to: archived
      trigger: archive_requested

  notifications:
    review_submitted:
      recipients: [reviewers, course_admin]
      template: course_review_request
      
    review_completed:
      recipients: [instructor]
      template: course_review_result
      
    approval_requested:
      recipients: [course_admin]
      template: course_approval_request
      
    course_approved:
      recipients: [instructor]
      template: course_approved
      
    course_published:
      recipients: [instructor, waitlist]
      template: course_now_available

  sla:
    review_completion: 3 business days
    approval_decision: 2 business days
    total_workflow: 14 days target

  metrics:
    track:
      - time_in_each_stage
      - revision_count
      - review_pass_rate
      - time_to_publish
