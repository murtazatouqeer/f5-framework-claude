# Content Authoring Workflow
# F5 Framework v2.0 - Education/LMS
# End-to-end workflow for content creation and management

workflow:
  id: content-authoring-workflow
  name: Content Authoring Workflow
  name_ja: コンテンツ作成ワークフロー
  description: Complete workflow for creating, editing, and managing learning content
  domain: education
  subdomain: lms
  version: "1.0.0"

  actors:
    primary:
      - instructor
      - content_creator
      - subject_matter_expert
    supporting:
      - editor
      - reviewer
      - accessibility_specialist
      - video_producer
    system:
      - media_processor
      - accessibility_checker
      - plagiarism_detector

  triggers:
    - event: new_content_initiated
      source: content_editor
    - event: content_revision_started
      source: course_management
    - event: bulk_upload_started
      source: import_tool

  content_types:
    video:
      extensions: [mp4, mov, avi, webm]
      max_size: 5GB
      processing: required
      
    article:
      formats: [markdown, html, rich_text]
      max_length: unlimited
      
    quiz:
      question_types: [mcq, msq, tf, fib, matching, ordering, numeric]
      
    assignment:
      submission_types: [file, text, link, code]
      
    scorm:
      versions: [1.2, 2004]
      
    interactive:
      types: [h5p, simulation, code_exercise]

  states:
    draft:
      description: Content being created
      name_ja: 下書き
      
    editing:
      description: Content being edited/refined
      name_ja: 編集中
      
    processing:
      description: Media being processed
      name_ja: 処理中
      
    review:
      description: Under review
      name_ja: レビュー中
      
    revision:
      description: Revisions needed
      name_ja: 修正中
      
    approved:
      description: Approved for use
      name_ja: 承認済み
      
    published:
      description: Live in course
      name_ja: 公開済み
      
    archived:
      description: No longer active
      name_ja: アーカイブ済み

  stages:
    # Stage 1: Content Planning
    - id: content_planning
      name: Content Planning
      name_ja: コンテンツ計画
      state: draft
      
      steps:
        - id: define_objectives
          name: Define Learning Objectives
          actor: instructor
          action: set_objectives
          inputs:
            - learning_outcomes
            - target_audience
            - difficulty_level
          guidance:
            bloom_taxonomy:
              - remember
              - understand
              - apply
              - analyze
              - evaluate
              - create
              
        - id: outline_content
          name: Create Content Outline
          actor: instructor
          action: create_outline
          inputs:
            - topics_covered
            - sequence
            - estimated_duration
            - assessment_points
            
        - id: gather_resources
          name: Gather Source Materials
          actor: subject_matter_expert
          action: collect_resources
          types:
            - reference_documents
            - existing_media
            - external_resources
            - expert_interviews
            
        - id: plan_assessments
          name: Plan Assessments
          actor: instructor
          action: design_assessments
          outputs:
            - quiz_blueprint
            - assignment_rubrics
            - assessment_schedule
            
      completion_criteria:
        required:
          - objectives_defined
          - outline_created

    # Stage 2: Video Production
    - id: video_production
      name: Video Production
      name_ja: 動画制作
      state: draft
      conditional: content_type == 'video'
      
      steps:
        - id: script_writing
          name: Write Video Script
          actor: instructor
          action: write_script
          inputs:
            - script_text
            - talking_points
            - visual_cues
          optional: true
          
        - id: record_video
          name: Record Video
          actor: instructor
          action: record
          options:
            - screen_recording
            - webcam_recording
            - studio_recording
            - mixed_media
          quality_requirements:
            - resolution: 1080p minimum
            - audio: clear, no background noise
            - lighting: adequate
            
        - id: upload_video
          name: Upload Video File
          actor: instructor
          action: upload
          inputs:
            - video_file
          validations:
            - format_supported
            - size_within_limit
            - duration_reasonable
            
        - id: process_video
          name: Process Video
          actor: system
          action: transcode
          processing:
            - transcode_to_hls
            - generate_multiple_qualities
            - extract_thumbnails
            - detect_scenes
          outputs:
            - streaming_urls
            - thumbnails
            - duration
            
        - id: add_captions
          name: Add Captions
          actor: system
          action: generate_captions
          methods:
            - auto_generate:
                service: speech_to_text
                accuracy: ~95%
            - upload_srt:
                format: srt, vtt
            - manual_entry:
                editor: caption_editor
                
        - id: review_captions
          name: Review Captions
          actor: instructor
          action: review_captions
          features:
            - inline_editing
            - timestamp_adjustment
            - speaker_labels
            
        - id: add_chapters
          name: Add Video Chapters
          actor: instructor
          action: add_chapters
          inputs:
            - chapter_markers
            - chapter_titles
          optional: true
          
      completion_criteria:
        required:
          - video_processed
          - captions_added
        recommended:
          - captions_reviewed
          - chapters_added

    # Stage 3: Article Creation
    - id: article_creation
      name: Article Creation
      name_ja: 記事作成
      state: draft
      conditional: content_type == 'article'
      
      steps:
        - id: write_content
          name: Write Article Content
          actor: instructor
          action: compose
          editor: rich_text_editor
          features:
            - markdown_support
            - code_blocks
            - math_equations
            - embeds
            - tables
            
        - id: add_media
          name: Add Media Elements
          actor: instructor
          action: add_media
          types:
            - images
            - diagrams
            - infographics
            - embedded_videos
            
        - id: format_content
          name: Format Content
          actor: instructor
          action: format
          elements:
            - headings
            - lists
            - callouts
            - highlights
            
        - id: add_interactive
          name: Add Interactive Elements
          actor: instructor
          action: add_interactive
          types:
            - knowledge_checks
            - expandable_sections
            - tabs
            - tooltips
          optional: true
          
        - id: estimate_read_time
          name: Calculate Read Time
          actor: system
          action: calculate
          formula: word_count / 200 (wpm)
          
      completion_criteria:
        required:
          - content_written
          - properly_formatted

    # Stage 4: Quiz Creation
    - id: quiz_creation
      name: Quiz Creation
      name_ja: クイズ作成
      state: draft
      conditional: content_type == 'quiz'
      
      steps:
        - id: create_questions
          name: Create Questions
          actor: instructor
          action: add_questions
          question_types:
            multiple_choice:
              options: 2-6
              correct: single
            multiple_select:
              options: 3-8
              correct: multiple
            true_false:
              options: 2
            fill_in_blank:
              blanks: 1-5
              alternatives: supported
            matching:
              pairs: 3-10
            ordering:
              items: 3-10
            numeric:
              tolerance: configurable
              
        - id: add_explanations
          name: Add Answer Explanations
          actor: instructor
          action: add_explanations
          for_each: question
          includes:
            - correct_explanation
            - incorrect_explanation
            - reference_links
            
        - id: configure_settings
          name: Configure Quiz Settings
          actor: instructor
          action: configure
          settings:
            - time_limit
            - max_attempts
            - passing_score
            - question_randomization
            - answer_randomization
            - show_correct_answers
            - feedback_timing
            
        - id: preview_quiz
          name: Preview Quiz
          actor: instructor
          action: preview
          modes:
            - learner_view
            - test_run
            
      completion_criteria:
        required:
          - questions_created
          - answers_set
          - settings_configured

    # Stage 5: Assignment Creation
    - id: assignment_creation
      name: Assignment Creation
      name_ja: 課題作成
      state: draft
      conditional: content_type == 'assignment'
      
      steps:
        - id: write_instructions
          name: Write Assignment Instructions
          actor: instructor
          action: write
          includes:
            - task_description
            - requirements
            - deliverables
            - evaluation_criteria
            
        - id: create_rubric
          name: Create Grading Rubric
          actor: instructor
          action: create_rubric
          structure:
            criteria:
              - name
              - weight
              - levels:
                  - score
                  - description
                  
        - id: set_submission
          name: Configure Submission Settings
          actor: instructor
          action: configure
          settings:
            - submission_types
            - file_types_allowed
            - max_file_size
            - max_submissions
            - late_policy
            
        - id: set_due_date
          name: Set Due Date
          actor: instructor
          action: set_deadline
          options:
            - fixed_date
            - relative_to_enrollment
            - relative_to_cohort_start
            
        - id: configure_peer_review
          name: Configure Peer Review
          actor: instructor
          action: setup_peer_review
          optional: true
          settings:
            - reviews_per_student
            - anonymity
            - deadline
            
      completion_criteria:
        required:
          - instructions_written
          - rubric_created

    # Stage 6: Quality Assurance
    - id: quality_assurance
      name: Quality Assurance
      name_ja: 品質保証
      state: review
      
      steps:
        - id: content_review
          name: Content Review
          actor: editor
          action: review
          checklist:
            accuracy:
              - factually_correct
              - up_to_date
              - properly_cited
            clarity:
              - clear_language
              - logical_flow
              - appropriate_level
            completeness:
              - covers_objectives
              - no_gaps
              - sufficient_examples
              
        - id: technical_review
          name: Technical Review
          actor: reviewer
          action: technical_check
          checklist:
            - links_working
            - media_loading
            - interactive_elements_functional
            - mobile_responsive
            
        - id: accessibility_review
          name: Accessibility Review
          actor: accessibility_specialist
          action: accessibility_check
          standards:
            - WCAG 2.1 AA
          checklist:
            - alt_text_for_images
            - captions_for_videos
            - color_contrast
            - keyboard_navigation
            - screen_reader_compatible
          tools:
            - automated_scanner
            - manual_testing
            
        - id: plagiarism_check
          name: Plagiarism Check
          actor: system
          action: check_originality
          conditional: content_type in ['article', 'assignment']
          threshold: 15%
          
        - id: legal_review
          name: Legal/Copyright Review
          actor: reviewer
          action: legal_check
          checklist:
            - copyright_cleared
            - proper_attribution
            - license_compliance
            - trademark_usage
            
      completion_criteria:
        required:
          - all_reviews_passed
          - accessibility_compliant

    # Stage 7: Revisions
    - id: revisions
      name: Revisions
      name_ja: 修正
      state: revision
      conditional: reviews_require_changes
      
      steps:
        - id: address_feedback
          name: Address Review Feedback
          actor: instructor
          action: revise
          inputs:
            - review_comments
          tracking:
            - changes_made
            - comments_resolved
            
        - id: resubmit
          name: Resubmit for Review
          actor: instructor
          action: resubmit
          triggers:
            - notify_reviewers
            
      loop:
        max_iterations: 3
        exit_condition: reviews_approved

    # Stage 8: Publishing
    - id: publishing
      name: Publishing
      name_ja: 公開
      state: approved
      
      steps:
        - id: final_preview
          name: Final Preview
          actor: instructor
          action: preview
          modes:
            - learner_view
            - all_devices
            
        - id: set_availability
          name: Set Availability
          actor: instructor
          action: configure_availability
          options:
            - immediately_available
            - scheduled_release
            - drip_schedule
            - hidden_until_manual
            
        - id: publish_content
          name: Publish Content
          actor: instructor
          action: publish
          actions:
            - update_status: published
            - index_for_search
            - notify_enrolled_learners (optional)
            
        - id: version_content
          name: Create Version Record
          actor: system
          action: version
          records:
            - version_number
            - published_date
            - change_summary
            
      completion_criteria:
        required:
          - content_published
          - version_recorded

    # Stage 9: Maintenance
    - id: maintenance
      name: Content Maintenance
      name_ja: コンテンツメンテナンス
      state: published
      ongoing: true
      
      steps:
        - id: monitor_feedback
          name: Monitor Learner Feedback
          actor: instructor
          action: review_feedback
          sources:
            - ratings
            - comments
            - questions
            - completion_rates
            
        - id: update_content
          name: Update Content
          actor: instructor
          action: edit
          triggers:
            - feedback_indicates_issues
            - content_outdated
            - errors_reported
          creates:
            - new_version
            
        - id: deprecate_content
          name: Deprecate Old Version
          actor: instructor
          action: deprecate
          conditional: major_update
          handles:
            - existing_learner_access
            - progress_migration
            
        - id: archive_content
          name: Archive Content
          actor: instructor
          action: archive
          conditional: content_no_longer_needed
          preserves:
            - completion_records
            - historical_access (optional)
            
      completion_criteria:
        ongoing: true

  transitions:
    - from: draft
      to: editing
      trigger: initial_content_created
      
    - from: draft
      to: processing
      trigger: media_uploaded
      condition: requires_processing
      
    - from: processing
      to: editing
      trigger: processing_complete
      
    - from: editing
      to: review
      trigger: submit_for_review
      
    - from: review
      to: revision
      trigger: changes_requested
      
    - from: review
      to: approved
      trigger: all_reviews_passed
      
    - from: revision
      to: review
      trigger: revisions_submitted
      
    - from: approved
      to: published
      trigger: publish_action
      
    - from: published
      to: editing
      trigger: update_initiated
      
    - from: published
      to: archived
      trigger: archive_action

  notifications:
    processing_complete:
      recipients: [content_creator]
      template: media_ready
      
    review_requested:
      recipients: [reviewers]
      template: content_review_request
      
    feedback_received:
      recipients: [content_creator]
      template: review_feedback
      
    content_approved:
      recipients: [content_creator]
      template: content_approved
      
    content_published:
      recipients: [content_creator, course_admin]
      template: content_live

  version_control:
    enabled: true
    strategy: semantic
    auto_version:
      major: breaking_changes
      minor: new_features
      patch: fixes_and_updates
    history:
      retention: unlimited
      diff_available: true

  collaboration:
    enabled: true
    features:
      - comments
      - suggestions
      - real_time_editing
      - version_comparison
      - role_based_access

  metrics:
    track:
      - time_to_create
      - revision_count
      - review_pass_rate
      - content_engagement
      - completion_correlation
