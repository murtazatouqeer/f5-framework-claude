# Verifier Use Cases
# F5 Framework v2.0 - Education/Certification
# Use cases for credential verifiers

use_cases:
  domain: education
  subdomain: certification
  actor: verifier
  version: "1.0.0"
  
  description: |
    Use cases for employers, HR systems, background check services,
    and other parties verifying credential authenticity.

  actor_profiles:
    - id: employer
      name: Employer/HR
      name_ja: 雇用主/人事
      description: Organizations verifying candidate credentials
      
      characteristics:
        - Hiring or promoting employees
        - Verifying qualifications
        - May use manual or API verification
        
      goals:
        - Confirm credential authenticity
        - Verify current validity
        - Assess candidate qualifications
        
    - id: api_client
      name: API Integration Client
      name_ja: API連携クライアント
      description: Systems integrating verification via API
      
      characteristics:
        - Background check services
        - HR management systems
        - Automated verification workflows
        
      goals:
        - Bulk verification capabilities
        - Real-time status checks
        - Audit trail maintenance
        
    - id: public_verifier
      name: Public Verifier
      name_ja: 一般検証者
      description: Anyone verifying via public methods
      
      characteristics:
        - Uses verification URL or code
        - No authentication required
        - Limited to public information
        
      goals:
        - Quick verification
        - Confirm basic credential validity

  use_case_groups:
    # ==========================================
    # Public Verification
    # ==========================================
    - group_id: public_verification
      name: Public Verification
      name_ja: 公開検証
      description: Verifying credentials without authentication
      
      use_cases:
        - id: UC-VRF-001
          name: Verify via URL
          name_ja: URL検証
          description: Verify credential using verification URL
          priority: high
          actor: public_verifier
          
          preconditions:
            - Verifier has verification URL
            - Credential exists in system
            
          main_flow:
            1: Open verification URL in browser
            2: System looks up credential
            3: System checks credential status
            4: Display verification result
            5: Show allowed credential details
            
          result_display:
            valid_credential:
              status: "✓ Verified"
              shows:
                - holder_display_name
                - credential_type
                - program_name
                - issuing_organization
                - issue_date
                - expiration_date
                - current_status
                
            expired_credential:
              status: "⚠ Expired"
              shows:
                - same_as_valid
                - expiration_notice
                - renewal_info_if_public
                
            revoked_credential:
              status: "✗ Revoked"
              shows:
                - holder_display_name
                - credential_type
                - revocation_notice
                - reason_if_public
                
            not_found:
              status: "? Not Found"
              shows:
                - check_code_message
                - contact_info
                
          postconditions:
            - Verification result displayed
            - Verification logged
            
        - id: UC-VRF-002
          name: Verify via Code Entry
          name_ja: コード入力検証
          description: Enter verification code manually
          priority: high
          actor: public_verifier
          
          preconditions:
            - Verifier has verification code
            - Verification page accessible
            
          main_flow:
            1: Navigate to verification page
            2: Enter verification code
            3: Click verify button
            4: System validates code format
            5: System looks up credential
            6: Display verification result
            
          code_formats_accepted:
            - with_dashes: "XXXX-XXXX-XXXX"
            - without_dashes: "XXXXXXXXXXXX"
            - case_insensitive: true
            
          error_handling:
            - invalid_format: "Please check the code format"
            - not_found: "No credential found with this code"
            - rate_limited: "Too many attempts, please wait"
            
          postconditions:
            - Verification complete
            - Result displayed
            
        - id: UC-VRF-003
          name: Verify via QR Scan
          name_ja: QRスキャン検証
          description: Scan QR code on certificate
          priority: high
          actor: public_verifier
          
          preconditions:
            - Certificate/badge has QR code
            - Device has camera access
            
          main_flow:
            1: Open camera or QR scanner
            2: Point at certificate QR code
            3: Scanner reads verification URL
            4: Browser opens verification page
            5: Display verification result
            
          mobile_optimizations:
            - responsive_design
            - touch_friendly
            - quick_load_time
            
          postconditions:
            - Verification displayed
            - Mobile-friendly experience
            
        - id: UC-VRF-004
          name: View Verification Details
          name_ja: 検証詳細表示
          description: See additional details after verification
          priority: medium
          actor: public_verifier
          
          preconditions:
            - Verification completed
            - Credential is valid
            
          main_flow:
            1: View basic verification result
            2: Click for more details
            3: View skills if public
            4: View issuer information
            5: View blockchain proof if available
            
          additional_details:
            skills:
              condition: "holder.show_skills = true"
              display: "List of skills with levels"
              
            issuer:
              display:
                - organization_name
                - organization_url
                - accreditations
                
            blockchain:
              condition: "credential.blockchain_enabled"
              display:
                - verification_status
                - transaction_hash
                - block_explorer_link
                
          postconditions:
            - Details displayed as permitted

    # ==========================================
    # API Verification
    # ==========================================
    - group_id: api_verification
      name: API Verification
      name_ja: API検証
      description: Programmatic verification via API
      
      use_cases:
        - id: UC-VRF-010
          name: Register for API Access
          name_ja: APIアクセス登録
          description: Register to use verification API
          priority: high
          actor: api_client
          
          preconditions:
            - Organization has legitimate verification need
            
          main_flow:
            1: Navigate to API registration
            2: Create developer account
            3: Submit organization information
            4: Select API plan
            5: Accept terms of service
            6: Receive API key
            7: Access documentation
            
          registration_info:
            required:
              - organization_name
              - organization_type
              - contact_email
              - use_case_description
              
            optional:
              - website_url
              - expected_volume
              
          api_plans:
            free:
              requests_per_day: 100
              features: [single_verification]
              
            basic:
              requests_per_day: 1000
              features: [single, batch_10]
              price: "$50/month"
              
            professional:
              requests_per_day: 10000
              features: [single, batch_50, webhooks]
              price: "$200/month"
              
            enterprise:
              requests_per_day: unlimited
              features: [all]
              price: "Contact sales"
              
          postconditions:
            - Account created
            - API key issued
            - Documentation access granted
            
        - id: UC-VRF-011
          name: Verify Single Credential via API
          name_ja: API単一資格検証
          description: Verify one credential programmatically
          priority: high
          actor: api_client
          
          preconditions:
            - Valid API key
            - Within rate limits
            
          main_flow:
            1: Construct API request
            2: Include API key in header
            3: Send verification code in body
            4: System authenticates request
            5: System verifies credential
            6: Return JSON response
            
          api_request:
            endpoint: "POST /api/v1/verify"
            headers:
              X-API-Key: "your_api_key"
            body:
              code: "verification_code"
              
          api_response_success:
            status: "verified"
            credential:
              type: "certificate"
              holder_name: "John Doe"
              program_name: "AWS Solutions Architect"
              issued_at: "2024-03-15T00:00:00Z"
              valid_until: "2027-03-15T00:00:00Z"
              status: "active"
              issuer:
                name: "Amazon Web Services"
                url: "https://aws.amazon.com"
            verified_at: "2024-06-01T14:30:00Z"
            
          api_response_not_found:
            status: "not_found"
            message: "Credential not found"
            
          postconditions:
            - Verification result returned
            - API usage logged
            
        - id: UC-VRF-012
          name: Bulk Verify Credentials
          name_ja: 一括資格検証
          description: Verify multiple credentials in one request
          priority: medium
          actor: api_client
          
          preconditions:
            - API plan supports bulk verification
            - Within batch size limits
            
          main_flow:
            1: Construct bulk request
            2: Include array of verification codes
            3: Send request
            4: System processes all codes
            5: Return consolidated response
            
          api_request:
            endpoint: "POST /api/v1/verify/bulk"
            headers:
              X-API-Key: "your_api_key"
            body:
              codes:
                - "code1"
                - "code2"
                - "code3"
                
          api_response:
            summary:
              total: 3
              valid: 2
              invalid: 0
              not_found: 1
            results:
              - code: "code1"
                status: "verified"
                credential: {...}
              - code: "code2"
                status: "verified"
                credential: {...}
              - code: "code3"
                status: "not_found"
                
          postconditions:
            - All codes processed
            - Consolidated response returned
            
        - id: UC-VRF-013
          name: Set Up Webhook Notifications
          name_ja: Webhook通知設定
          description: Receive status change notifications
          priority: low
          actor: api_client
          
          preconditions:
            - API plan includes webhooks
            - Webhook endpoint accessible
            
          main_flow:
            1: Navigate to API settings
            2: Configure webhook URL
            3: Select events to subscribe
            4: Test webhook delivery
            5: Activate webhook
            
          subscribable_events:
            - credential.revoked
            - credential.expired
            - credential.renewed
            - credential.suspended
            
          webhook_payload:
            event: "credential.revoked"
            timestamp: "2024-06-01T10:00:00Z"
            credential:
              verification_code: "XXXX-XXXX-XXXX"
              previous_status: "active"
              new_status: "revoked"
              
          security:
            - webhook_signature
            - retry_on_failure
            - event_log
            
          postconditions:
            - Webhook configured
            - Notifications delivered

    # ==========================================
    # Background Check Integration
    # ==========================================
    - group_id: background_check
      name: Background Check Integration
      name_ja: バックグラウンドチェック連携
      description: Integration with background check services
      
      use_cases:
        - id: UC-VRF-020
          name: Verify for Employment Check
          name_ja: 雇用確認検証
          description: Verify credentials as part of background check
          priority: high
          actor: api_client
          
          preconditions:
            - Candidate consent obtained
            - API access configured
            
          main_flow:
            1: Receive verification request
            2: Call verification API
            3: Retrieve credential details
            4: Include in background report
            5: Return consolidated results
            
          consent_verification:
            required: true
            method: "Consent token in request"
            scope: "Specific credentials only"
            
          data_returned:
            - credential_status
            - issue_date
            - expiration_date
            - issuing_organization
            - credential_name
            
          data_not_returned:
            - scores
            - internal_notes
            - holder_private_info
            
          postconditions:
            - Verification completed
            - Results included in report
            
        - id: UC-VRF-021
          name: Continuous Monitoring
          name_ja: 継続モニタリング
          description: Monitor credential status over time
          priority: medium
          actor: api_client
          
          preconditions:
            - Enterprise API plan
            - Monitoring agreement in place
            
          main_flow:
            1: Register credentials for monitoring
            2: System periodically checks status
            3: Detect status changes
            4: Send webhook notification
            5: Log monitoring activity
            
          monitoring_features:
            - daily_status_check
            - instant_change_notification
            - expiration_warnings
            - revocation_alerts
            
          compliance:
            - data_retention_limits
            - consent_refresh_required
            - audit_trail_maintained
            
          postconditions:
            - Ongoing monitoring active
            - Alerts delivered on changes

    # ==========================================
    # Blockchain Verification
    # ==========================================
    - group_id: blockchain_verification
      name: Blockchain Verification
      name_ja: ブロックチェーン検証
      description: Verifying credentials on blockchain
      
      use_cases:
        - id: UC-VRF-030
          name: Verify Blockchain Anchor
          name_ja: ブロックチェーンアンカー検証
          description: Verify credential is anchored on blockchain
          priority: medium
          actor: public_verifier
          
          preconditions:
            - Credential has blockchain anchoring
            - Blockchain network accessible
            
          main_flow:
            1: View credential verification page
            2: Click "Verify on Blockchain"
            3: System retrieves blockchain record
            4: System compares hashes
            5: Display blockchain proof
            6: Link to block explorer
            
          verification_display:
            - verification_status: "Blockchain Verified"
            - transaction_hash: "0x..."
            - block_number: "12345678"
            - network: "Ethereum/Polygon"
            - anchored_at: "timestamp"
            - block_explorer_link: "View on Etherscan"
            
          hash_comparison:
            - compute_expected_hash
            - retrieve_stored_hash
            - compare_match: "✓ Hashes match"
            - compare_mismatch: "⚠ Potential tampering"
            
          postconditions:
            - Blockchain verification displayed
            - Proof accessible
            
        - id: UC-VRF-031
          name: Independent Blockchain Verification
          name_ja: 独立ブロックチェーン検証
          description: Verify directly on blockchain without system
          priority: low
          actor: api_client
          
          preconditions:
            - Has credential hash
            - Has transaction hash
            - Blockchain access
            
          main_flow:
            1: Compute credential hash locally
            2: Query blockchain for transaction
            3: Extract stored hash from transaction
            4: Compare hashes
            5: Confirm match
            
          technical_details:
            hash_algorithm: "SHA-256"
            hash_input:
              - certificate_id
              - holder_id
              - program_id
              - issued_at
              - certificate_number
            blockchain_query: "Read transaction data"
            
          benefits:
            - No system dependency
            - Cryptographic proof
            - Tamper evident
            
          postconditions:
            - Independent verification complete

    # ==========================================
    # Open Badges Verification
    # ==========================================
    - group_id: open_badges_verification
      name: Open Badges Verification
      name_ja: オープンバッジ検証
      description: Verifying Open Badges standard credentials
      
      use_cases:
        - id: UC-VRF-040
          name: Verify Hosted Badge
          name_ja: ホステッドバッジ検証
          description: Verify badge using hosted verification
          priority: medium
          actor: public_verifier
          
          preconditions:
            - Badge uses hosted verification
            - Assertion URL accessible
            
          main_flow:
            1: Obtain assertion URL or baked image
            2: Fetch assertion JSON
            3: Validate JSON-LD structure
            4: Verify badge class
            5: Check recipient identity
            6: Confirm issuer
            7: Display verification result
            
          verification_checks:
            - json_ld_valid
            - badge_class_accessible
            - issuer_verified
            - not_expired
            - not_revoked
            
          open_badges_compliance:
            version: "2.0"
            contexts: ["https://w3id.org/openbadges/v2"]
            
          postconditions:
            - Badge verified per Open Badges spec
            
        - id: UC-VRF-041
          name: Verify Signed Badge
          name_ja: 署名バッジ検証
          description: Verify cryptographically signed badge
          priority: medium
          actor: api_client
          
          preconditions:
            - Badge uses signed verification
            - JWT signature present
            
          main_flow:
            1: Extract JWT from badge
            2: Decode JWT header and payload
            3: Retrieve issuer public key
            4: Verify JWT signature
            5: Validate assertion content
            6: Check revocation list
            7: Return verification result
            
          jwt_verification:
            - decode_header: "Algorithm and key ID"
            - decode_payload: "Assertion content"
            - fetch_public_key: "From issuer URL"
            - verify_signature: "RSA-SHA256"
            
          revocation_check:
            - fetch_revocation_list
            - check_assertion_id_not_listed
            
          postconditions:
            - Signature verified
            - Badge authenticity confirmed

  security_considerations:
    rate_limiting:
      - prevent_enumeration_attacks
      - protect_against_dos
      - fair_usage_enforcement
      
    privacy:
      - minimum_necessary_disclosure
      - consent_verification
      - audit_logging
      
    fraud_detection:
      - unusual_pattern_detection
      - geographic_impossibility_check
      - velocity_checks
      
  compliance:
    gdpr:
      - data_minimization
      - purpose_limitation
      - access_logging
      
    accessibility:
      - wcag_compliant_verification_pages
      - screen_reader_support
      - keyboard_navigation
