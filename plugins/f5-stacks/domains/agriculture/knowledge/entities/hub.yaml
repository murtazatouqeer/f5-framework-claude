name: Hub
display_name: Hub / Điểm giao nhận
description: |
  Điểm giao nhận hàng trung gian.
  Có tủ lạnh để bảo quản tạm thời.

domain: agriculture
category: core

attributes:
  - name: id
    type: uuid
    required: true

  - name: owner_id
    type: uuid
    required: true

  - name: hub_code
    type: string
    required: true
    validation:
      pattern: "^HUB-[A-Z]{2}-[0-9]{4}$"
    example: "HUB-HN-0001"

  - name: name
    type: string
    required: true

  - name: address
    type: object
    required: true

  - name: hub_type
    type: enum
    required: true
    validation:
      values: [standard, cold_storage, both]

  - name: cold_storage_capacity_kg
    type: integer
    required: false
    description: Sức chứa tủ lạnh (kg)

  - name: operating_hours
    type: object
    required: true
    example:
      monday: "06:00-22:00"
      sunday: "08:00-18:00"

  - name: services
    type: array
    required: true
    validation:
      values: [pickup, delivery, storage, weighing]

  - name: status
    type: enum
    required: true
    validation:
      values: [active, suspended, inactive]
    default: active

  - name: rating
    type: decimal
    required: false

  - name: swap_reports
    type: integer
    required: true
    default: 0
    description: Số lần bị report tráo hàng

  - name: created_at
    type: timestamp
    required: true

  - name: updated_at
    type: timestamp
    required: true

relationships:
  - name: owner
    type: belongs_to
    entity: User
    required: true

  - name: orders
    type: has_many
    entity: Order

indexes:
  - [hub_code]
  - [status]
  - [address.province]
  - [address.district]

business_rules:
  - BR-HUB-001: Bị suspend nếu swap_reports >= 3
  - BR-HUB-002: Hàng lưu tối đa 24h, quá hạn phải trả về
  - BR-HUB-003: Phải có camera giám sát
  - BR-HUB-004: Không được mở seal niêm phong
