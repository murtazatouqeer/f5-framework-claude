name: Farmer Use Cases
display_name: Farmer Use Cases / Ca sử dụng nông dân
description: |
  Use cases for farmers (sellers) including livestock listing, farm management,
  auction participation, and order fulfillment on the livestock marketplace.

domain: agriculture
actor: Farmer
version: "1.0"

use_cases:
  # Account & Farm Management
  - id: UC-FAR-001
    name: Register Farm Account
    name_vi: Đăng ký tài khoản trang trại
    description: Farmer creates account and registers farm
    actor: Guest Farmer
    preconditions:
      - User is not registered
      - Valid phone number and ID
    main_flow:
      1: Farmer navigates to registration page
      2: Farmer enters phone number
      3: System sends OTP verification
      4: Farmer verifies OTP
      5: Farmer enters personal information
      6: Farmer enters farm details (name, location, size)
      7: Farmer uploads required documents (ID, farm certificate)
      8: System validates documents
      9: System creates pending account
      10: Admin reviews and approves
      11: Farmer receives approval notification
    alternative_flows:
      - id: 8a
        condition: Documents need review
        steps:
          1: Account marked as pending_review
          2: Admin manually reviews
          3: Admin requests additional docs or approves
      - id: 10a
        condition: Rejected application
        steps:
          1: System notifies farmer with reason
          2: Farmer can resubmit with corrections
    postconditions:
      - Farm account created
      - Farm assigned unique identifier
      - Farmer can start listing livestock
    business_rules: [BR-FAR-001, BR-FAR-002]
    related_entities: [Farm, Farmer]

  - id: UC-FAR-002
    name: Manage Farm Profile
    name_vi: Quản lý hồ sơ trang trại
    description: Farmer updates farm information and certifications
    actor: Farmer
    preconditions:
      - Farmer is logged in
      - Farm is approved
    main_flow:
      1: Farmer navigates to farm settings
      2: System displays current farm info
      3: Farmer updates details (capacity, specialization)
      4: Farmer uploads/updates certifications
      5: Farmer saves changes
      6: System validates and updates
    alternative_flows:
      - id: 4a
        condition: VietGAP certification update
        steps:
          1: Farmer uploads new certificate
          2: System verifies certificate validity
          3: Farm badge updated
    postconditions:
      - Farm profile updated
      - Certifications verified
    related_entities: [Farm]

  - id: UC-FAR-003
    name: Manage Livestock Inventory
    name_vi: Quản lý đàn gia súc
    description: Farmer tracks livestock on farm
    actor: Farmer
    preconditions:
      - Farm is approved
    main_flow:
      1: Farmer navigates to livestock management
      2: System displays current inventory
      3: Farmer adds new animals (birth/purchase)
      4: Farmer records health events
      5: Farmer updates weights
      6: Farmer marks animals for sale/sold/deceased
    alternative_flows:
      - id: 3a
        condition: Batch import
        steps:
          1: Farmer uploads CSV/Excel
          2: System validates format
          3: System creates livestock records
    postconditions:
      - Livestock inventory updated
      - Health records maintained
    business_rules: [BR-LIV-001, BR-LIV-002]
    related_entities: [Livestock, Farm, QualityCheck]

  # Listing Management
  - id: UC-FAR-010
    name: Create Livestock Listing
    name_vi: Tạo tin đăng gia súc
    description: Farmer creates listing to sell livestock
    actor: Farmer
    preconditions:
      - Farmer is logged in
      - Farm is approved
      - Livestock exists in inventory
    main_flow:
      1: Farmer selects livestock to sell
      2: Farmer chooses listing type (auction/fixed/negotiable)
      3: Farmer enters listing details
      4: Farmer sets price/starting bid
      5: Farmer uploads photos/videos
      6: Farmer sets availability dates
      7: Farmer previews listing
      8: Farmer submits listing
      9: System validates and publishes
    alternative_flows:
      - id: 2a
        condition: Bulk listing
        steps:
          1: Farmer selects multiple animals
          2: Creates batch listing
          3: Sets per-unit or lot price
      - id: 9a
        condition: Requires quality check
        steps:
          1: Listing marked as pending_inspection
          2: Schedule quality inspector visit
          3: Publish after inspection passes
    postconditions:
      - Listing created and active
      - Livestock marked as listed
      - Listing visible to buyers
    business_rules: [BR-LST-001, BR-LST-002, BR-LST-003]
    related_entities: [Listing, Livestock, Auction]

  - id: UC-FAR-011
    name: Manage Listings
    name_vi: Quản lý tin đăng
    description: Farmer views and manages active listings
    actor: Farmer
    preconditions:
      - Farmer has listings
    main_flow:
      1: Farmer navigates to my listings
      2: System displays listing dashboard
      3: Farmer views listing performance (views, bids)
      4: Farmer edits listing details
      5: Farmer pauses or cancels listing
    alternative_flows:
      - id: 5a
        condition: Has active bids
        steps:
          1: Cannot cancel if auction has bids
          2: Must honor highest bid or let auction end
    postconditions:
      - Listing updated as requested
    related_entities: [Listing, Bid]

  - id: UC-FAR-012
    name: Respond to Offers
    name_vi: Phản hồi đề nghị mua
    description: Farmer responds to buyer offers/negotiations
    actor: Farmer
    preconditions:
      - Listing is active
      - Offer received
    main_flow:
      1: Farmer receives offer notification
      2: Farmer views offer details
      3: Farmer reviews buyer profile/rating
      4: Farmer accepts, rejects, or counters
      5: System notifies buyer
    alternative_flows:
      - id: 4a
        condition: Counter offer
        steps:
          1: Farmer enters counter price
          2: Farmer adds conditions
          3: System sends to buyer
          4: Wait for buyer response
    postconditions:
      - Offer status updated
      - Buyer notified
    business_rules: [BR-NEG-001, BR-NEG-002]
    related_entities: [Offer, Listing, Buyer]

  # Auction Participation
  - id: UC-FAR-020
    name: Create Auction Listing
    name_vi: Tạo phiên đấu giá
    description: Farmer lists livestock for auction
    actor: Farmer
    preconditions:
      - Livestock verified and healthy
      - Quality grade assigned
    main_flow:
      1: Farmer selects auction listing type
      2: Farmer chooses auction format (live/timed/sealed)
      3: Farmer sets starting bid
      4: Farmer sets reserve price (optional)
      5: Farmer sets buy-now price (optional)
      6: Farmer sets auction duration
      7: Farmer submits for approval
      8: System schedules auction
    postconditions:
      - Auction created and scheduled
      - Notifications sent to interested buyers
    business_rules: [BR-AUC-001, BR-AUC-002, BR-AUC-003]
    related_entities: [Auction, Listing, Livestock]
    related_workflows: [auction-workflow]

  - id: UC-FAR-021
    name: Monitor Auction
    name_vi: Theo dõi phiên đấu giá
    description: Farmer monitors active auction
    actor: Farmer
    preconditions:
      - Auction is active
    main_flow:
      1: Farmer opens auction dashboard
      2: System displays real-time bids
      3: Farmer views bidder information
      4: Farmer sees current highest bid
      5: Farmer monitors time remaining
    alternative_flows:
      - id: 5a
        condition: Reserve not met at end
        steps:
          1: Farmer can accept highest bid anyway
          2: Or relist with lower reserve
    postconditions:
      - Farmer informed of auction status
    related_entities: [Auction, Bid]

  # Order Fulfillment
  - id: UC-FAR-030
    name: Process Sold Order
    name_vi: Xử lý đơn hàng đã bán
    description: Farmer fulfills sold livestock order
    actor: Farmer
    preconditions:
      - Sale completed (auction won or offer accepted)
      - Payment received/escrowed
    main_flow:
      1: Farmer receives order notification
      2: Farmer reviews order details
      3: Farmer confirms livestock availability
      4: Farmer schedules pickup/delivery
      5: Farmer prepares animals and documents
      6: Farmer marks ready for pickup
      7: System notifies buyer/logistics
    alternative_flows:
      - id: 3a
        condition: Livestock unavailable
        steps:
          1: Farmer reports issue
          2: System notifies buyer
          3: Refund processed
          4: Farmer reputation affected
    postconditions:
      - Order marked ready for fulfillment
      - Logistics notified
    business_rules: [BR-ORD-001, BR-ORD-002]
    related_entities: [Order, Livestock, Shipment]
    related_workflows: [order-fulfillment-workflow]

  - id: UC-FAR-031
    name: Coordinate Pickup
    name_vi: Phối hợp lấy hàng
    description: Farmer coordinates livestock pickup
    actor: Farmer
    preconditions:
      - Order is ready
      - Transport scheduled
    main_flow:
      1: Farmer receives pickup notification
      2: Farmer confirms pickup time
      3: Driver arrives at farm
      4: Farmer presents livestock and documents
      5: Quality check performed (if required)
      6: Animals loaded onto transport
      7: Farmer signs handover document
      8: System updates order status
    alternative_flows:
      - id: 5a
        condition: Quality check fails
        steps:
          1: Issue documented with photos
          2: Buyer notified
          3: Negotiate resolution (partial delivery, refund)
    postconditions:
      - Livestock transferred to transport
      - Order status updated to in_transit
    related_entities: [Order, Shipment, QualityCheck]

  # Financial
  - id: UC-FAR-040
    name: View Earnings
    name_vi: Xem thu nhập
    description: Farmer views sales and earnings
    actor: Farmer
    preconditions:
      - Farmer is logged in
    main_flow:
      1: Farmer navigates to earnings dashboard
      2: System displays total earnings
      3: Farmer views transaction history
      4: Farmer sees pending payments
      5: Farmer views platform fees breakdown
    postconditions:
      - Earnings information displayed
    related_entities: [Order, Payment]

  - id: UC-FAR-041
    name: Request Payout
    name_vi: Yêu cầu rút tiền
    description: Farmer requests withdrawal of earnings
    actor: Farmer
    preconditions:
      - Available balance > minimum withdrawal
      - Bank account verified
    main_flow:
      1: Farmer navigates to wallet
      2: Farmer clicks request payout
      3: Farmer enters amount
      4: Farmer confirms bank account
      5: System validates available balance
      6: System creates payout request
      7: Payout processed within 1-3 business days
    postconditions:
      - Payout request created
      - Balance updated
    business_rules: [BR-PAY-001, BR-PAY-002]
    related_entities: [Payment, Farmer]

non_functional_requirements:
  - Listing creation < 5 minutes
  - Real-time auction updates < 1 second latency
  - Mobile app support for farm operations
  - Offline capability for inventory management
  - Vietnamese language interface
