name: Admin Use Cases
display_name: Admin Use Cases / Ca sử dụng quản trị
description: |
  Use cases for platform administrators including user management,
  quality control, dispute resolution, and marketplace operations.

domain: agriculture
actor: Admin
version: "1.0"

use_cases:
  # User Management
  - id: UC-ADM-001
    name: Review Farm Registration
    name_vi: Duyệt đăng ký trang trại
    description: Admin reviews and approves farm registrations
    actor: Admin
    preconditions:
      - Pending farm registration exists
    main_flow:
      1: Admin views registration queue
      2: Admin selects pending registration
      3: System displays submitted documents
      4: Admin verifies business license
      5: Admin verifies farm location
      6: Admin verifies certifications (VietGAP if claimed)
      7: Admin approves or rejects
      8: System notifies farmer
    alternative_flows:
      - id: 7a
        condition: Request additional documents
        steps:
          1: Admin marks as pending_documents
          2: Admin specifies required documents
          3: Farmer receives request
          4: Re-review after submission
      - id: 7b
        condition: Reject registration
        steps:
          1: Admin enters rejection reason
          2: Farmer can reapply after 30 days
    postconditions:
      - Registration processed
      - Farmer notified of decision
    business_rules: [BR-REG-001, BR-REG-002]
    related_entities: [Farm, Farmer]

  - id: UC-ADM-002
    name: Review Buyer Registration
    name_vi: Duyệt đăng ký người mua
    description: Admin reviews buyer business verification
    actor: Admin
    preconditions:
      - Pending buyer registration exists
    main_flow:
      1: Admin views buyer registration queue
      2: Admin selects pending registration
      3: Admin verifies business type
      4: Admin verifies business license
      5: Admin verifies facility (if slaughterhouse)
      6: Admin sets buyer tier and limits
      7: Admin approves or rejects
    alternative_flows:
      - id: 5a
        condition: Slaughterhouse verification
        steps:
          1: Verify health and safety certifications
          2: Verify processing capacity
          3: Assign slaughterhouse trust score
    postconditions:
      - Buyer account activated or rejected
      - Purchase limits set based on tier
    related_entities: [Buyer, Slaughterhouse]

  - id: UC-ADM-003
    name: Manage User Accounts
    name_vi: Quản lý tài khoản người dùng
    description: Admin manages existing user accounts
    actor: Admin
    preconditions:
      - User account exists
    main_flow:
      1: Admin searches for user
      2: System displays user details
      3: Admin views account activity
      4: Admin performs action (suspend/unsuspend/verify)
      5: System logs admin action
      6: User notified of changes
    alternative_flows:
      - id: 4a
        condition: Suspend account
        steps:
          1: Admin enters suspension reason
          2: User blocked from transactions
          3: Active listings paused
          4: Pending orders continue
      - id: 4b
        condition: Terminate account
        steps:
          1: Admin confirms termination
          2: All active listings cancelled
          3: Pending payments processed
          4: Account permanently deactivated
    postconditions:
      - Account status updated
      - Action logged for audit
    business_rules: [BR-USR-001, BR-USR-002]
    related_entities: [User, Farm, Buyer]

  # Quality Control
  - id: UC-ADM-010
    name: Manage Quality Inspectors
    name_vi: Quản lý kiểm định viên
    description: Admin manages quality inspection staff
    actor: Admin
    preconditions:
      - Admin has quality management permission
    main_flow:
      1: Admin navigates to inspector management
      2: Admin views inspector list
      3: Admin adds/removes inspectors
      4: Admin assigns inspection regions
      5: Admin sets inspection schedules
    postconditions:
      - Inspector roster updated
      - Regions assigned
    related_entities: [Inspector, Region]

  - id: UC-ADM-011
    name: Review Quality Reports
    name_vi: Xem xét báo cáo chất lượng
    description: Admin reviews quality inspection reports
    actor: Admin
    preconditions:
      - Quality inspection completed
    main_flow:
      1: Admin views inspection report queue
      2: Admin selects report
      3: System displays inspection details
      4: Admin reviews photos and measurements
      5: Admin validates grading decision
      6: Admin approves or requests re-inspection
    alternative_flows:
      - id: 6a
        condition: Grade dispute
        steps:
          1: Farmer disputes assigned grade
          2: Admin reviews evidence
          3: Admin upholds or adjusts grade
    postconditions:
      - Quality grade finalized
      - Listing updated with grade
    business_rules: [BR-QC-001, BR-QC-002]
    related_entities: [QualityCheck, Livestock, Listing]

  - id: UC-ADM-012
    name: Flag Suspicious Listings
    name_vi: Đánh dấu tin đăng đáng ngờ
    description: Admin investigates flagged listings
    actor: Admin
    preconditions:
      - System or user flagged listing
    main_flow:
      1: Admin views flagged listings queue
      2: Admin selects flagged listing
      3: System displays flag reason
      4: Admin reviews listing details
      5: Admin investigates (compare photos, check history)
      6: Admin takes action (approve/remove/warning)
    alternative_flows:
      - id: 6a
        condition: Fraud detected
        steps:
          1: Remove listing immediately
          2: Suspend seller account
          3: Notify affected buyers
          4: Initiate investigation
    postconditions:
      - Flag resolved
      - Action logged
    business_rules: [BR-FRD-001, BR-FRD-002]
    related_entities: [Listing, Farm]

  # Dispute Resolution
  - id: UC-ADM-020
    name: Mediate Dispute
    name_vi: Hòa giải tranh chấp
    description: Admin mediates buyer-seller disputes
    actor: Admin
    preconditions:
      - Dispute escalated to admin
    main_flow:
      1: Admin views dispute queue
      2: Admin selects dispute
      3: System displays all evidence
      4: Admin reviews buyer claim
      5: Admin reviews seller response
      6: Admin communicates with both parties
      7: Admin proposes resolution
      8: Parties accept or appeal
    alternative_flows:
      - id: 8a
        condition: Parties accept resolution
        steps:
          1: Admin finalizes decision
          2: System executes resolution (refund/release)
          3: Dispute closed
      - id: 8b
        condition: Appeal filed
        steps:
          1: Escalate to senior admin
          2: Additional review performed
          3: Final binding decision made
    postconditions:
      - Dispute resolved
      - Payments adjusted per decision
      - User reputations updated
    business_rules: [BR-DIS-010, BR-DIS-011]
    related_entities: [Dispute, Order, Payment]

  - id: UC-ADM-021
    name: Process Refunds
    name_vi: Xử lý hoàn tiền
    description: Admin processes approved refunds
    actor: Admin
    preconditions:
      - Refund approved via dispute or cancellation
    main_flow:
      1: Admin views refund queue
      2: Admin selects refund request
      3: Admin verifies refund amount
      4: Admin confirms refund method
      5: Admin initiates refund
      6: System processes transaction
      7: Both parties notified
    postconditions:
      - Refund processed
      - Buyer wallet/bank credited
      - Transaction logged
    related_entities: [Payment, Order, Buyer]

  # Auction Management
  - id: UC-ADM-030
    name: Monitor Live Auctions
    name_vi: Giám sát đấu giá trực tiếp
    description: Admin monitors active auctions
    actor: Admin
    preconditions:
      - Active auctions exist
    main_flow:
      1: Admin opens auction dashboard
      2: System displays all active auctions
      3: Admin monitors bid activity
      4: Admin watches for suspicious patterns
      5: Admin can pause/intervene if needed
    alternative_flows:
      - id: 5a
        condition: Shill bidding detected
        steps:
          1: Admin pauses auction
          2: Admin investigates bid patterns
          3: Admin removes fraudulent bids
          4: Admin resumes or cancels auction
    postconditions:
      - Auctions monitored
      - Issues addressed
    business_rules: [BR-AUC-030, BR-AUC-031]
    related_entities: [Auction, Bid]

  - id: UC-ADM-031
    name: Manage Auction Settings
    name_vi: Quản lý cài đặt đấu giá
    description: Admin configures auction parameters
    actor: Admin
    preconditions:
      - Admin has auction management permission
    main_flow:
      1: Admin navigates to auction settings
      2: Admin configures bid increments
      3: Admin sets anti-sniping rules
      4: Admin configures deposit requirements
      5: Admin sets auction schedules
      6: Admin saves settings
    postconditions:
      - Auction rules updated
      - New auctions use updated rules
    related_entities: [Auction]

  # Hub & Logistics Management
  - id: UC-ADM-040
    name: Manage Hubs
    name_vi: Quản lý hub
    description: Admin manages collection/distribution hubs
    actor: Admin
    preconditions:
      - Admin has logistics permission
    main_flow:
      1: Admin views hub network
      2: Admin adds/edits hub details
      3: Admin sets hub capacity
      4: Admin assigns hub operators
      5: Admin configures operating hours
    postconditions:
      - Hub network configured
    related_entities: [Hub]

  - id: UC-ADM-041
    name: Monitor Logistics
    name_vi: Giám sát vận chuyển
    description: Admin monitors logistics operations
    actor: Admin
    preconditions:
      - Active shipments exist
    main_flow:
      1: Admin views logistics dashboard
      2: System displays active shipments
      3: Admin monitors delivery status
      4: Admin checks temperature alerts
      5: Admin views route efficiency
      6: Admin addresses delayed shipments
    alternative_flows:
      - id: 4a
        condition: Temperature breach alert
        steps:
          1: System flags temperature violation
          2: Admin contacts driver
          3: Admin notifies affected buyer
          4: Document for potential claims
    postconditions:
      - Logistics monitored
      - Issues addressed
    related_entities: [Shipment, Hub]

  # Reporting & Analytics
  - id: UC-ADM-050
    name: Generate Reports
    name_vi: Tạo báo cáo
    description: Admin generates platform reports
    actor: Admin
    preconditions:
      - Admin has reporting permission
    main_flow:
      1: Admin navigates to reports
      2: Admin selects report type
      3: Admin sets date range
      4: Admin applies filters
      5: System generates report
      6: Admin exports (PDF/Excel)
    report_types:
      - Transaction volume and revenue
      - User registration and activity
      - Quality control statistics
      - Dispute resolution metrics
      - Regional distribution
      - Price trends by livestock type
    postconditions:
      - Report generated
    related_entities: [Report]

  - id: UC-ADM-051
    name: Monitor Platform Health
    name_vi: Giám sát tình trạng hệ thống
    description: Admin monitors system and business health
    actor: Admin
    preconditions:
      - Admin has dashboard access
    main_flow:
      1: Admin views main dashboard
      2: System displays KPIs
      3: Admin reviews transaction metrics
      4: Admin checks user activity
      5: Admin monitors queue lengths
      6: Admin addresses alerts
    key_metrics:
      - Daily/weekly GMV
      - Active listings count
      - Pending verifications
      - Open disputes
      - Quality inspection backlog
      - Logistics delays
    postconditions:
      - Platform status reviewed
    related_entities: [Dashboard]

  # Configuration
  - id: UC-ADM-060
    name: Manage Platform Fees
    name_vi: Quản lý phí nền tảng
    description: Admin configures transaction fees
    actor: Admin
    preconditions:
      - Admin has configuration permission
    main_flow:
      1: Admin navigates to fee configuration
      2: Admin views current fee structure
      3: Admin modifies fees by category
      4: Admin sets effective date
      5: Admin saves changes
      6: System notifies users of changes
    fee_types:
      - Transaction commission (percentage)
      - Listing fees
      - Featured listing fees
      - Inspection fees
      - Logistics commission
    postconditions:
      - Fee structure updated
      - Users notified
    related_entities: [Fee]

  - id: UC-ADM-061
    name: Manage Content
    name_vi: Quản lý nội dung
    description: Admin manages platform content
    actor: Admin
    preconditions:
      - Admin has content permission
    main_flow:
      1: Admin navigates to content management
      2: Admin edits help articles
      3: Admin updates FAQs
      4: Admin manages announcements
      5: Admin configures notification templates
    postconditions:
      - Content updated
    related_entities: [Content]

non_functional_requirements:
  - Admin dashboard load time < 3 seconds
  - Real-time monitoring updates
  - Audit trail for all admin actions
  - Role-based access control
  - Two-factor authentication for admins
