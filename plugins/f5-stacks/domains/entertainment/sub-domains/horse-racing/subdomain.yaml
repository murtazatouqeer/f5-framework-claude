name: horse-racing
parent: entertainment
display_name: Horse Racing Platform

description: |
  Horse racing platform for race information,
  live tracking, and betting services.

variants:
  - id: information
    name: Racing Information
    scale: [starter]
    features: [race-cards, results, statistics, news]

  - id: betting
    name: Racing & Betting
    scale: [growth, enterprise]
    features: [live-odds, betting, live-streaming, tipping]

entities:
  - name: Race
    attributes:
      - track_id: string
      - race_number: number
      - race_time: datetime
      - distance: number
      - prize_money: number
      - runners: Runner[]
      - status: enum[scheduled, running, finished, abandoned]

  - name: Runner
    attributes:
      - horse_id: string
      - jockey_id: string
      - trainer_id: string
      - barrier: number
      - weight: number
      - odds: number

  - name: Bet
    attributes:
      - user_id: string
      - race_id: string
      - bet_type: enum[win, place, each_way, exacta, trifecta]
      - selections: string[]
      - stake: number
      - odds: number
      - status: enum[pending, won, lost, void]

  - name: Result
    attributes:
      - race_id: string
      - positions: Position[]
      - dividends: Dividend[]

workflows:
  - name: race-day
    steps: [scratching, final-field, betting-open, race-start, result, settlement]

  - name: bet-placement
    steps: [validate, accept, hold-funds, settle]

  - name: live-update
    steps: [data-feed, process, broadcast]

compliance:
  - gaming-license
  - responsible-gambling
  - anti-fraud

integrations:
  - racing-data-feed
  - odds-provider
  - streaming-provider

suggested_services:
  - name: racing-service
    stack: go
    database: postgresql
    cache: redis
    features: [races, runners, results]

  - name: betting-service
    stack: go
    database: postgresql
    queue: kafka
    features: [bet-placement, odds, settlement]

  - name: live-data-service
    stack: go
    database: redis
    features: [real-time-updates, websocket]

  - name: streaming-service
    stack: go
    features: [video-streaming, hls]
