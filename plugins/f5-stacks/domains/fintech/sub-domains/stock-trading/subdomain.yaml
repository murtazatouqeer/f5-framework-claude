name: stock-trading
parent: fintech
display_name: Stock Trading Platform

description: |
  Stock trading platform for equity markets including
  order management, execution, and portfolio tracking.

variants:
  - id: retail
    name: Retail Trading
    scale: [starter, growth]
    features: [basic-trading, portfolio-view, market-data, watchlist]

  - id: institutional
    name: Institutional Trading
    scale: [enterprise]
    features: [algo-trading, dark-pools, prime-brokerage, fix-protocol]

entities:
  - name: Order
    attributes:
      - symbol: string
      - side: enum[buy, sell]
      - quantity: number
      - price: number
      - type: enum[market, limit, stop, stop_limit]
      - status: enum[pending, filled, partial, cancelled, rejected]
      - time_in_force: enum[day, gtc, ioc, fok]

  - name: Position
    attributes:
      - symbol: string
      - quantity: number
      - avg_price: number
      - market_value: number
      - unrealized_pnl: number

  - name: Portfolio
    attributes:
      - positions: Position[]
      - cash_balance: number
      - total_value: number
      - daily_pnl: number

  - name: Trade
    attributes:
      - order_id: string
      - symbol: string
      - quantity: number
      - price: number
      - executed_at: datetime

workflows:
  - name: order-placement
    steps: [validate, risk-check, route, confirm]

  - name: order-execution
    steps: [receive, match, fill, notify]

  - name: settlement
    steps: [trade-capture, clearing, settlement, reconciliation]

compliance:
  - sec-rule-15c3-5
  - best-execution
  - market-access-rule

integrations:
  - market-data-feed
  - order-router
  - clearing-house
  - custodian

suggested_services:
  - name: trading-service
    stack: go
    database: postgresql
    cache: redis
    features: [order-management, execution, risk-check]

  - name: market-data-service
    stack: go
    database: redis
    features: [quotes, charts, level2-data]

  - name: portfolio-service
    stack: nestjs
    database: postgresql
    features: [positions, pnl-calculation, reporting]

  - name: user-service
    stack: nestjs
    database: postgresql
    features: [authentication, kyc, accounts]
