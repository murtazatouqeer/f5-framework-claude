name: payment
parent: fintech
display_name: Payment Platform

description: |
  Payment processing platform supporting multiple payment
  methods, merchant services, and settlement.

variants:
  - id: gateway
    name: Payment Gateway
    scale: [starter, growth]
    features: [card-processing, bank-transfer, e-wallet]

  - id: processor
    name: Payment Processor
    scale: [enterprise]
    features: [acquiring, issuing, settlement, clearing]

entities:
  - name: Transaction
    attributes:
      - merchant_id: string
      - amount: number
      - currency: string
      - payment_method: enum[card, bank_transfer, e_wallet]
      - status: enum[pending, authorized, captured, refunded, failed]

  - name: Merchant
    attributes:
      - business_name: string
      - mcc: string
      - settlement_account: string
      - fee_rate: number

  - name: Settlement
    attributes:
      - merchant_id: string
      - period: date_range
      - total_amount: number
      - fee_amount: number
      - net_amount: number
      - status: enum[pending, processing, completed]

workflows:
  - name: payment-processing
    steps: [initiate, authenticate, authorize, capture, settle]

  - name: refund-processing
    steps: [request, validate, process, notify]

  - name: settlement
    steps: [aggregate, calculate-fees, transfer, reconcile]

compliance:
  - pci-dss
  - napas-regulations
  - sbv-payment-regulations

integrations:
  - card-networks
  - bank-apis
  - e-wallet-providers

suggested_services:
  - name: payment-gateway
    stack: go
    database: postgresql
    cache: redis
    features: [transaction-processing, routing]

  - name: merchant-service
    stack: nestjs
    database: postgresql
    features: [onboarding, configuration, reporting]

  - name: settlement-service
    stack: nestjs
    database: postgresql
    features: [aggregation, disbursement, reconciliation]
