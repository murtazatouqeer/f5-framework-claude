name: AdminUseCases
display_name: Admin Use Cases / Ca sử dụng Admin
description: |
  Use cases for platform administrators managing the cryptocurrency exchange.
  Covers user management, compliance, operations, and system configuration.

domain: fintech
sub_domain: crypto
actor: admin
version: "1.0"
status: active

# =============================================================================
# ACTOR PROFILES
# =============================================================================
actor_profiles:
  - name: Support Agent
    name_vi: Nhân viên hỗ trợ
    permissions:
      - view_user_info
      - view_transactions
      - respond_to_tickets
    description: First-line customer support

  - name: Compliance Officer
    name_vi: Nhân viên tuân thủ
    permissions:
      - review_kyc
      - review_withdrawals
      - manage_sanctions
      - file_sars
    description: AML/KYC compliance functions

  - name: Operations Manager
    name_vi: Quản lý vận hành
    permissions:
      - manage_trading_pairs
      - manage_fees
      - manage_withdrawals
      - view_reports
    description: Day-to-day operations management

  - name: Risk Manager
    name_vi: Quản lý rủi ro
    permissions:
      - configure_risk_rules
      - review_alerts
      - manage_limits
    description: Risk monitoring and configuration

  - name: System Administrator
    name_vi: Quản trị hệ thống
    permissions:
      - manage_admins
      - system_configuration
      - full_access
    description: Platform administration

# =============================================================================
# USER MANAGEMENT
# =============================================================================
user_management:
  - id: UC-ADM-001
    name: Search User Account
    name_vi: Tìm kiếm tài khoản người dùng
    actor: Support Agent
    description: Support agent searches for user account
    preconditions:
      - Admin is logged in with appropriate permissions
    main_flow:
      1: Admin navigates to user management
      2: Admin enters search criteria (email, user ID, name)
      3: System displays matching users
      4: Admin selects user to view details
      5: System shows user profile with history
    search_criteria:
      - User ID
      - Email
      - Phone number
      - Wallet address
      - Name
    displayed_info:
      - Basic profile
      - KYC status
      - Account status
      - Recent activity

  - id: UC-ADM-002
    name: View User Details
    name_vi: Xem chi tiết người dùng
    actor: Support Agent
    description: View comprehensive user information
    preconditions:
      - User search completed
    main_flow:
      1: Admin opens user profile
      2: System displays user information tabs
      3: Admin can view different sections
    sections:
      - Profile information
      - KYC documents and status
      - Balances across wallets
      - Transaction history
      - Trading history
      - Login history
      - Security settings
      - Support tickets

  - id: UC-ADM-003
    name: Freeze User Account
    name_vi: Đóng băng tài khoản người dùng
    actor: Compliance Officer
    description: Freeze user account due to suspicious activity
    preconditions:
      - Valid reason for freeze
      - Admin has freeze permissions
    main_flow:
      1: Admin navigates to user account
      2: Admin clicks "Freeze Account"
      3: Admin selects freeze reason
      4: Admin enters detailed notes
      5: System requests 2FA confirmation
      6: Admin confirms with 2FA
      7: System freezes account
      8: User is notified
      9: All pending withdrawals cancelled
    freeze_reasons:
      - Suspected fraud
      - AML investigation
      - Sanctions match
      - Security breach
      - Regulatory request
      - User request
    postconditions:
      - Account frozen
      - All operations blocked
      - Audit log created

  - id: UC-ADM-004
    name: Unfreeze User Account
    name_vi: Mở đóng băng tài khoản người dùng
    actor: Compliance Officer
    description: Remove account freeze after investigation
    preconditions:
      - Account is frozen
      - Investigation complete
    main_flow:
      1: Admin navigates to frozen account
      2: Admin reviews investigation notes
      3: Admin clicks "Unfreeze Account"
      4: Admin enters resolution notes
      5: System requests supervisor approval
      6: Supervisor approves
      7: System unfreezes account
      8: User is notified
    postconditions:
      - Account active
      - User can resume operations

  - id: UC-ADM-005
    name: Adjust User Balance
    name_vi: Điều chỉnh số dư người dùng
    actor: Operations Manager
    description: Manual balance adjustment (credits/debits)
    preconditions:
      - Valid business reason
      - Dual control required
    main_flow:
      1: Admin navigates to user account
      2: Admin clicks "Adjust Balance"
      3: Admin selects asset
      4: Admin enters amount (+/-)
      5: Admin selects adjustment reason
      6: Admin enters detailed notes
      7: System creates adjustment request
      8: Second admin reviews and approves
      9: System applies adjustment
    adjustment_reasons:
      - Deposit not credited
      - Double credit correction
      - Trading error compensation
      - Promotional credit
      - Fee refund
      - Legal settlement
    controls:
      - Dual approval required
      - Full audit trail
      - Daily limits

# =============================================================================
# KYC/COMPLIANCE
# =============================================================================
compliance:
  - id: UC-ADM-010
    name: Review KYC Application
    name_vi: Xét duyệt đơn KYC
    actor: Compliance Officer
    description: Review and approve/reject KYC verification
    preconditions:
      - KYC application pending review
    main_flow:
      1: Admin opens KYC review queue
      2: Admin selects application
      3: System displays documents and analysis
      4: Admin reviews document images
      5: Admin reviews OCR extraction
      6: Admin reviews facial match score
      7: Admin reviews sanctions screening
      8: Admin makes approval decision
      9: Admin enters review notes
      10: System updates user KYC status
    review_elements:
      - Document clarity and authenticity
      - Data consistency
      - Facial match confidence
      - Screening results
      - Risk score
    decisions:
      - Approve
      - Reject with reason
      - Request additional documents

  - id: UC-ADM-011
    name: Review Flagged Withdrawal
    name_vi: Xét duyệt rút tiền bị gắn cờ
    actor: Compliance Officer
    description: Review withdrawal flagged by risk system
    preconditions:
      - Withdrawal flagged for review
    main_flow:
      1: Admin opens withdrawal review queue
      2: Admin selects withdrawal
      3: System displays withdrawal details
      4: Admin reviews user profile
      5: Admin reviews risk factors
      6: Admin reviews transaction history
      7: Admin makes approval decision
      8: If approved, withdrawal proceeds
      9: If rejected, balance restored
    review_factors:
      - Destination address risk
      - Amount relative to usual
      - Account age and history
      - KYC level
      - Source of funds

  - id: UC-ADM-012
    name: File Suspicious Activity Report
    name_vi: Nộp báo cáo hoạt động đáng ngờ
    actor: Compliance Officer
    description: File SAR with regulatory authorities
    preconditions:
      - Suspicious activity identified
      - Investigation complete
    main_flow:
      1: Admin opens SAR filing system
      2: Admin selects user/accounts involved
      3: Admin describes suspicious activity
      4: Admin attaches supporting documents
      5: Admin selects regulatory body
      6: Supervisor reviews and approves
      7: SAR submitted to authority
      8: Case logged with reference number
    content:
      - Subject information
      - Activity description
      - Transaction details
      - Supporting evidence
      - Recommended actions
    confidentiality:
      - Do not notify subject
      - Restrict access to SAR

  - id: UC-ADM-013
    name: Manage Sanctions List
    name_vi: Quản lý danh sách trừng phạt
    actor: Compliance Officer
    description: Update and manage sanctions screening lists
    main_flow:
      1: Admin accesses sanctions management
      2: Admin can view current lists
      3: Admin can add manual entries
      4: Admin can whitelist false positives
      5: System logs all changes
    list_sources:
      - OFAC (automatic updates)
      - UN Sanctions (automatic)
      - EU Sanctions (automatic)
      - Internal blacklist (manual)
    operations:
      - Add to internal blacklist
      - Whitelist with approval
      - Trigger full rescreen

# =============================================================================
# WITHDRAWAL MANAGEMENT
# =============================================================================
withdrawals:
  - id: UC-ADM-020
    name: View Withdrawal Queue
    name_vi: Xem hàng đợi rút tiền
    actor: Operations Manager
    description: Monitor withdrawal processing queue
    main_flow:
      1: Admin opens withdrawal dashboard
      2: System displays queue statistics
      3: Admin can filter by status, asset, amount
      4: Admin monitors processing times
      5: Admin can identify bottlenecks
    metrics:
      - Pending count by status
      - Average processing time
      - Stuck withdrawals
      - Hot wallet balances

  - id: UC-ADM-021
    name: Process Stuck Withdrawal
    name_vi: Xử lý rút tiền bị kẹt
    actor: Operations Manager
    description: Manually intervene on stuck withdrawal
    preconditions:
      - Withdrawal stuck in processing
    main_flow:
      1: Admin identifies stuck withdrawal
      2: Admin investigates cause
      3: Admin determines resolution
      4: Admin takes corrective action
      5: System updates withdrawal status
    resolution_options:
      - Retry broadcast
      - Cancel and refund
      - Manual completion
      - Escalate to engineering

  - id: UC-ADM-022
    name: Manage Hot Wallet
    name_vi: Quản lý ví nóng
    actor: Operations Manager
    description: Monitor and replenish hot wallets
    main_flow:
      1: Admin opens wallet management
      2: System displays hot wallet balances
      3: System shows pending withdrawal demand
      4: Admin initiates cold-to-hot transfer
      5: Multi-sig approval required
      6: Transfer executed
    thresholds:
      - Low balance alert
      - Maximum hot wallet limit
      - Replenishment triggers

# =============================================================================
# TRADING OPERATIONS
# =============================================================================
trading_operations:
  - id: UC-ADM-030
    name: List New Trading Pair
    name_vi: Thêm cặp giao dịch mới
    actor: Operations Manager
    description: Add new cryptocurrency trading pair
    preconditions:
      - Assets already listed
      - Business approval obtained
    main_flow:
      1: Admin navigates to trading pair management
      2: Admin clicks "Add Trading Pair"
      3: Admin selects base and quote assets
      4: Admin configures trading parameters
      5: Admin sets fee structure
      6: Admin configures limits
      7: Admin schedules launch time
      8: System creates pair in pre-trading status
      9: At launch time, trading enabled
    parameters:
      - Tick size and lot size
      - Min/max order sizes
      - Price deviation limits
      - Maker/taker fees
    launch_process:
      - Pre-announce to users
      - Pre-trading period for orders
      - Trading enabled at specific time

  - id: UC-ADM-031
    name: Suspend Trading Pair
    name_vi: Tạm ngưng cặp giao dịch
    actor: Operations Manager
    description: Temporarily halt trading on a pair
    preconditions:
      - Valid reason for suspension
    main_flow:
      1: Admin selects trading pair
      2: Admin clicks "Suspend Trading"
      3: Admin enters suspension reason
      4: System stops accepting new orders
      5: Open orders cancelled or kept
      6: Users notified
    suspension_reasons:
      - Technical issue
      - Market manipulation
      - Asset issue
      - Regulatory requirement
    postconditions:
      - No new orders accepted
      - Announcement published

  - id: UC-ADM-032
    name: Configure Fee Structure
    name_vi: Cấu hình cơ cấu phí
    actor: Operations Manager
    description: Modify trading fee tiers and rates
    preconditions:
      - Business approval
    main_flow:
      1: Admin navigates to fee management
      2: Admin views current fee structure
      3: Admin modifies tier requirements
      4: Admin adjusts fee rates
      5: Admin sets effective date
      6: Changes reviewed by second admin
      7: System applies on effective date
    changes_tracked:
      - All modifications logged
      - Before/after comparison
      - Approval history

  - id: UC-ADM-033
    name: Trigger Circuit Breaker
    name_vi: Kích hoạt ngắt mạch
    actor: Risk Manager
    description: Manually halt trading due to extreme conditions
    preconditions:
      - Extreme market conditions
      - Or system issues
    main_flow:
      1: Admin assesses situation
      2: Admin triggers circuit breaker
      3: All trading halted
      4: Open orders preserved
      5: Users notified
      6: Situation investigated
      7: Trading resumed when safe
    automatic_triggers:
      - Price move >15% in 10 minutes
      - Price move >25% in 1 hour
      - System anomaly detected

# =============================================================================
# RISK MANAGEMENT
# =============================================================================
risk_management:
  - id: UC-ADM-040
    name: Configure Risk Rules
    name_vi: Cấu hình quy tắc rủi ro
    actor: Risk Manager
    description: Set up risk parameters and thresholds
    main_flow:
      1: Admin opens risk configuration
      2: Admin views current rules
      3: Admin modifies thresholds
      4: Admin creates new rules
      5: Changes staged for testing
      6: After validation, deployed to production
    rule_types:
      - Withdrawal velocity limits
      - Large transaction thresholds
      - Account age restrictions
      - Geographic restrictions
      - Device/IP rules

  - id: UC-ADM-041
    name: Review Risk Alerts
    name_vi: Xem xét cảnh báo rủi ro
    actor: Risk Manager
    description: Review and act on risk system alerts
    main_flow:
      1: Admin opens alert dashboard
      2: System displays active alerts
      3: Admin reviews alert details
      4: Admin investigates activity
      5: Admin takes action or dismisses
    alert_types:
      - Unusual withdrawal pattern
      - Account takeover suspected
      - Wash trading detected
      - Large position buildup
      - Coordinated activity

# =============================================================================
# REPORTING
# =============================================================================
reporting:
  - id: UC-ADM-050
    name: Generate Transaction Report
    name_vi: Tạo báo cáo giao dịch
    actor: Operations Manager
    description: Generate reports for analysis or compliance
    main_flow:
      1: Admin navigates to reports
      2: Admin selects report type
      3: Admin sets date range and filters
      4: System generates report
      5: Admin downloads or schedules
    report_types:
      - Trading volume summary
      - Deposit/withdrawal report
      - User growth report
      - Fee revenue report
      - KYC conversion report
    formats:
      - CSV
      - Excel
      - PDF

  - id: UC-ADM-051
    name: View Real-Time Dashboard
    name_vi: Xem bảng điều khiển thời gian thực
    actor: Operations Manager
    description: Monitor platform health in real-time
    main_flow:
      1: Admin opens operations dashboard
      2: System displays key metrics
      3: Admin monitors trends
      4: Alerts highlighted
    metrics:
      - Active users
      - Trading volume
      - Order book depth
      - System latency
      - Error rates
      - Wallet balances

# =============================================================================
# SYSTEM ADMINISTRATION
# =============================================================================
system_admin:
  - id: UC-ADM-060
    name: Manage Admin Users
    name_vi: Quản lý người dùng admin
    actor: System Administrator
    description: Create and manage administrator accounts
    main_flow:
      1: Admin opens admin management
      2: Admin creates new admin account
      3: Admin assigns role and permissions
      4: Admin sets initial password (force change)
      5: 2FA required for new admin
      6: Access logged and auditable
    controls:
      - Least privilege principle
      - Regular access review
      - Activity monitoring

  - id: UC-ADM-061
    name: Configure Platform Settings
    name_vi: Cấu hình cài đặt nền tảng
    actor: System Administrator
    description: Modify platform-wide configuration
    main_flow:
      1: Admin opens system settings
      2: Admin modifies configuration
      3: Changes require approval
      4: Staged deployment available
      5: Rollback capability
    settings:
      - Maintenance mode
      - Feature flags
      - Rate limits
      - Notification templates
      - Legal documents

  - id: UC-ADM-062
    name: Initiate Emergency Shutdown
    name_vi: Khởi tạo tắt khẩn cấp
    actor: System Administrator
    description: Emergency platform shutdown
    preconditions:
      - Critical security event
      - Executive approval (2 of 3)
    main_flow:
      1: Admin initiates shutdown procedure
      2: System requires 2FA from 2 executives
      3: System halts all trading
      4: System blocks all withdrawals
      5: System disables API access
      6: System enables read-only mode
      7: Incident response initiated
    postconditions:
      - Platform in safe mode
      - Investigation underway

# =============================================================================
# AUDIT & LOGGING
# =============================================================================
audit:
  all_admin_actions:
    - Logged with timestamp
    - Logged with admin ID
    - Logged with IP address
    - Logged with action details
    - Immutable audit trail

  retention: 7 years

  review:
    - Monthly access review
    - Quarterly audit report
    - Annual compliance audit

# =============================================================================
# EXCEPTION HANDLING
# =============================================================================
common_exceptions:
  - id: EX-ADM-001
    name: Permission Denied
    handling: Show error, log attempt, alert if suspicious

  - id: EX-ADM-002
    name: Approval Required
    handling: Queue for approval, notify approver

  - id: EX-ADM-003
    name: Dual Control Required
    handling: Require second admin confirmation

  - id: EX-ADM-004
    name: Rate Limited
    handling: Slow down admin, prevent abuse
