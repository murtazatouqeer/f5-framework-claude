name: CryptoAsset
display_name: Crypto Asset / Tài sản tiền điện tử
description: |
  Cryptocurrency or token available for trading, deposit, and withdrawal
  on the exchange platform.

domain: fintech
sub_domain: crypto
entity_type: reference
version: "1.0"
status: active

# =============================================================================
# ATTRIBUTES
# =============================================================================
attributes:
  # Primary Key
  id:
    type: uuid
    primary_key: true
    description: Unique asset identifier

  # Asset Identification
  symbol:
    type: string
    max_length: 20
    required: true
    unique: true
    indexed: true
    description: Trading symbol (BTC, ETH, USDT)
    examples: [BTC, ETH, USDT, BNB, SOL, DOGE]

  name:
    type: string
    max_length: 100
    required: true
    description: Full name of the asset
    examples: [Bitcoin, Ethereum, Tether, Binance Coin]

  name_vi:
    type: string
    max_length: 100
    description: Vietnamese name if applicable

  # Classification
  asset_type:
    type: enum
    required: true
    values:
      - coin
      - token
      - stablecoin
      - wrapped
      - nft
    description: Type of crypto asset
    definition:
      coin: Native blockchain currency (BTC, ETH)
      token: Built on another blockchain (ERC-20, BEP-20)
      stablecoin: Pegged to fiat currency (USDT, USDC)
      wrapped: Wrapped version of another asset (WBTC)
      nft: Non-fungible token

  # Network Information
  network:
    type: enum
    required: true
    values:
      - bitcoin
      - ethereum
      - bsc
      - polygon
      - solana
      - tron
      - avalanche
      - arbitrum
      - optimism
      - base
      - ton
    description: Primary blockchain network

  supported_networks:
    type: array
    items: string
    description: All supported networks for deposit/withdrawal
    examples: [[ethereum, bsc, polygon, arbitrum]]

  contract_address:
    type: string
    max_length: 100
    description: Smart contract address (for tokens)
    examples: ["0xdAC17F958D2ee523a2206206994597C13D831ec7"]

  # Precision
  decimals:
    type: integer
    required: true
    min: 0
    max: 18
    description: Number of decimal places
    examples:
      BTC: 8
      ETH: 18
      USDT: 6

  # Status Flags
  status:
    type: enum
    required: true
    values:
      - active
      - suspended
      - delisted
    default: active
    description: Overall asset status

  deposit_enabled:
    type: boolean
    default: true
    description: Whether deposits are accepted

  withdrawal_enabled:
    type: boolean
    default: true
    description: Whether withdrawals are allowed

  trading_enabled:
    type: boolean
    default: true
    description: Whether trading is active

  # Deposit Configuration
  min_deposit:
    type: decimal
    precision: 28
    scale: 8
    description: Minimum deposit amount
    examples:
      BTC: 0.0001
      ETH: 0.001
      USDT: 1

  confirmations_required:
    type: object
    description: Confirmations needed per network
    example:
      bitcoin: 3
      ethereum: 12
      tron: 20
      bsc: 15

  # Withdrawal Configuration
  min_withdrawal:
    type: decimal
    precision: 28
    scale: 8
    description: Minimum withdrawal amount
    examples:
      BTC: 0.001
      ETH: 0.01
      USDT: 10

  max_withdrawal_daily:
    type: decimal
    precision: 28
    scale: 8
    description: Maximum daily withdrawal (per user)

  withdrawal_fee:
    type: object
    description: Withdrawal fees per network
    example:
      bitcoin: 0.0005
      ethereum: 0.005
      tron: 1

  withdrawal_fee_type:
    type: enum
    values:
      - fixed
      - percentage
    default: fixed
    description: How withdrawal fee is calculated

  # Market Data
  market_cap_usd:
    type: decimal
    precision: 28
    scale: 2
    description: Market capitalization in USD

  circulating_supply:
    type: decimal
    precision: 28
    scale: 0
    description: Circulating supply

  max_supply:
    type: decimal
    precision: 28
    scale: 0
    description: Maximum supply (null if unlimited)

  # Display
  logo_url:
    type: string
    max_length: 500
    description: URL to asset logo

  color:
    type: string
    max_length: 7
    description: Brand color (hex)
    examples:
      BTC: "#F7931A"
      ETH: "#627EEA"

  # Timestamps
  listed_at:
    type: timestamp
    description: When asset was listed on exchange

  delisted_at:
    type: timestamp
    description: When asset was delisted

  updated_at:
    type: timestamp
    auto_update: true

# =============================================================================
# RELATIONSHIPS
# =============================================================================
relationships:
  trading_pairs_as_base:
    type: has_many
    entity: TradingPair
    foreign_key: base_asset_id
    description: Trading pairs where this is base asset

  trading_pairs_as_quote:
    type: has_many
    entity: TradingPair
    foreign_key: quote_asset_id
    description: Trading pairs where this is quote asset

  balances:
    type: has_many
    entity: Balance
    foreign_key: asset_id
    description: User balances of this asset

  deposits:
    type: has_many
    entity: Deposit
    foreign_key: asset_id
    description: Deposits of this asset

  withdrawals:
    type: has_many
    entity: Withdrawal
    foreign_key: asset_id
    description: Withdrawals of this asset

# =============================================================================
# INDEXES
# =============================================================================
indexes:
  - name: idx_asset_symbol
    columns: [symbol]
    unique: true

  - name: idx_asset_type
    columns: [asset_type]
    unique: false

  - name: idx_asset_status
    columns: [status]
    unique: false

  - name: idx_asset_network
    columns: [network]
    unique: false

# =============================================================================
# COMMON ASSETS
# =============================================================================
seed_data:
  - symbol: BTC
    name: Bitcoin
    asset_type: coin
    network: bitcoin
    decimals: 8
    min_deposit: 0.0001
    min_withdrawal: 0.001
    confirmations_required: { bitcoin: 3 }

  - symbol: ETH
    name: Ethereum
    asset_type: coin
    network: ethereum
    decimals: 18
    min_deposit: 0.001
    min_withdrawal: 0.01
    confirmations_required: { ethereum: 12 }

  - symbol: USDT
    name: Tether
    asset_type: stablecoin
    network: ethereum
    supported_networks: [ethereum, tron, bsc, polygon]
    decimals: 6
    min_deposit: 1
    min_withdrawal: 10

  - symbol: BNB
    name: BNB
    asset_type: coin
    network: bsc
    decimals: 18

  - symbol: SOL
    name: Solana
    asset_type: coin
    network: solana
    decimals: 9

# =============================================================================
# AUDIT
# =============================================================================
audit:
  enabled: true
  log_changes: true
  sensitive_fields: []
  retention_years: 7
