name: Investment Rules
display_name: Investment Rules / Quy tắc đầu tư
description: |
  Business rules governing investor eligibility, investment limits,
  auto-invest configuration, and portfolio diversification requirements.

domain: fintech
sub_domain: p2p-lending
version: "1.0"
status: active

# =============================================================================
# INVESTOR ELIGIBILITY
# =============================================================================
investor_eligibility:
  rule_id: INR-001
  name: Investor Eligibility Requirements
  name_vi: Yêu cầu đủ điều kiện nhà đầu tư

  individual_investor:
    age_requirement:
      minimum: 18
      maximum: null
      description: "Must be at least 18 years old"

    identity_verification:
      kyc_required: true
      acceptable_documents:
        - national_id
        - passport
        - driver_license
      liveness_check: required

    suitability_assessment:
      required: true
      topics:
        - investment_experience
        - risk_tolerance
        - investment_objectives
        - financial_situation
      validity_period: 24_months

    risk_acknowledgment:
      required: true
      acknowledgments:
        - capital_at_risk
        - not_deposit_protected
        - potential_total_loss
        - illiquidity_risk
        - platform_risk

  institutional_investor:
    registration_required: true
    documentation:
      - company_registration
      - authorized_signatories
      - board_resolution
      - aml_documentation

  accredited_investor:
    qualification_criteria:
      annual_income: ">= 1,000,000,000 VND"
      net_worth: ">= 5,000,000,000 VND"
      or:
        - licensed_investment_professional
        - qualified_institutional_investor
    benefits:
      - higher_investment_limits
      - access_to_all_grades
      - reduced_diversification_requirements

# =============================================================================
# INVESTMENT LIMITS
# =============================================================================
investment_limits:
  rule_id: INR-002
  name: Investment Limit Rules
  name_vi: Quy tắc giới hạn đầu tư

  per_loan_limits:
    individual:
      minimum: 100000
      maximum_percentage: 10
      maximum_absolute: 50000000
      description: "Max 10% of any single loan or 50M VND"

    institutional:
      minimum: 1000000
      maximum_percentage: 25
      maximum_absolute: 200000000
      description: "Max 25% of any single loan or 200M VND"

    accredited:
      minimum: 100000
      maximum_percentage: 20
      maximum_absolute: 100000000
      description: "Max 20% of any single loan or 100M VND"

  portfolio_limits:
    individual:
      no_limit: true
      recommendation: "diversify_across_100_loans"

    new_investor:
      first_30_days:
        maximum_total: 20000000
        maximum_per_loan: 2000000
        description: "Limited exposure during learning period"

  investment_increment:
    minimum: 100000
    description: "Investments must be in multiples of 100,000 VND"

  concentration_limits:
    single_borrower: 10
    single_grade: 40
    single_term: 50
    unit: percent_of_portfolio
    applies_to: individual_investors

# =============================================================================
# AUTO-INVEST RULES
# =============================================================================
auto_invest:
  rule_id: INR-003
  name: Auto-Invest Configuration Rules
  name_vi: Quy tắc cấu hình đầu tư tự động

  eligibility:
    requirements:
      - investor_status: active
      - kyc_verified: true
      - suitability_completed: true
      - available_balance: ">= minimum_investment"

  configuration_options:
    investment_amount:
      minimum: 100000
      maximum: 50000000
      default: 500000
      increment: 100000

    grade_selection:
      allowed_grades: [A, B, C, D, E, F]
      default_grades: [A, B, C]
      minimum_grades: 1
      description: "Select eligible loan grades"

    term_selection:
      allowed_terms: [3, 6, 9, 12, 18, 24, 36, 48, 60]
      default_terms: [6, 12, 24]
      unit: months
      description: "Select eligible loan terms"

    rate_filter:
      minimum_rate: 8.0
      maximum_rate: 36.0
      default_minimum: 10.0
      description: "Filter by interest rate"

    purpose_filter:
      allowed_purposes:
        - personal
        - business
        - education
        - medical
        - home_improvement
        - debt_consolidation
        - auto
      default: all
      description: "Filter by loan purpose"

    reserve_amount:
      minimum: 0
      default: 0
      description: "Keep this amount uninvested"

  matching_algorithm:
    priority_order:
      - oldest_listing_first: true
      - highest_rate_first: false
      - best_grade_first: false
    matching_frequency: real_time
    batch_processing: every_5_minutes

  execution_rules:
    - rule: check_available_balance
      description: "Ensure sufficient funds before investing"

    - rule: check_per_loan_limit
      description: "Respect maximum per loan limits"

    - rule: check_diversification
      description: "Ensure portfolio diversification"

    - rule: check_duplicate
      description: "Prevent duplicate investments in same loan"

  strategies:
    balanced:
      description: "Even distribution across grades B-D"
      allocation:
        B: 40
        C: 40
        D: 20
      target_return: "12-15%"

    conservative:
      description: "Focus on high-grade loans"
      allocation:
        A: 50
        B: 40
        C: 10
      target_return: "10-12%"

    aggressive:
      description: "Higher risk for higher returns"
      allocation:
        C: 30
        D: 40
        E: 30
      target_return: "16-20%"

    custom:
      description: "User-defined allocation"
      allocation: user_specified

# =============================================================================
# DIVERSIFICATION RULES
# =============================================================================
diversification:
  rule_id: INR-004
  name: Portfolio Diversification Rules
  name_vi: Quy tắc đa dạng hóa danh mục

  recommendations:
    minimum_loans: 50
    description: "Invest in at least 50 loans for adequate diversification"

  grade_diversification:
    maximum_single_grade: 40
    unit: percent
    description: "No more than 40% in any single grade"

  term_diversification:
    maximum_single_term: 50
    unit: percent
    description: "No more than 50% in any single term bucket"

  purpose_diversification:
    maximum_single_purpose: 30
    unit: percent
    description: "No more than 30% in any single loan purpose"

  warnings:
    concentration_warning:
      trigger: "single_loan > 5% of portfolio"
      message: "High concentration in single loan"

    grade_warning:
      trigger: "single_grade > 50% of portfolio"
      message: "Consider diversifying across grades"

    new_investor_warning:
      trigger: "total_loans < 10"
      message: "Continue building diversified portfolio"

  enforcement:
    for_individual: warning_only
    for_institutional: enforced
    for_auto_invest: enforced

# =============================================================================
# SECONDARY MARKET RULES
# =============================================================================
secondary_market:
  rule_id: INR-005
  name: Secondary Market Trading Rules
  name_vi: Quy tắc giao dịch thị trường thứ cấp

  eligibility_to_sell:
    requirements:
      - investment_age: ">= 30 days"
      - loan_status: active
      - loan_not_delinquent: "dpd < 30"
      - no_pending_payments: true

  pricing_rules:
    discount_allowed:
      minimum: -20
      maximum: 0
      unit: percent
      description: "Can sell at up to 20% discount"

    premium_allowed:
      minimum: 0
      maximum: 10
      unit: percent
      description: "Can sell at up to 10% premium"

    pricing_base: remaining_principal

  fees:
    seller_fee:
      rate: 1.0
      unit: percent
      base: sale_amount

    buyer_fee:
      rate: 0
      description: "No fee for buyers"

  restrictions:
    - cannot_sell_if: loan_in_default
    - cannot_sell_if: payment_due_within_7_days
    - cannot_sell_if: legal_action_pending

  matching:
    order_type: limit_order
    execution: first_come_first_served
    partial_fills: allowed

# =============================================================================
# WITHDRAWAL RULES
# =============================================================================
withdrawal_rules:
  rule_id: INR-006
  name: Fund Withdrawal Rules
  name_vi: Quy tắc rút tiền

  eligible_balance:
    formula: "available_balance - auto_invest_reserve"
    description: "Only available balance can be withdrawn"

  limits:
    daily_limit:
      individual: 500000000
      institutional: 2000000000

    monthly_limit:
      individual: 2000000000
      institutional: 10000000000

  free_withdrawals:
    count: 2
    period: monthly
    description: "2 free withdrawals per month"

  withdrawal_fee:
    after_free_limit:
      amount: 11000
      or_percentage: 0.011
      whichever: higher
      minimum: 11000
      maximum: 110000

  processing_time:
    same_bank: instant
    other_bank: 1_business_day
    large_amount: 2_business_days
    large_threshold: 100000000

  verification:
    small_withdrawal: otp_only
    large_withdrawal: otp_plus_verification
    large_threshold: 50000000

# =============================================================================
# INVESTOR RETURNS
# =============================================================================
investor_returns:
  rule_id: INR-007
  name: Investor Return Calculation
  name_vi: Tính lợi nhuận nhà đầu tư

  distribution_timing:
    frequency: upon_repayment_receipt
    delay: same_day
    description: "Distribute to investors same day as borrower payment"

  distribution_priority:
    order:
      - platform_service_fee
      - provision_fund_contribution
      - investor_principal
      - investor_interest

  service_fee:
    rate: 1.0
    base: interest_received
    description: "1% of interest received"

  provision_contribution:
    rate: 0.5
    base: interest_received
    optional: false
    description: "Contribution to investor protection fund"

  net_return_formula: |
    Net = Interest_Received - Service_Fee - Provision_Contribution
    Net_Rate = (Net / Principal) * (12 / Months) * 100

  expected_returns:
    by_grade:
      A: { gross: "8-10%", net: "7.5-9.5%" }
      B: { gross: "10-14%", net: "9.5-13.5%" }
      C: { gross: "13-18%", net: "12.5-17.5%" }
      D: { gross: "16-22%", net: "15.5-21.5%" }
      E: { gross: "20-28%", net: "19.5-27.5%" }
      F: { gross: "26-36%", net: "25.5-35.5%" }
    note: "Net returns after 1% service fee and 0.5% provision"

# =============================================================================
# INVESTOR PROTECTION
# =============================================================================
investor_protection:
  rule_id: INR-008
  name: Investor Protection Rules
  name_vi: Quy tắc bảo vệ nhà đầu tư

  provision_fund:
    coverage: 80
    unit: percent_of_principal
    eligibility:
      - loan_status: defaulted
      - dpd: ">= 90"
      - collection_attempted: true
    claim_processing: 30_days

  risk_disclosures:
    required: true
    topics:
      - capital_loss_risk
      - default_risk
      - liquidity_risk
      - platform_risk
      - economic_risk
    acknowledgment_required: true
    refresh_frequency: annual

  cooling_off_period:
    duration: 0
    description: "No cooling off - investments are binding"
    exception: platform_error

  dispute_resolution:
    first_level: platform_support
    second_level: ombudsman
    final: arbitration

# =============================================================================
# AUDIT & COMPLIANCE
# =============================================================================
audit:
  enabled: true
  log_all_investments: true
  log_auto_invest_decisions: true
  log_withdrawals: true
  retention_years: 10

compliance:
  investor_suitability:
    assessment_required: true
    reassessment_frequency: 24_months
    risk_warning_display: prominent

  aml_checks:
    source_of_funds: required_above_threshold
    threshold: 200000000
    periodic_review: annual

  reporting:
    tax_reporting: annual
    investor_statements: monthly
    regulatory_reports: as_required
