name: Credit Scoring Rules
display_name: Credit Scoring Rules / Quy tắc chấm điểm tín dụng
description: |
  Business rules governing credit score calculation, grade assignment,
  scoring model components, and credit decision automation.

domain: fintech
sub_domain: p2p-lending
version: "1.0"
status: active

# =============================================================================
# SCORING MODEL RULES
# =============================================================================
scoring_model:
  rule_id: CSR-001
  name: Credit Scoring Model Configuration
  name_vi: Cấu hình mô hình chấm điểm tín dụng

  version: "2.3"
  effective_date: "2025-01-01"

  score_range:
    minimum: 300
    maximum: 850
    calculation: "300 + (weighted_component_score * 5.5)"

  components:
    - component_id: COMP-001
      name: Payment History
      name_vi: Lịch sử thanh toán
      weight: 0.35
      description: "Historical payment behavior on all credit accounts"

      factors:
        - factor: on_time_payments
          scoring:
            - condition: "on_time_rate = 100%"
              score: 100
            - condition: "on_time_rate >= 95%"
              score: 90
            - condition: "on_time_rate >= 90%"
              score: 80
            - condition: "on_time_rate >= 80%"
              score: 60
            - condition: "on_time_rate >= 70%"
              score: 40
            - condition: "on_time_rate < 70%"
              score: 20

        - factor: late_payments
          scoring:
            - condition: "no late payments"
              score: 100
            - condition: "1-2 late payments in 2 years"
              score: 80
            - condition: "3-4 late payments in 2 years"
              score: 60
            - condition: "5+ late payments in 2 years"
              score: 30

        - factor: defaults
          scoring:
            - condition: "no defaults"
              score: 100
            - condition: "1 default > 3 years ago"
              score: 50
            - condition: "1 default < 3 years ago"
              score: 20
            - condition: "2+ defaults"
              score: 0

    - component_id: COMP-002
      name: Credit Utilization
      name_vi: Tỷ lệ sử dụng tín dụng
      weight: 0.30
      description: "Ratio of used credit to available credit"

      factors:
        - factor: utilization_ratio
          scoring:
            - condition: "utilization < 10%"
              score: 100
            - condition: "utilization 10-30%"
              score: 90
            - condition: "utilization 30-50%"
              score: 70
            - condition: "utilization 50-70%"
              score: 50
            - condition: "utilization 70-90%"
              score: 30
            - condition: "utilization > 90%"
              score: 10

    - component_id: COMP-003
      name: Credit Age
      name_vi: Tuổi tín dụng
      weight: 0.15
      description: "Length of credit history"

      factors:
        - factor: oldest_account_age
          scoring:
            - condition: "> 7 years"
              score: 100
            - condition: "5-7 years"
              score: 90
            - condition: "3-5 years"
              score: 75
            - condition: "1-3 years"
              score: 55
            - condition: "6-12 months"
              score: 35
            - condition: "< 6 months"
              score: 20

    - component_id: COMP-004
      name: Credit Mix
      name_vi: Danh mục tín dụng
      weight: 0.10
      description: "Diversity of credit types"

      factors:
        - factor: account_types
          scoring:
            - condition: "4+ different types"
              score: 100
            - condition: "3 types"
              score: 85
            - condition: "2 types"
              score: 65
            - condition: "1 type"
              score: 45

    - component_id: COMP-005
      name: New Credit
      name_vi: Tín dụng mới
      weight: 0.10
      description: "Recent credit inquiries and new accounts"

      factors:
        - factor: recent_inquiries
          scoring:
            - condition: "0 inquiries in 6 months"
              score: 100
            - condition: "1-2 inquiries"
              score: 85
            - condition: "3-4 inquiries"
              score: 65
            - condition: "5-6 inquiries"
              score: 45
            - condition: "> 6 inquiries"
              score: 25

# =============================================================================
# GRADE ASSIGNMENT RULES
# =============================================================================
grade_assignment:
  rule_id: CSR-002
  name: Grade Assignment Rules
  name_vi: Quy tắc phân loại hạng

  grades:
    - grade: A
      score_range: [760, 850]
      risk_level: very_low
      description: "Excellent credit"
      sub_grades:
        A1: [820, 850]
        A2: [800, 819]
        A3: [780, 799]
        A4: [770, 779]
        A5: [760, 769]

    - grade: B
      score_range: [700, 759]
      risk_level: low
      description: "Good credit"
      sub_grades:
        B1: [740, 759]
        B2: [730, 739]
        B3: [720, 729]
        B4: [710, 719]
        B5: [700, 709]

    - grade: C
      score_range: [640, 699]
      risk_level: medium
      description: "Fair credit"
      sub_grades:
        C1: [680, 699]
        C2: [670, 679]
        C3: [660, 669]
        C4: [650, 659]
        C5: [640, 649]

    - grade: D
      score_range: [580, 639]
      risk_level: high
      description: "Below average credit"
      sub_grades:
        D1: [620, 639]
        D2: [610, 619]
        D3: [600, 609]
        D4: [590, 599]
        D5: [580, 589]

    - grade: E
      score_range: [500, 579]
      risk_level: high
      description: "Poor credit"
      sub_grades:
        E1: [560, 579]
        E2: [545, 559]
        E3: [530, 544]
        E4: [515, 529]
        E5: [500, 514]

    - grade: F
      score_range: [300, 499]
      risk_level: very_high
      description: "Very poor credit"
      sub_grades:
        F1: [450, 499]
        F2: [420, 449]
        F3: [390, 419]
        F4: [360, 389]
        F5: [300, 359]

# =============================================================================
# ELIGIBILITY RULES
# =============================================================================
eligibility_rules:
  rule_id: CSR-003
  name: Credit Eligibility Rules
  name_vi: Quy tắc đủ điều kiện tín dụng

  minimum_requirements:
    - requirement: minimum_score
      value: 450
      description: "Minimum credit score for any loan approval"
      action_if_fail: reject
      exception: none

    - requirement: minimum_income
      value: 5000000
      unit: VND
      description: "Minimum monthly income"
      action_if_fail: reject

    - requirement: maximum_dti
      value: 50
      unit: percent
      description: "Maximum debt-to-income ratio"
      action_if_fail: reject_or_reduce_amount

    - requirement: employment_duration
      value: 3
      unit: months
      description: "Minimum time at current employer"
      action_if_fail: manual_review

    - requirement: age_range
      min: 18
      max: 60
      unit: years
      description: "Age range at loan maturity"
      action_if_fail: reject

  disqualifiers:
    - condition: active_default
      description: "Active default on platform"
      action: reject

    - condition: fraud_history
      description: "Previous fraud confirmed"
      action: reject

    - condition: bankruptcy
      lookback_years: 5
      description: "Bankruptcy in last 5 years"
      action: reject

    - condition: excessive_active_loans
      threshold: 2
      description: "More than 2 active loans"
      action: reject

# =============================================================================
# AUTO-DECISION RULES
# =============================================================================
auto_decision:
  rule_id: CSR-004
  name: Automated Decision Rules
  name_vi: Quy tắc quyết định tự động

  auto_approve:
    conditions:
      - credit_score: ">= 650"
      - dti_ratio: "<= 35%"
      - employment_verified: true
      - income_verified: true
      - no_fraud_flags: true
      - first_time_borrower: false
      - loan_amount: "<= approved_limit"
    decision: approve
    confidence: high

  auto_reject:
    conditions:
      - credit_score: "< 450"
    decision: reject
    reason: "Credit score below minimum threshold"

    conditions:
      - active_defaults: "> 0"
    decision: reject
    reason: "Active default on platform"

    conditions:
      - fraud_score: "> 80"
    decision: reject
    reason: "High fraud risk detected"

  manual_review:
    conditions:
      - credit_score: "450-649"
      - first_time_borrower: true
      - income_not_verified: true
      - employment_duration: "< 6 months"
      - fraud_flags: present
      - thin_file: true
    decision: manual_review
    sla: 24_hours

# =============================================================================
# LIMIT CALCULATION RULES
# =============================================================================
limit_calculation:
  rule_id: CSR-005
  name: Credit Limit Calculation
  name_vi: Tính toán hạn mức tín dụng

  base_limit_formula:
    formula: "verified_monthly_income * income_multiplier"
    income_multipliers:
      grade_A: 10
      grade_B: 8
      grade_C: 6
      grade_D: 4
      grade_E: 3
      grade_F: 2

  adjustments:
    - factor: dti_adjustment
      condition: "dti > 30%"
      adjustment: "-10% per 5% DTI above 30%"

    - factor: platform_history
      condition: "completed_loans > 0"
      adjustment: "+10% per completed loan"
      max_bonus: 50%

    - factor: on_time_bonus
      condition: "on_time_rate = 100%"
      adjustment: "+15%"

    - factor: late_payment_penalty
      condition: "late_payments > 0"
      adjustment: "-5% per late payment"
      max_penalty: 30%

  absolute_limits:
    minimum: 1000000
    maximum:
      individual: 500000000
      business: 2000000000

# =============================================================================
# RESCORING RULES
# =============================================================================
rescoring:
  rule_id: CSR-006
  name: Credit Rescoring Rules
  name_vi: Quy tắc chấm điểm lại

  triggers:
    - event: loan_application
      description: "New score required for each application"

    - event: scheduled_review
      frequency: every_6_months
      for: active_borrowers

    - event: material_change
      conditions:
        - new_default_reported
        - significant_income_change
        - employment_change

    - event: payment_behavior
      conditions:
        - 3_consecutive_late_payments
        - default_initiated

  score_impact:
    late_payment:
      impact: "-15 to -30 points"
      recovery: "Gradual over 12-24 months"

    default:
      impact: "-100 to -150 points"
      recovery: "Gradual over 36-60 months"

    successful_completion:
      impact: "+10 to +20 points"
      per_loan: true

# =============================================================================
# EXTERNAL DATA RULES
# =============================================================================
external_data:
  rule_id: CSR-007
  name: External Data Integration Rules
  name_vi: Quy tắc tích hợp dữ liệu bên ngoài

  credit_bureau:
    provider: CIC_Vietnam
    required_for:
      - loan_amount: "> 50,000,000 VND"
      - first_time_borrower: true
      - credit_score: "< 600"
    refresh_frequency: every_application
    max_age: 30_days

  integration_weight:
    internal_score: 0.70
    external_score: 0.30
    formula: "(internal * 0.7) + (external_normalized * 0.3)"

  external_flags:
    - flag: external_default
      action: reduce_score_50_points

    - flag: external_collection
      action: reduce_score_30_points

    - flag: multiple_inquiries
      action: reduce_score_10_points

# =============================================================================
# VALIDATION & AUDIT
# =============================================================================
validation:
  data_quality:
    - check: completeness
      minimum: 70%
      action_if_fail: manual_review

    - check: consistency
      description: "Cross-validate data points"
      action_if_fail: flag_for_review

  model_monitoring:
    - metric: gini_coefficient
      threshold: "> 0.40"
      frequency: monthly

    - metric: ks_statistic
      threshold: "> 0.30"
      frequency: monthly

    - metric: population_stability
      threshold: "< 0.25"
      frequency: monthly

audit:
  enabled: true
  log_all_decisions: true
  log_all_calculations: true
  retention_years: 7
  required_fields:
    - decision
    - score
    - components
    - timestamp
    - model_version
