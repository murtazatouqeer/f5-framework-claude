# B2C Retail Customer Use Cases

name: customer-use-cases
domain: e-commerce
sub_domain: b2c-retail

use_cases:
  # Account Management
  - id: UC-CUST-001
    name: Customer Registration
    actor: Guest User
    description: Create a new customer account
    preconditions:
      - User is not logged in
      - Email is not already registered
    main_flow:
      1: User navigates to registration page
      2: User enters email, password, and basic info
      3: System validates email format and password strength
      4: System checks email uniqueness
      5: System creates customer account
      6: System sends verification email
      7: User clicks verification link
      8: Account is activated
    alternative_flows:
      A1: Social Registration
        trigger: User clicks social login button
        steps:
          1: System redirects to OAuth provider
          2: User authenticates with provider
          3: System receives user profile
          4: System creates/links account
      A2: Email Already Registered
        trigger: Step 4 - email exists
        steps:
          1: System shows error message
          2: System offers password reset option
    postconditions:
      - Account created and verified
      - Welcome email sent
      - User can log in
    business_rules:
      - Password minimum 8 characters with complexity
      - Email verification required within 24 hours
      - GDPR consent collected if applicable

  - id: UC-CUST-002
    name: Customer Login
    actor: Registered Customer
    description: Authenticate into customer account
    preconditions:
      - User has registered account
      - Account is active
    main_flow:
      1: User navigates to login page
      2: User enters email and password
      3: System validates credentials
      4: System creates session
      5: User is redirected to previous page or dashboard
    alternative_flows:
      A1: Remember Me
        trigger: User checks "remember me"
        steps:
          1: System creates long-lived token
          2: Token stored securely in cookie
      A2: Two-Factor Authentication
        trigger: 2FA enabled on account
        steps:
          1: System prompts for 2FA code
          2: User enters code from authenticator
          3: System validates code
      A3: Invalid Credentials
        trigger: Step 3 - credentials invalid
        steps:
          1: System increments failed attempt counter
          2: System shows generic error message
          3: If 5 failed attempts, lock account for 15 minutes
    postconditions:
      - User logged in
      - Session created
      - Cart merged if guest cart exists
    business_rules:
      - Session timeout after 30 minutes inactivity
      - Max 5 failed login attempts before lockout

  - id: UC-CUST-003
    name: Password Reset
    actor: Registered Customer
    description: Reset forgotten password
    preconditions:
      - User has registered account
      - User forgot password
    main_flow:
      1: User clicks "Forgot Password"
      2: User enters email address
      3: System validates email exists
      4: System generates reset token
      5: System sends reset email
      6: User clicks reset link
      7: User enters new password
      8: System updates password
      9: System invalidates all existing sessions
    postconditions:
      - Password updated
      - User can log in with new password
      - All sessions invalidated
    business_rules:
      - Reset token valid for 1 hour
      - Cannot reuse last 5 passwords
      - Notify user of password change

  - id: UC-CUST-004
    name: Manage Profile
    actor: Registered Customer
    description: Update personal information
    preconditions:
      - User is logged in
    main_flow:
      1: User navigates to account settings
      2: User updates profile fields
      3: System validates changes
      4: System saves updates
      5: System confirms changes
    fields_editable:
      - first_name
      - last_name
      - phone
      - date_of_birth
      - marketing_preferences
    postconditions:
      - Profile updated
      - Change history logged

  # Shopping Experience
  - id: UC-SHOP-001
    name: Browse Products
    actor: Customer/Guest
    description: Browse product catalog
    preconditions:
      - Products exist in catalog
    main_flow:
      1: User navigates to category or search
      2: System displays product grid
      3: User applies filters (price, brand, attributes)
      4: System updates results
      5: User sorts results
      6: User navigates pagination
      7: User clicks product to view details
    filters_available:
      - price_range
      - brand
      - category
      - rating
      - availability
      - size
      - color
    sort_options:
      - relevance
      - price_low_to_high
      - price_high_to_low
      - newest
      - best_selling
      - highest_rated
    postconditions:
      - User views filtered product list

  - id: UC-SHOP-002
    name: Search Products
    actor: Customer/Guest
    description: Search for products using keywords
    preconditions:
      - Search index populated
    main_flow:
      1: User enters search query
      2: System shows autocomplete suggestions
      3: User submits search
      4: System performs full-text search
      5: System displays ranked results
      6: User refines with filters
    search_features:
      - autocomplete
      - typo_tolerance
      - synonyms
      - faceted_search
      - search_within_results
    postconditions:
      - Relevant products displayed
      - Search logged for analytics

  - id: UC-SHOP-003
    name: View Product Details
    actor: Customer/Guest
    description: View detailed product information
    preconditions:
      - Product exists and is active
    main_flow:
      1: User clicks on product
      2: System displays product page
      3: User views images gallery
      4: User reads description and specs
      5: User checks availability
      6: User selects variant options
      7: User reads reviews
      8: User adds to cart or wishlist
    displayed_info:
      - product_images
      - name_and_brand
      - price_and_sale_price
      - description
      - specifications
      - variant_options
      - stock_status
      - shipping_estimate
      - reviews_and_ratings
      - related_products
      - recently_viewed
    postconditions:
      - Product view logged
      - Recently viewed updated

  - id: UC-SHOP-004
    name: Add to Cart
    actor: Customer/Guest
    description: Add product to shopping cart
    preconditions:
      - Product is available
      - Stock is sufficient
    main_flow:
      1: User selects variant options
      2: User enters quantity
      3: User clicks "Add to Cart"
      4: System validates availability
      5: System adds item to cart
      6: System shows cart confirmation
      7: User continues shopping or proceeds to checkout
    alternative_flows:
      A1: Insufficient Stock
        trigger: Step 4 - quantity exceeds stock
        steps:
          1: System shows max available quantity
          2: User adjusts quantity
      A2: Out of Stock
        trigger: Product is out of stock
        steps:
          1: System shows "Out of Stock" status
          2: User can sign up for back-in-stock notification
    postconditions:
      - Item added to cart
      - Cart totals updated
      - Analytics event triggered

  - id: UC-SHOP-005
    name: Manage Cart
    actor: Customer/Guest
    description: View and modify shopping cart
    preconditions:
      - Cart has items
    main_flow:
      1: User navigates to cart
      2: System displays cart items
      3: User updates quantities
      4: User removes unwanted items
      5: User applies coupon code
      6: System recalculates totals
      7: User proceeds to checkout
    cart_features:
      - quantity_adjustment
      - item_removal
      - save_for_later
      - coupon_application
      - shipping_estimate
      - cross_sell_recommendations
    postconditions:
      - Cart updated
      - Totals recalculated

  - id: UC-SHOP-006
    name: Apply Coupon
    actor: Customer/Guest
    description: Apply discount coupon to order
    preconditions:
      - Cart has items
      - Coupon code exists
    main_flow:
      1: User enters coupon code
      2: System validates coupon
      3: System checks eligibility conditions
      4: System applies discount
      5: System updates cart totals
    validation_checks:
      - coupon_exists
      - coupon_active
      - within_validity_period
      - minimum_order_met
      - usage_limit_not_exceeded
      - customer_eligible
      - applicable_products_in_cart
    alternative_flows:
      A1: Invalid Coupon
        trigger: Validation fails
        steps:
          1: System shows specific error message
          2: User corrects or removes coupon
    postconditions:
      - Discount applied
      - Cart totals updated

  # Wishlist
  - id: UC-WISH-001
    name: Manage Wishlist
    actor: Registered Customer
    description: Create and manage product wishlist
    preconditions:
      - User is logged in
    main_flow:
      1: User views product
      2: User clicks "Add to Wishlist"
      3: System adds product to wishlist
      4: User can view wishlist
      5: User can move items to cart
      6: User can share wishlist
      7: User can create multiple wishlists
    wishlist_features:
      - multiple_lists
      - sharing
      - price_drop_alerts
      - back_in_stock_alerts
      - move_to_cart
    postconditions:
      - Product added to wishlist
      - Alerts configured if requested

  # Reviews
  - id: UC-REV-001
    name: Write Product Review
    actor: Registered Customer
    description: Submit review for purchased product
    preconditions:
      - User is logged in
      - User has purchased product
      - No existing review for this product
    main_flow:
      1: User navigates to product or order
      2: User clicks "Write Review"
      3: User selects star rating
      4: User writes review text
      5: User uploads photos (optional)
      6: User submits review
      7: System validates content
      8: Review enters moderation queue
      9: Review published after approval
    review_fields:
      - rating (1-5 stars)
      - title
      - review_text
      - pros
      - cons
      - photos
      - would_recommend
    postconditions:
      - Review submitted
      - Review in moderation
      - Reviewer notified when published

  # Order Tracking
  - id: UC-TRACK-001
    name: Track Order
    actor: Customer
    description: Track order status and delivery
    preconditions:
      - Order exists
      - User has order access
    main_flow:
      1: User navigates to order history
      2: User selects order
      3: System displays order details
      4: System shows order status timeline
      5: System shows tracking information
      6: User clicks tracking link for carrier details
    tracking_info:
      - order_status
      - status_history
      - estimated_delivery
      - carrier_name
      - tracking_number
      - live_tracking_link
      - delivery_proof
    postconditions:
      - User views order status

  # Returns
  - id: UC-RET-001
    name: Request Return
    actor: Registered Customer
    description: Initiate return for delivered order
    preconditions:
      - Order is delivered
      - Within return window
      - Items eligible for return
    main_flow:
      1: User navigates to order
      2: User clicks "Request Return"
      3: User selects items to return
      4: User selects return reason
      5: User chooses refund method
      6: System validates return eligibility
      7: System creates return request
      8: System generates return label
      9: User prints label and ships items
    return_reasons:
      - wrong_item
      - defective
      - not_as_described
      - changed_mind
      - arrived_late
      - better_price_elsewhere
    postconditions:
      - Return request created
      - Return label generated
      - Customer notified
    business_rules:
      - 30-day return window
      - Items must be unused with tags
      - Some categories non-returnable
