name: claimant
display_name: Claimant
description: |
  Person or entity making an insurance claim or receiving claim benefits.
  Includes identity verification and payment details.

domain: insurance
subdomain: claims
category: entities
version: "1.0.0"
status: active

attributes:
  identification:
    - name: id
      type: uuid
      primary_key: true
      description: Unique claimant identifier

    - name: claim_id
      type: uuid
      foreign_key: claim.id
      required: true
      description: Associated claim

    - name: claimant_reference
      type: string
      description: Reference number

  classification:
    - name: claimant_type
      type: enum
      values:
        - policyholder
        - insured
        - beneficiary
        - nominee
        - third_party
        - legal_heir
        - assignee
        - guardian
        - executor
      required: true
      description: Type of claimant

    - name: relationship_to_insured
      type: enum
      values:
        - self
        - spouse
        - parent
        - child
        - sibling
        - other_relative
        - employer
        - business_partner
        - other
      description: Relationship to insured

    - name: is_primary
      type: boolean
      default: true
      description: Primary claimant for this claim

  personal_information:
    - name: salutation
      type: enum
      values: [Mr, Mrs, Ms, Dr, Prof]
      description: Title

    - name: first_name
      type: string
      required: true
      description: First name

    - name: middle_name
      type: string
      description: Middle name

    - name: last_name
      type: string
      required: true
      description: Last name

    - name: full_name
      type: string
      computed: true
      formula: "CONCAT(first_name, ' ', last_name)"
      description: Full name

    - name: date_of_birth
      type: date
      description: Date of birth

    - name: gender
      type: enum
      values: [male, female, other]
      description: Gender

    - name: nationality
      type: string
      description: Nationality

  identity_documents:
    - name: national_id
      type: string
      description: National ID number (CCCD)

    - name: national_id_issue_date
      type: date
      description: ID issue date

    - name: national_id_expiry_date
      type: date
      description: ID expiry date

    - name: passport_number
      type: string
      description: Passport number

    - name: passport_expiry
      type: date
      description: Passport expiry

    - name: other_id_type
      type: string
      description: Other ID type

    - name: other_id_number
      type: string
      description: Other ID number

  contact:
    - name: phone
      type: string
      required: true
      description: Primary phone

    - name: phone_secondary
      type: string
      description: Secondary phone

    - name: email
      type: string
      format: email
      description: Email address

    - name: address
      type: object
      properties:
        street: string
        ward: string
        district: string
        city: string
        province: string
        country: string
        postal_code: string
      description: Mailing address

    - name: preferred_contact_method
      type: enum
      values:
        - phone
        - email
        - sms
        - mail
      default: phone
      description: Preferred contact method

  bank_details:
    - name: bank_name
      type: string
      description: Bank name

    - name: bank_branch
      type: string
      description: Bank branch

    - name: bank_account_number
      type: string
      sensitive: true
      description: Account number

    - name: account_holder_name
      type: string
      description: Name on account

    - name: swift_code
      type: string
      description: SWIFT/BIC code

    - name: iban
      type: string
      description: IBAN (international)

    - name: bank_verified
      type: boolean
      default: false
      description: Bank details verified

    - name: bank_verification_date
      type: datetime
      description: Verification date

    - name: bank_verification_method
      type: enum
      values:
        - micro_deposit
        - document_verification
        - bank_confirmation
        - api_verification
      description: How bank was verified

  verification:
    - name: identity_verified
      type: boolean
      default: false
      description: Identity confirmed

    - name: verification_method
      type: enum
      values:
        - document_check
        - ekyc
        - in_person
        - video_call
        - third_party
      description: Verification method used

    - name: verification_date
      type: datetime
      description: When verified

    - name: verified_by
      type: uuid
      foreign_key: user.id
      description: Who verified

    - name: verification_documents
      type: array
      items: string
      description: Document IDs used for verification

    - name: verification_notes
      type: text
      description: Verification notes

  legal:
    - name: is_minor
      type: boolean
      default: false
      description: Claimant is a minor

    - name: guardian_name
      type: string
      description: Guardian name (if minor)

    - name: guardian_relationship
      type: string
      description: Guardian relationship

    - name: guardian_id
      type: string
      description: Guardian ID number

    - name: power_of_attorney
      type: boolean
      default: false
      description: Has power of attorney

    - name: poa_document
      type: string
      description: POA document reference

    - name: legal_representative
      type: boolean
      default: false
      description: Is legal representative

  allocation:
    - name: benefit_percentage
      type: decimal
      precision: 2
      min: 0
      max: 100
      description: Percentage of benefit allocated

    - name: allocated_amount
      type: decimal
      precision: 2
      description: Specific amount allocated

  status:
    - name: status
      type: enum
      values:
        - active
        - pending_verification
        - verified
        - payment_pending
        - paid
        - inactive
      default: active
      description: Claimant status

    - name: payment_status
      type: enum
      values:
        - not_due
        - pending
        - processing
        - paid
        - failed
      default: not_due
      description: Payment status

    - name: total_paid
      type: decimal
      precision: 2
      default: 0
      description: Total amount paid

  timestamps:
    - name: created_at
      type: datetime
      auto: true
      description: Creation timestamp

    - name: updated_at
      type: datetime
      auto: true
      on_update: true
      description: Update timestamp

relationships:
  - name: claim
    type: belongs_to
    entity: claim
    foreign_key: claim_id
    description: Associated claim

  - name: payments
    type: has_many
    entity: payment
    foreign_key: claimant_id
    description: Payments to claimant

  - name: documents
    type: has_many
    entity: claim_document
    description: Claimant documents

business_rules:
  - rule: BR-CLT-001
    name: Identity verification required
    condition: "identity_verified = true"
    before: payment_processing
    error_message: "Identity must be verified before payment"

  - rule: BR-CLT-002
    name: Bank details required for payment
    condition: "bank_account_number IS NOT NULL"
    before: payment_processing
    error_message: "Bank details required"

  - rule: BR-CLT-003
    name: Guardian required for minor
    condition: "is_minor = true IMPLIES guardian_name IS NOT NULL"
    error_message: "Guardian required for minor claimants"

  - rule: BR-CLT-004
    name: Benefit allocation sum
    condition: "SUM(benefit_percentage) = 100"
    scope: claim
    error_message: "Benefit allocation must total 100%"

api_endpoints:
  - method: POST
    path: /claims/{claim_id}/claimants
    description: Add claimant
    request_body: ClaimantCreateRequest
    response: ClaimantResponse

  - method: GET
    path: /claims/{claim_id}/claimants
    description: List claimants
    response: ClaimantListResponse

  - method: GET
    path: /claims/{claim_id}/claimants/{id}
    description: Get claimant details
    response: ClaimantResponse

  - method: PUT
    path: /claims/{claim_id}/claimants/{id}
    description: Update claimant
    request_body: ClaimantUpdateRequest
    response: ClaimantResponse

  - method: POST
    path: /claims/{claim_id}/claimants/{id}/verify
    description: Verify claimant identity
    request_body: VerificationRequest
    response: ClaimantResponse

  - method: POST
    path: /claims/{claim_id}/claimants/{id}/verify-bank
    description: Verify bank details
    request_body: BankVerificationRequest
    response: ClaimantResponse
