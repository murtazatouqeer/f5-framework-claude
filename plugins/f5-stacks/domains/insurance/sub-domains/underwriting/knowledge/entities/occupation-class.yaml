name: occupation_class
display_name: Occupation Class
description: |
  Master data entity defining occupation classifications for underwriting
  risk assessment, including class definitions, loadings, and restrictions.

domain: insurance
subdomain: underwriting
category: entities
version: "1.0.0"
status: active

attributes:
  identification:
    - name: id
      type: uuid
      primary_key: true
      description: Unique occupation class identifier

    - name: occupation_code
      type: string
      required: true
      unique: true
      description: Unique occupation code

    - name: occupation_name
      type: string
      required: true
      description: Occupation name

    - name: occupation_name_vn
      type: string
      description: Vietnamese occupation name

    - name: description
      type: text
      description: Detailed occupation description

    - name: status
      type: enum
      values:
        - active
        - discontinued
        - under_review
      default: active
      description: Occupation status

  classification:
    - name: occupation_category
      type: enum
      values:
        - professional
        - managerial
        - clerical
        - sales
        - skilled_manual
        - semi_skilled_manual
        - unskilled_manual
        - hazardous
        - military_police
        - aviation
        - mining
        - offshore
      required: true
      description: Occupation category

    - name: industry_sector
      type: string
      description: Industry sector

    - name: class_number
      type: enum
      values:
        - "1"
        - "2"
        - "3"
        - "4"
        - "5"
        - declined
      required: true
      description: Occupation class number

    - name: class_description
      type: string
      description: Class description

  risk_assessment:
    - name: mortality_risk_level
      type: enum
      values:
        - very_low
        - low
        - moderate
        - high
        - very_high
      description: Mortality risk level

    - name: morbidity_risk_level
      type: enum
      values:
        - very_low
        - low
        - moderate
        - high
        - very_high
      description: Morbidity/disability risk level

    - name: accident_risk_level
      type: enum
      values:
        - very_low
        - low
        - moderate
        - high
        - very_high
      description: Accident risk level

    - name: typical_hazards
      type: array
      items:
        type: string
      description: Common occupational hazards

  loadings:
    - name: life_loading_percent
      type: decimal
      precision: 5
      scale: 2
      default: 0
      description: Life insurance loading percentage

    - name: disability_loading_percent
      type: decimal
      precision: 5
      scale: 2
      default: 0
      description: Disability loading percentage

    - name: critical_illness_loading_percent
      type: decimal
      precision: 5
      scale: 2
      default: 0
      description: Critical illness loading percentage

    - name: accident_loading_percent
      type: decimal
      precision: 5
      scale: 2
      default: 0
      description: Accident loading percentage

    - name: loading_type
      type: enum
      values:
        - percentage
        - flat_extra
        - both
      default: percentage
      description: Type of loading applied

    - name: flat_extra_per_mille
      type: decimal
      precision: 5
      scale: 2
      description: Flat extra per 1000 sum (if applicable)

  restrictions:
    - name: max_sum_insured
      type: decimal
      precision: 15
      scale: 2
      description: Maximum sum insured allowed

    - name: currency
      type: string
      default: VND
      description: Sum insured currency

    - name: excluded_coverages
      type: array
      items:
        type: object
        properties:
          coverage_code:
            type: string
          coverage_name:
            type: string
          reason:
            type: string
      description: Coverages not available for occupation

    - name: restricted_coverages
      type: array
      items:
        type: object
        properties:
          coverage_code:
            type: string
          coverage_name:
            type: string
          restriction_type:
            type: enum
            values: [loading, reduced_benefit, special_terms]
          restriction_details:
            type: string
      description: Coverages with restrictions

    - name: special_conditions
      type: array
      items:
        type: object
        properties:
          condition:
            type: string
          applies_to:
            type: array
      description: Special underwriting conditions

  additional_requirements:
    - name: additional_medical_requirements
      type: array
      items:
        type: string
      description: Additional medical exams required

    - name: additional_questionnaire
      type: boolean
      default: false
      description: Whether occupation questionnaire required

    - name: site_inspection_required
      type: boolean
      default: false
      description: Whether workplace inspection required

    - name: safety_certification_required
      type: boolean
      default: false
      description: Whether safety certification required

  examples:
    - name: example_occupations
      type: array
      items:
        type: object
        properties:
          title:
            type: string
          duties:
            type: string
          specific_loading:
            type: decimal
      description: Example occupations in this class

  underwriting_guidelines:
    - name: guidelines
      type: text
      rich_text: true
      description: Detailed underwriting guidelines

    - name: common_questions
      type: array
      items:
        type: object
        properties:
          question:
            type: string
          guidance:
            type: text
      description: FAQ for underwriters

  audit:
    - name: effective_date
      type: date
      description: When classification became effective

    - name: last_reviewed_date
      type: date
      description: Last review date

    - name: reviewed_by
      type: string
      description: Reviewer name

    - name: created_at
      type: timestamp
      default: now()

    - name: updated_at
      type: timestamp

class_definitions:
  class_1:
    description: Professional, managerial, administrative
    risk_level: Very Low
    loadings:
      life: 0%
      disability: 0%
    examples:
      - Accountant
      - Lawyer
      - Doctor (non-surgical)
      - Office manager
      - Software developer

  class_2:
    description: Light manual, supervisory, sales
    risk_level: Low
    loadings:
      life: 0-10%
      disability: 0-25%
    examples:
      - Shop owner
      - Sales representative
      - Light manufacturing supervisor
      - Technician (electronics)

  class_3:
    description: Skilled manual, moderate physical
    risk_level: Moderate
    loadings:
      life: 10-25%
      disability: 25-50%
    examples:
      - Carpenter
      - Electrician
      - Plumber
      - Mechanic
      - Truck driver

  class_4:
    description: Heavy manual, higher hazard
    risk_level: High
    loadings:
      life: 25-50%
      disability: 50-100%
    examples:
      - Construction worker
      - Fisherman
      - Mining (surface)
      - Oil rig worker (onshore)

  class_5:
    description: Very high hazard occupations
    risk_level: Very High
    loadings:
      life: 50-100%+
      disability: 100%+ or exclude
    examples:
      - Underground miner
      - Explosive handler
      - High-rise construction
      - Offshore oil/gas

  declined:
    description: Uninsurable occupations
    risk_level: Unacceptable
    examples:
      - Professional boxer/fighter
      - Stunt performer
      - Mercenary/security contractor in war zone
      - Illegal occupations

relationships:
  - name: risk_assessments
    type: has_many
    entity: risk_assessment
    inverse: occupation_class
    description: Risk assessments using this class

indexes:
  - columns: [occupation_code]
    unique: true
  - columns: [class_number]
  - columns: [occupation_category]
  - columns: [status]

business_rules:
  - rule: Class assignment based on duties, not just title
  - rule: Multiple occupations take highest risk class
  - rule: Hazardous hobbies assessed separately
  - rule: Class changes require re-underwriting
