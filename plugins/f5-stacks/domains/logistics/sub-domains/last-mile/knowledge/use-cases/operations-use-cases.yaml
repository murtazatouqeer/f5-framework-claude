name: OperationsUseCases
display_name: Operations Use Cases
description: |
  Use cases for operations and dispatch teams.
  Covers monitoring, assignment, exception handling, and reporting.

domain: logistics
subdomain: last-mile
category: use-cases
version: "1.0.0"
status: active

actor: operations
actor_description: Operations team members managing last-mile delivery operations

use_cases:
  # Monitoring & Dashboard
  - id: UC-OPS-001
    name: Monitor Live Operations
    description: Operations views real-time delivery status dashboard
    priority: critical
    frequency: continuous

    preconditions:
      - User authenticated with operations role
      - Dashboard access granted

    main_flow:
      - step: 1
        action: Operator opens live dashboard
        system_response: Display real-time metrics

      - step: 2
        action: Operator views delivery map
        system_response: Show all active deliveries

      - step: 3
        action: Operator filters by zone/status
        system_response: Update view with filters

      - step: 4
        action: Operator drills into specific delivery
        system_response: Show delivery details

    dashboard_widgets:
      - Total active deliveries
      - Deliveries by status
      - Agent locations map
      - SLA risk indicators
      - Failed delivery alerts
      - Zone performance

    postconditions:
      - Operations aware of current state
      - Issues visible for action

  - id: UC-OPS-002
    name: Monitor Agent Fleet
    description: Operations tracks all active delivery agents
    priority: high
    frequency: continuous

    preconditions:
      - Operations authenticated
      - Agents on shift

    main_flow:
      - step: 1
        action: Operator opens fleet view
        system_response: Display all agents on map

      - step: 2
        action: Operator views agent status list
        system_response: Show agent statuses

      - step: 3
        action: Operator checks agent performance
        system_response: Display real-time metrics

      - step: 4
        action: Operator identifies issues
        system_response: Highlight problems

    agent_statuses:
      - Available
      - Assigned
      - En route to pickup
      - At pickup
      - Delivering
      - At delivery
      - Returning
      - Break
      - Offline

    postconditions:
      - Fleet status visible
      - Issues identified

  # Assignment & Dispatch
  - id: UC-OPS-003
    name: Manual Delivery Assignment
    description: Operations manually assigns delivery to specific agent
    priority: high
    frequency: medium

    preconditions:
      - Unassigned delivery exists
      - Available agents exist
      - Operations has assignment rights

    main_flow:
      - step: 1
        action: Operator views unassigned deliveries
        system_response: Display delivery list

      - step: 2
        action: Operator selects delivery
        system_response: Show delivery details

      - step: 3
        action: Operator views available agents
        system_response: List suitable agents with scores

      - step: 4
        action: Operator assigns to selected agent
        system_response: Create assignment

      - step: 5
        action: Agent receives notification
        system_response: Update status

    assignment_criteria:
      - Agent proximity
      - Current load
      - Skills/certifications
      - Performance rating
      - Zone authorization

    alternative_flows:
      - id: AF1
        condition: No suitable agents available
        steps:
          - Show capacity warning
          - Suggest scheduling for later
          - Option to expand search area

    postconditions:
      - Delivery assigned
      - Agent notified

  - id: UC-OPS-004
    name: Reassign Delivery
    description: Operations transfers delivery to different agent
    priority: high
    frequency: medium

    preconditions:
      - Delivery currently assigned
      - Reassignment needed
      - Alternative agent available

    main_flow:
      - step: 1
        action: Operator selects delivery to reassign
        system_response: Show current assignment

      - step: 2
        action: Operator selects reason for reassignment
        system_response: Log reason

      - step: 3
        action: Operator chooses new agent
        system_response: Show available agents

      - step: 4
        action: Operator confirms reassignment
        system_response: Transfer to new agent

      - step: 5
        action: Both agents notified
        system_response: Update assignments

    reassignment_reasons:
      - Agent unavailable
      - Route optimization
      - Agent overloaded
      - Skills mismatch
      - Customer request
      - Vehicle breakdown

    postconditions:
      - Delivery with new agent
      - Original agent freed
      - History logged

  - id: UC-OPS-005
    name: Batch Assignment
    description: Operations assigns multiple deliveries at once
    priority: medium
    frequency: medium

    preconditions:
      - Multiple unassigned deliveries
      - Multiple agents available
      - Batch assignment enabled

    main_flow:
      - step: 1
        action: Operator selects deliveries for batch
        system_response: Add to batch queue

      - step: 2
        action: Operator initiates optimization
        system_response: Calculate optimal assignments

      - step: 3
        action: Operator reviews suggested assignments
        system_response: Display assignment plan

      - step: 4
        action: Operator approves or adjusts
        system_response: Allow modifications

      - step: 5
        action: Operator confirms batch
        system_response: Execute all assignments

    postconditions:
      - All deliveries assigned
      - Routes optimized
      - Agents notified

  # Exception Handling
  - id: UC-OPS-006
    name: Handle SLA Risk
    description: Operations intervenes on at-risk deliveries
    priority: critical
    frequency: high

    preconditions:
      - Delivery approaching SLA deadline
      - Alert triggered
      - Intervention possible

    main_flow:
      - step: 1
        action: System alerts SLA risk
        system_response: Show at-risk delivery

      - step: 2
        action: Operator assesses situation
        system_response: Display all context

      - step: 3
        action: Operator takes action
        system_response: Execute intervention

      - step: 4
        action: Operator monitors result
        system_response: Track resolution

    intervention_options:
      - Reassign to faster agent
      - Contact agent for status
      - Contact customer
      - Authorize overtime
      - Prepare compensation

    postconditions:
      - Risk addressed
      - Delivery prioritized
      - Customer informed if needed

  - id: UC-OPS-007
    name: Handle Failed Delivery
    description: Operations manages delivery that couldn't be completed
    priority: high
    frequency: medium

    preconditions:
      - Delivery marked as failed
      - Customer not yet contacted
      - Resolution needed

    main_flow:
      - step: 1
        action: Operator reviews failure
        system_response: Show failure details and evidence

      - step: 2
        action: Operator verifies failure reason
        system_response: Validate agent report

      - step: 3
        action: Operator determines next action
        system_response: Show resolution options

      - step: 4
        action: Operator initiates resolution
        system_response: Execute chosen action

      - step: 5
        action: Operator contacts customer if needed
        system_response: Provide contact tools

    resolution_options:
      - Schedule reattempt
      - Redirect to pickup point
      - Redirect to locker
      - Contact customer for instructions
      - Initiate return

    postconditions:
      - Failure resolved or escalated
      - Customer informed
      - Next steps scheduled

  - id: UC-OPS-008
    name: Handle Customer Escalation
    description: Operations resolves escalated customer complaints
    priority: critical
    frequency: low

    preconditions:
      - Escalation received
      - Standard resolution failed
      - Operations intervention required

    main_flow:
      - step: 1
        action: Operator receives escalation
        system_response: Show full history

      - step: 2
        action: Operator investigates issue
        system_response: Access all data

      - step: 3
        action: Operator determines resolution
        system_response: Show resolution options

      - step: 4
        action: Operator contacts customer
        system_response: Provide contact tools

      - step: 5
        action: Operator applies resolution
        system_response: Execute and log

    resolution_powers:
      - Priority reattempt
      - Full refund
      - Compensation credit
      - Special accommodation
      - Manager callback

    postconditions:
      - Issue resolved
      - Customer satisfied
      - Prevention logged

  - id: UC-OPS-009
    name: Manage Agent Issue
    description: Operations handles agent-related problems
    priority: high
    frequency: medium

    preconditions:
      - Agent issue reported
      - Agent on active shift
      - Intervention needed

    main_flow:
      - step: 1
        action: Operator receives agent report
        system_response: Show issue details

      - step: 2
        action: Operator contacts agent
        system_response: Initiate communication

      - step: 3
        action: Operator assesses impact
        system_response: Show affected deliveries

      - step: 4
        action: Operator takes action
        system_response: Execute resolution

      - step: 5
        action: Operator reassigns if needed
        system_response: Transfer deliveries

    agent_issues:
      - Vehicle breakdown
      - Personal emergency
      - Safety incident
      - Lost/stolen package
      - COD discrepancy
      - Performance concern

    postconditions:
      - Agent issue addressed
      - Deliveries reassigned
      - Incident logged

  # Capacity Management
  - id: UC-OPS-010
    name: Manage Zone Capacity
    description: Operations adjusts zone capacity based on demand
    priority: medium
    frequency: daily

    preconditions:
      - Zone data available
      - Capacity management enabled

    main_flow:
      - step: 1
        action: Operator views zone capacity
        system_response: Display current vs planned

      - step: 2
        action: Operator identifies imbalance
        system_response: Highlight over/under capacity

      - step: 3
        action: Operator adjusts settings
        system_response: Update zone parameters

      - step: 4
        action: System recalculates assignments
        system_response: Redistribute workload

    capacity_adjustments:
      - Increase zone agents
      - Decrease zone agents
      - Enable cross-zone
      - Disable new orders
      - Extend operating hours

    postconditions:
      - Capacity balanced
      - Service levels maintained

  - id: UC-OPS-011
    name: Handle Capacity Surge
    description: Operations responds to unexpected demand spike
    priority: critical
    frequency: low

    preconditions:
      - Demand exceeds capacity
      - Normal operations strained
      - Surge response needed

    main_flow:
      - step: 1
        action: System detects surge
        system_response: Alert operations

      - step: 2
        action: Operator assesses situation
        system_response: Show demand forecast

      - step: 3
        action: Operator activates surge protocols
        system_response: Implement measures

      - step: 4
        action: Operator monitors throughput
        system_response: Track surge impact

    surge_responses:
      - Call in backup agents
      - Enable surge pricing
      - Extend delivery windows
      - Disable express options
      - Activate partner fleet
      - Communicate delays to customers

    postconditions:
      - Surge managed
      - Customer impact minimized

  # Reporting & Analytics
  - id: UC-OPS-012
    name: Generate Operations Report
    description: Operations creates performance reports
    priority: medium
    frequency: daily

    preconditions:
      - Report period defined
      - Data available

    main_flow:
      - step: 1
        action: Operator selects report type
        system_response: Show report options

      - step: 2
        action: Operator sets parameters
        system_response: Configure report

      - step: 3
        action: Operator generates report
        system_response: Process and display

      - step: 4
        action: Operator exports if needed
        system_response: Download PDF/Excel

    report_types:
      - Daily operations summary
      - Zone performance
      - Agent performance
      - SLA compliance
      - Failed delivery analysis
      - COD reconciliation

    postconditions:
      - Report generated
      - Insights available

  - id: UC-OPS-013
    name: Analyze Performance Trends
    description: Operations reviews historical performance patterns
    priority: medium
    frequency: weekly

    preconditions:
      - Historical data available
      - Analytics access granted

    main_flow:
      - step: 1
        action: Operator opens analytics dashboard
        system_response: Display trend charts

      - step: 2
        action: Operator selects metrics
        system_response: Update visualizations

      - step: 3
        action: Operator applies filters
        system_response: Drill down into data

      - step: 4
        action: Operator identifies patterns
        system_response: Highlight anomalies

      - step: 5
        action: Operator exports insights
        system_response: Create shareable report

    trend_analysis:
      - Volume trends
      - SLA trends
      - Failed delivery patterns
      - Peak hours analysis
      - Zone comparison
      - Agent productivity

    postconditions:
      - Trends understood
      - Improvement areas identified

  # Partner Management
  - id: UC-OPS-014
    name: Manage Locker Issues
    description: Operations handles smart locker problems
    priority: high
    frequency: low

    preconditions:
      - Locker issue detected
      - Customer or agent impacted

    main_flow:
      - step: 1
        action: System alerts locker issue
        system_response: Show locker status

      - step: 2
        action: Operator assesses impact
        system_response: Show affected deliveries

      - step: 3
        action: Operator takes action
        system_response: Execute resolution

      - step: 4
        action: Operator contacts maintenance if needed
        system_response: Create maintenance ticket

    locker_issues:
      - Locker offline
      - Compartment jammed
      - Access code failure
      - Package stuck
      - Full capacity

    resolutions:
      - Redirect to alternative locker
      - Dispatch technician
      - Convert to home delivery
      - Contact customer

    postconditions:
      - Issue resolved or escalated
      - Customers notified

  - id: UC-OPS-015
    name: Manage Pickup Point Issues
    description: Operations handles pickup point problems
    priority: medium
    frequency: low

    preconditions:
      - Pickup point issue reported
      - Service affected

    main_flow:
      - step: 1
        action: Operator receives issue report
        system_response: Show point status

      - step: 2
        action: Operator contacts pickup point
        system_response: Provide contact info

      - step: 3
        action: Operator assesses impact
        system_response: Show affected parcels

      - step: 4
        action: Operator takes corrective action
        system_response: Redirect or resolve

    pickup_point_issues:
      - Point temporarily closed
      - Capacity exceeded
      - Staff unavailable
      - Parcel misplaced
      - Hours changed

    postconditions:
      - Issue addressed
      - Customers rerouted if needed

metrics:
  - name: sla_compliance
    description: Deliveries meeting SLA
    target: > 95%

  - name: intervention_rate
    description: Percentage requiring manual intervention
    target: < 5%

  - name: escalation_resolution_time
    description: Average time to resolve escalations
    target: < 2 hours

  - name: capacity_utilization
    description: Agent capacity usage
    optimal: 75-85%

  - name: failed_delivery_recovery
    description: Failed deliveries successfully recovered
    target: > 90%
