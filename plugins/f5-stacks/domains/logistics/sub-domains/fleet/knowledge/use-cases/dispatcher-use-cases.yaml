name: DispatcherUseCases
display_name: Dispatcher Use Cases
description: |
  Use cases for fleet dispatchers.
  Covers trip planning, dispatch, monitoring, and exception handling.

domain: logistics
subdomain: fleet
category: use-cases
version: "1.0.0"

actor:
  name: Dispatcher
  type: primary
  description: |
    Fleet dispatcher responsible for planning trips, assigning resources,
    monitoring active operations, and handling exceptions in real-time.
  synonyms:
    - Fleet Dispatcher
    - Operations Coordinator
    - Dispatch Operator
    - Logistics Coordinator
  responsibilities:
    - Trip planning and optimization
    - Resource assignment (vehicles, drivers)
    - Real-time monitoring
    - Exception handling
    - Customer communication

use_cases:
  # Trip Planning
  - id: UC-DSP-001
    name: Create Trip from Orders
    description: Dispatcher creates trip from pending orders
    preconditions:
      - Orders pending dispatch
      - Dispatcher logged in
    trigger: New orders ready for dispatch
    main_flow:
      - Dispatcher opens order queue
      - System displays pending orders
      - Dispatcher selects orders to combine
      - System validates compatibility:
        - Same region/zone
        - Compatible time windows
        - Total weight/volume within capacity
      - Dispatcher confirms order selection
      - System creates trip with stops
      - System calculates optimal route
      - Dispatcher reviews and adjusts
      - System calculates estimated times
    postconditions:
      - Trip created with status planned
      - Orders linked to trip
    outputs:
      - Trip record
      - Route plan
    business_rules:
      - BR-RO-004: Time window compliance

  - id: UC-DSP-002
    name: Optimize Route
    description: Dispatcher optimizes trip route
    preconditions:
      - Trip in planned status
      - At least 2 stops
    trigger: After trip creation or stop changes
    main_flow:
      - Dispatcher opens route editor
      - System displays current route
      - Dispatcher selects optimization goal:
        - Minimize distance
        - Minimize time
        - Balance workload
      - System runs optimization
      - System displays optimized route
      - Dispatcher reviews changes
      - Dispatcher approves or adjusts manually
      - System recalculates ETAs
    alternative_flows:
      - name: Manual Reorder
        condition: Dispatcher prefers manual control
        steps:
          - Dispatcher drags stops to reorder
          - System recalculates on each change
    postconditions:
      - Route optimized
      - ETAs calculated
    outputs:
      - Optimized route
      - Updated ETAs

  - id: UC-DSP-003
    name: Assign Vehicle to Trip
    description: Dispatcher assigns vehicle to trip
    preconditions:
      - Trip in planned status
      - Available vehicles exist
    trigger: Trip ready for vehicle assignment
    main_flow:
      - Dispatcher opens vehicle assignment
      - System displays available vehicles
      - System highlights recommended vehicles based on:
        - Capacity match
        - Current location
        - Scheduled maintenance
        - Vehicle type suitability
      - Dispatcher selects vehicle
      - System validates assignment:
        - Capacity sufficient
        - Registration valid
        - Insurance valid
        - No maintenance conflict
      - System confirms assignment
    alternative_flows:
      - name: No Suitable Vehicle
        condition: No vehicles meet requirements
        steps:
          - System shows warning
          - Dispatcher adjusts trip or waits
      - name: Override Warning
        condition: Minor issue (non-critical)
        steps:
          - Dispatcher acknowledges warning
          - Dispatcher provides justification
          - System logs override
    postconditions:
      - Vehicle assigned to trip
    business_rules:
      - BR-VA-001: Vehicle Availability
      - BR-VA-003: Capacity Requirement

  - id: UC-DSP-004
    name: Assign Driver to Trip
    description: Dispatcher assigns driver to trip
    preconditions:
      - Trip has vehicle assigned
      - Available drivers exist
    trigger: Trip ready for driver assignment
    main_flow:
      - Dispatcher opens driver assignment
      - System displays available drivers
      - System shows driver info:
        - Available hours (HOS)
        - License class
        - Endorsements
        - Current location
        - Performance score
      - Dispatcher selects driver
      - System validates:
        - HOS hours sufficient
        - License valid for vehicle
        - Required endorsements
        - Not already assigned
      - System confirms assignment
    alternative_flows:
      - name: HOS Warning
        condition: Driver has limited hours
        steps:
          - System shows HOS warning
          - Dispatcher adjusts trip or selects different driver
    postconditions:
      - Driver assigned to trip
    business_rules:
      - BR-DC-001: License Validity
      - BR-DC-010: HOS Driving Limit
      - BR-DC-020: Driver Available

  - id: UC-DSP-005
    name: Dispatch Trip
    description: Dispatcher dispatches planned trip
    preconditions:
      - Trip has vehicle and driver assigned
      - All validations passed
    trigger: Trip ready for dispatch
    main_flow:
      - Dispatcher reviews trip details
      - System performs final validation:
        - Vehicle available
        - Driver available
        - Compliance checks passed
        - No scheduling conflicts
      - Dispatcher clicks dispatch
      - System updates trip status to dispatched
      - System notifies driver via mobile app
      - System reserves vehicle
      - System logs dispatch time
    postconditions:
      - Trip status: dispatched
      - Driver notified
      - Vehicle reserved
    outputs:
      - Dispatch confirmation
      - Driver notification

  # Monitoring
  - id: UC-DSP-006
    name: Monitor Active Trips
    description: Dispatcher monitors trips in progress
    preconditions:
      - Active trips exist
    trigger: Continuous during operations
    main_flow:
      - Dispatcher opens dispatch board
      - System displays:
        - Map with vehicle locations
        - Trip list with status
        - Alerts and exceptions
        - ETAs for each stop
      - Dispatcher monitors for issues:
        - Delays
        - Route deviations
        - Driver alerts
      - System updates in real-time
    postconditions:
      - Dispatcher aware of fleet status
    outputs:
      - Live dashboard
      - Real-time alerts

  - id: UC-DSP-007
    name: Track Vehicle Location
    description: Dispatcher tracks specific vehicle
    preconditions:
      - Vehicle has active GPS
    trigger: Need to locate vehicle
    main_flow:
      - Dispatcher searches for vehicle
      - System displays vehicle on map
      - System shows:
        - Current location
        - Speed
        - Direction
        - Last update time
        - Current trip (if any)
      - Dispatcher can view trail history
    postconditions:
      - Vehicle location known
    outputs:
      - Vehicle position
      - Movement history

  - id: UC-DSP-008
    name: View Driver HOS Status
    description: Dispatcher checks driver hours of service
    preconditions:
      - Driver is ELD-equipped
    trigger: Before assignment or during monitoring
    main_flow:
      - Dispatcher selects driver
      - System displays HOS summary:
        - Available driving hours
        - Available on-duty hours
        - Cycle hours remaining
        - Break status
        - Violation warnings
      - Dispatcher assesses availability
    postconditions:
      - Dispatcher informed of HOS status
    outputs:
      - HOS summary

  # Exception Handling
  - id: UC-DSP-009
    name: Handle Delay Alert
    description: Dispatcher responds to trip delay
    preconditions:
      - Trip in progress
      - Delay detected
    trigger: System delay alert
    main_flow:
      - System alerts dispatcher of delay
      - Dispatcher reviews:
        - Current location
        - Cause of delay (traffic, weather, etc.)
        - Impact on remaining stops
      - Dispatcher takes action:
        - Update customer notifications
        - Adjust time windows
        - Reroute if needed
      - System logs response
    alternative_flows:
      - name: Major Delay
        condition: Delay > 30 minutes
        steps:
          - Dispatcher contacts driver
          - Dispatcher notifies affected customers
          - Dispatcher considers reassignment
    postconditions:
      - Delay acknowledged
      - Stakeholders notified
    outputs:
      - Updated ETAs
      - Customer notifications

  - id: UC-DSP-010
    name: Handle Route Deviation
    description: Dispatcher responds to route deviation
    preconditions:
      - Trip in progress
      - Driver off planned route
    trigger: System deviation alert
    main_flow:
      - System alerts deviation
      - Dispatcher reviews:
        - Current position vs planned route
        - Deviation distance
        - Possible reasons
      - Dispatcher contacts driver if needed
      - Dispatcher determines if:
        - Acceptable (driver knows reason)
        - Concerning (unauthorized)
      - System logs resolution
    postconditions:
      - Deviation addressed
    outputs:
      - Resolution log

  - id: UC-DSP-011
    name: Handle Vehicle Breakdown
    description: Dispatcher manages breakdown situation
    preconditions:
      - Driver reported breakdown
    trigger: Breakdown incident report
    main_flow:
      - System alerts dispatcher
      - Dispatcher reviews:
        - Vehicle location
        - Nature of problem
        - Remaining deliveries
      - Dispatcher coordinates response:
        - Contact roadside assistance
        - Arrange tow if needed
        - Find replacement vehicle
        - Reassign remaining stops
      - Dispatcher updates customers
      - System tracks resolution
    postconditions:
      - Assistance arranged
      - Deliveries reassigned
    outputs:
      - Assistance request
      - Reassignment plan

  - id: UC-DSP-012
    name: Handle Accident Report
    description: Dispatcher manages accident situation
    preconditions:
      - Driver reported accident
    trigger: Accident incident report
    main_flow:
      - System alerts dispatcher immediately
      - Dispatcher verifies:
        - Driver safety
        - Emergency services called
        - Other parties involved
      - Dispatcher notifies:
        - Safety manager
        - Fleet manager
        - Insurance (if significant)
      - Dispatcher manages trip:
        - Suspend or reassign remaining stops
        - Notify affected customers
      - Dispatcher documents actions
    postconditions:
      - Incident acknowledged
      - Management notified
      - Trip adjusted
    business_rules:
      - BR-SF-008: Report within 1 hour

  - id: UC-DSP-013
    name: Reassign Trip
    description: Dispatcher reassigns trip to different resources
    preconditions:
      - Trip in progress or dispatched
      - Need to change driver or vehicle
    trigger: Exception requiring reassignment
    main_flow:
      - Dispatcher opens reassignment screen
      - Dispatcher selects new resource:
        - Different driver
        - Different vehicle
        - Both
      - System validates new assignment
      - System transfers trip data
      - System notifies:
        - Original driver (if applicable)
        - New driver
      - System updates records
    postconditions:
      - Trip reassigned
      - All parties notified
    outputs:
      - Reassignment confirmation

  # Communication
  - id: UC-DSP-014
    name: Message Driver
    description: Dispatcher sends message to driver
    preconditions:
      - Driver logged in to mobile app
    trigger: Need to communicate with driver
    main_flow:
      - Dispatcher selects driver
      - Dispatcher types message
      - Dispatcher sends
      - System delivers to driver app
      - System shows delivery status
      - Driver can respond
    alternative_flows:
      - name: Urgent Message
        condition: High priority
        steps:
          - Dispatcher marks as urgent
          - System sends push notification
          - System requires acknowledgment
    postconditions:
      - Message delivered
    outputs:
      - Message delivery confirmation

  - id: UC-DSP-015
    name: Broadcast Message
    description: Dispatcher sends message to multiple drivers
    preconditions:
      - Multiple drivers to notify
    trigger: Fleet-wide communication needed
    main_flow:
      - Dispatcher opens broadcast
      - Dispatcher selects recipients:
        - All active drivers
        - Drivers in region
        - Custom selection
      - Dispatcher types message
      - Dispatcher sends
      - System delivers to all
      - System tracks delivery status
    postconditions:
      - Broadcast sent
    outputs:
      - Delivery report

  # Reporting
  - id: UC-DSP-016
    name: View Daily Summary
    description: Dispatcher reviews daily operations
    preconditions:
      - End of shift or on demand
    trigger: Shift end or report request
    main_flow:
      - Dispatcher opens reports
      - Dispatcher selects date
      - System displays:
        - Trips completed
        - On-time percentage
        - Exceptions handled
        - Driver utilization
        - Vehicle utilization
      - Dispatcher reviews performance
    postconditions:
      - Summary reviewed
    outputs:
      - Daily summary report

  - id: UC-DSP-017
    name: Handle Stop Failure
    description: Dispatcher manages failed delivery/pickup
    preconditions:
      - Driver reported stop failure
    trigger: Stop failure notification
    main_flow:
      - System notifies dispatcher
      - Dispatcher reviews:
        - Failure reason
        - Customer availability
        - Time constraints
      - Dispatcher decides:
        - Retry later in trip
        - Reschedule to next day
        - Return to depot
      - Dispatcher updates system
      - System notifies customer
    postconditions:
      - Failure handled
      - Customer notified
    outputs:
      - Updated schedule
      - Customer notification

dispatch_board_features:
  - Live map with vehicle positions
  - Trip status list (color-coded)
  - Alert panel with exceptions
  - Driver HOS summary
  - Weather overlay
  - Traffic overlay
  - Customer notification center
  - Quick messaging panel

keyboard_shortcuts:
  - "D": Dispatch selected trip
  - "R": Refresh dashboard
  - "M": Message driver
  - "F": Find vehicle
  - "A": View alerts

metrics_displayed:
  - Active trips count
  - On-time percentage
  - Exceptions pending
  - Available drivers
  - Available vehicles
