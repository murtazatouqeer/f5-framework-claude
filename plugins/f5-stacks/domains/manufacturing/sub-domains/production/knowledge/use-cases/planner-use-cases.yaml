name: planner-use-cases
display_name: Production Planner Use Cases
display_name_vi: Ca sử dụng kế hoạch viên sản xuất
version: "1.0"
domain: manufacturing
subdomain: production
type: use-cases

description: |
  Use cases for production planners managing production scheduling,
  capacity planning, and work order management.

description_vi: |
  Ca sử dụng cho kế hoạch viên sản xuất quản lý lịch sản xuất,
  kế hoạch công suất và quản lý lệnh sản xuất.

actor:
  id: planner
  name: Production Planner
  name_vi: Kế hoạch viên sản xuất
  description: Plans and schedules production to meet demand while optimizing resources
  responsibilities:
    - Create and maintain production schedule
    - Manage work order lifecycle
    - Balance capacity and demand
    - Coordinate material availability
  tools:
    - Planning board
    - Capacity analysis
    - MRP system

use_cases:
  - id: UC-PL-001
    name: Create Work Order
    name_vi: Tạo lệnh sản xuất
    description: Planner creates new work order from demand
    priority: high
    frequency: Multiple times per day

    preconditions:
      - Demand exists (sales order, forecast, stock replenishment)
      - Product is active and producible
      - BOM and routing exist

    trigger: MRP suggestion or manual request

    main_flow:
      - step: 1
        action: Select product and quantity
        system_response: Display product details
      - step: 2
        action: Set due date and priority
        system_response: Validate feasibility
      - step: 3
        action: Copy BOM and routing
        system_response: Generate WO structure
      - step: 4
        action: Calculate material requirements
        system_response: Check availability
      - step: 5
        action: Calculate capacity requirements
        system_response: Show load impact
      - step: 6
        action: Save work order
        system_response: Generate WO number

    alternative_flows:
      - id: AF-001
        name: Material shortage
        trigger: Required materials not available
        flow:
          - Display shortage
          - Show expected availability
          - Adjust dates or create purchase requisition

      - id: AF-002
        name: Capacity overload
        trigger: Schedule causes overload
        flow:
          - Display overload warning
          - Suggest alternative dates
          - Option to override with justification

    postconditions:
      - Work order created
      - Material requirements calculated
      - Capacity impact visible

    business_rules:
      - Lead time must be realistic
      - Cannot create WO for inactive products
      - Lot size rules applied

  - id: UC-PL-002
    name: Schedule Work Orders
    name_vi: Lập lịch lệnh sản xuất
    description: Planner schedules operations to work centers
    priority: critical
    frequency: Daily

    preconditions:
      - Work orders exist
      - Capacity data current

    trigger: New work orders or reschedule needed

    main_flow:
      - step: 1
        action: Open scheduling board
        system_response: Display Gantt view
      - step: 2
        action: Select work orders to schedule
        system_response: Show unscheduled work
      - step: 3
        action: Choose scheduling method
        methods:
          - forward: From today forward
          - backward: From due date backward
          - finite: Respect capacity
          - infinite: Ignore capacity
        system_response: Apply algorithm
      - step: 4
        action: Review schedule results
        system_response: Display scheduled operations
      - step: 5
        action: Adjust manually if needed
        system_response: Allow drag-drop adjustment
      - step: 6
        action: Save schedule
        system_response: Commit schedule

    alternative_flows:
      - id: AF-001
        name: Schedule conflict
        trigger: Operations overlap on same resource
        flow:
          - Highlight conflicts
          - Suggest resolution options
          - Require explicit resolution

    postconditions:
      - Operations scheduled
      - Resource assignments made
      - Capacity load updated

    business_rules:
      - Respect frozen zone
      - Operations must follow routing sequence
      - Material availability considered

  - id: UC-PL-003
    name: Release Work Order
    name_vi: Phát hành lệnh sản xuất
    description: Planner releases work order for production
    priority: high
    frequency: Daily

    preconditions:
      - Work order scheduled
      - Materials available or due
      - Capacity available

    trigger: Release date reached or manual release

    main_flow:
      - step: 1
        action: Select work order(s) for release
        system_response: Show release candidates
      - step: 2
        action: Verify release criteria
        system_response: Display checklist
      - step: 3
        action: Generate shop paperwork
        system_response: Create travelers, pick lists
      - step: 4
        action: Reserve materials
        system_response: Create reservations
      - step: 5
        action: Release work order
        system_response: Update status, notify production

    alternative_flows:
      - id: AF-001
        name: Release criteria not met
        trigger: Missing materials or documents
        flow:
          - Show blocking issues
          - Option to override with approval
          - Option to defer release

    postconditions:
      - Work order released
      - Materials reserved
      - Production notified

    business_rules:
      - Cannot release without BOM and routing
      - Material check configurable (strict/warning)
      - Release generates material reservations

  - id: UC-PL-004
    name: Manage Capacity Load
    name_vi: Quản lý tải công suất
    description: Planner analyzes and balances capacity load
    priority: high
    frequency: Daily

    preconditions:
      - Schedule exists
      - Capacity defined

    trigger: Regular review or overload alert

    main_flow:
      - step: 1
        action: View capacity load report
        system_response: Display load by work center/period
      - step: 2
        action: Identify overloaded periods
        system_response: Highlight over 100% load
      - step: 3
        action: Analyze options
        options:
          - shift_work: Move to different period
          - alternate_resource: Use different work center
          - overtime: Add capacity
          - outsource: External processing
        system_response: Show impact of each
      - step: 4
        action: Apply leveling
        system_response: Adjust schedule
      - step: 5
        action: Verify results
        system_response: Show new load profile

    postconditions:
      - Load balanced
      - Schedule adjusted
      - Capacity actions documented

    business_rules:
      - Target 85% utilization for non-bottlenecks
      - Bottleneck optimization priority
      - Overtime limits respected

  - id: UC-PL-005
    name: Handle Material Shortage
    name_vi: Xử lý thiếu hụt vật liệu
    description: Planner resolves material shortages affecting production
    priority: critical
    frequency: As needed

    preconditions:
      - Shortage identified
      - Work orders affected

    trigger: Shortage alert or MRP exception

    main_flow:
      - step: 1
        action: Review shortage report
        system_response: Display shortages by material/WO
      - step: 2
        action: Analyze impact
        system_response: Show affected work orders
      - step: 3
        action: Evaluate options
        options:
          - expedite: Rush purchase order
          - substitute: Use approved alternate
          - reschedule: Move work order
          - partial: Produce available quantity
        system_response: Show option impacts
      - step: 4
        action: Implement resolution
        system_response: Execute chosen action
      - step: 5
        action: Communicate to stakeholders
        system_response: Send notifications

    postconditions:
      - Shortage resolution initiated
      - Work orders updated
      - Stakeholders notified

    business_rules:
      - Critical shortages escalate automatically
      - Substitution requires engineering approval
      - Customer notification for ship date impact

  - id: UC-PL-006
    name: Close Work Order
    name_vi: Đóng lệnh sản xuất
    description: Planner closes completed work order
    priority: medium
    frequency: Daily

    preconditions:
      - Production complete
      - All transactions posted

    trigger: Work order completed by production

    main_flow:
      - step: 1
        action: Review work order for closure
        system_response: Display completion status
      - step: 2
        action: Verify all output recorded
        system_response: Compare actual to planned
      - step: 3
        action: Review variances
        system_response: Show quantity, time, cost variances
      - step: 4
        action: Process excess materials
        system_response: Return to inventory or scrap
      - step: 5
        action: Post final costs
        system_response: Calculate and post costs
      - step: 6
        action: Close work order
        system_response: Set status to closed

    alternative_flows:
      - id: AF-001
        name: Significant variance
        trigger: Variance exceeds threshold
        flow:
          - Require variance explanation
          - Route for approval if needed
          - Document for analysis

    postconditions:
      - Work order closed
      - Costs posted
      - Variances documented

    business_rules:
      - Cannot close with open material issues
      - Variance explanation required if > 10%
      - Cost posting automatic

  - id: UC-PL-007
    name: Run MRP
    name_vi: Chạy MRP
    description: Planner executes Material Requirements Planning
    priority: high
    frequency: Daily or as needed

    preconditions:
      - Master data current
      - Demand loaded

    trigger: Scheduled run or manual trigger

    main_flow:
      - step: 1
        action: Configure MRP run
        system_response: Display parameter options
      - step: 2
        action: Select scope
        scope_options:
          - full: All items
          - selective: Specific items/categories
          - net_change: Changed items only
        system_response: Validate selection
      - step: 3
        action: Execute MRP
        system_response: Process and generate results
      - step: 4
        action: Review planned orders
        system_response: Display suggestions
      - step: 5
        action: Convert to work orders
        system_response: Create firm planned orders

    postconditions:
      - Requirements calculated
      - Planned orders generated
      - Exceptions identified

    business_rules:
      - Safety stock respected
      - Lot sizing rules applied
      - Lead times observed

  - id: UC-PL-008
    name: Create Production Forecast
    name_vi: Tạo dự báo sản xuất
    description: Planner creates or updates production forecast
    priority: medium
    frequency: Weekly/monthly

    preconditions:
      - Forecast data available
      - Planning period defined

    trigger: Planning cycle or demand change

    main_flow:
      - step: 1
        action: Review historical demand
        system_response: Display demand patterns
      - step: 2
        action: Input forecast quantities
        system_response: Accept by period/product
      - step: 3
        action: Apply forecast model
        models:
          - moving_average
          - exponential_smoothing
          - seasonal_adjustment
        system_response: Calculate forecast
      - step: 4
        action: Adjust for known factors
        system_response: Allow manual override
      - step: 5
        action: Save forecast
        system_response: Feed to MRP

    postconditions:
      - Forecast created
      - Planning system updated

  - id: UC-PL-009
    name: Manage Production Hold
    name_vi: Quản lý giữ sản xuất
    description: Planner manages work orders on hold
    priority: high
    frequency: As needed

    preconditions:
      - Work order on hold

    trigger: Hold placed or hold review

    main_flow:
      - step: 1
        action: Review held work orders
        system_response: Display hold list with reasons
      - step: 2
        action: Investigate hold reason
        system_response: Show hold details
      - step: 3
        action: Determine resolution
        system_response: Suggest actions
      - step: 4
        action: Release from hold
        system_response: Resume scheduling
      - step: 5
        action: Reschedule if needed
        system_response: Update schedule

    postconditions:
      - Hold resolved or maintained
      - Schedule updated

  - id: UC-PL-010
    name: Analyze Production Performance
    name_vi: Phân tích hiệu suất sản xuất
    description: Planner analyzes production metrics and trends
    priority: medium
    frequency: Weekly

    preconditions:
      - Performance data available

    trigger: Regular review or concern

    main_flow:
      - step: 1
        action: Select analysis period
        system_response: Display date range selector
      - step: 2
        action: View KPI dashboard
        system_response: Show OEE, yield, variance metrics
      - step: 3
        action: Drill into details
        system_response: Display trend charts
      - step: 4
        action: Identify improvement areas
        system_response: Highlight underperformance
      - step: 5
        action: Document findings
        system_response: Create analysis report

    postconditions:
      - Analysis complete
      - Improvement areas identified

  - id: UC-PL-011
    name: Manage Engineering Change Impact
    name_vi: Quản lý tác động thay đổi kỹ thuật
    description: Planner handles BOM/routing changes on work orders
    priority: high
    frequency: As needed

    preconditions:
      - Engineering change approved
      - Work orders may be affected

    trigger: ECO implementation

    main_flow:
      - step: 1
        action: Identify affected work orders
        system_response: List WOs with old revision
      - step: 2
        action: Determine cutover approach
        approaches:
          - immediate: All WOs get new revision
          - use_up: Complete current materials
          - specific_date: Switch on date
        system_response: Show impacts
      - step: 3
        action: Update work orders
        system_response: Apply new BOM/routing
      - step: 4
        action: Manage material impact
        system_response: Adjust requirements

    postconditions:
      - Work orders updated
      - Change implemented

  - id: UC-PL-012
    name: Coordinate Subcontracting
    name_vi: Phối hợp gia công ngoài
    description: Planner manages subcontracted operations
    priority: medium
    frequency: As needed

    preconditions:
      - Subcontract operation required
      - Vendor available

    trigger: Capacity shortfall or specialized operation

    main_flow:
      - step: 1
        action: Identify subcontract need
        system_response: Show capacity gap or requirement
      - step: 2
        action: Select vendor
        system_response: Display qualified vendors
      - step: 3
        action: Create subcontract order
        system_response: Generate PO for service
      - step: 4
        action: Ship materials to vendor
        system_response: Coordinate material movement
      - step: 5
        action: Track progress
        system_response: Monitor vendor status
      - step: 6
        action: Receive completed work
        system_response: Process receipt

    postconditions:
      - Subcontract order placed
      - Materials shipped
      - Receipt processed

  - id: UC-PL-013
    name: Manage Production Calendar
    name_vi: Quản lý lịch sản xuất
    description: Planner maintains shop calendar and working hours
    priority: medium
    frequency: Monthly and as needed

    preconditions:
      - Calendar access

    trigger: Calendar update needed

    main_flow:
      - step: 1
        action: Access production calendar
        system_response: Display calendar view
      - step: 2
        action: Define working days
        system_response: Set workdays vs holidays
      - step: 3
        action: Set shift patterns
        system_response: Configure shifts per day
      - step: 4
        action: Mark exceptions
        system_response: Add shutdowns, overtime
      - step: 5
        action: Save calendar
        system_response: Update capacity calculations

    postconditions:
      - Calendar updated
      - Capacity recalculated

  - id: UC-PL-014
    name: Balance Work Order Mix
    name_vi: Cân bằng mix lệnh sản xuất
    description: Planner optimizes product mix for efficiency
    priority: medium
    frequency: Weekly

    preconditions:
      - Multiple work orders competing
      - Optimization possible

    trigger: Schedule optimization cycle

    main_flow:
      - step: 1
        action: Analyze current mix
        system_response: Show product distribution
      - step: 2
        action: Identify optimization opportunities
        system_response: Suggest grouping, sequencing
      - step: 3
        action: Model scenarios
        system_response: Calculate setup time savings
      - step: 4
        action: Apply optimized sequence
        system_response: Update schedule
      - step: 5
        action: Verify constraints met
        system_response: Check due dates

    postconditions:
      - Mix optimized
      - Setup time reduced
      - Due dates maintained

  - id: UC-PL-015
    name: Generate Planning Reports
    name_vi: Tạo báo cáo kế hoạch
    description: Planner generates various planning reports
    priority: medium
    frequency: As needed

    preconditions:
      - Report data available

    trigger: Report request or schedule

    main_flow:
      - step: 1
        action: Select report type
        report_types:
          - work_order_status
          - capacity_load
          - material_availability
          - production_schedule
          - variance_analysis
        system_response: Display parameters
      - step: 2
        action: Set report parameters
        system_response: Accept filters, dates
      - step: 3
        action: Generate report
        system_response: Execute and display
      - step: 4
        action: Export or distribute
        system_response: PDF, Excel, email options

    postconditions:
      - Report generated
      - Distributed as needed

screen_mockups:
  - screen: planning_board
    elements:
      - gantt_chart
      - resource_timeline
      - drag_drop_scheduling
      - capacity_bars

  - screen: work_order_management
    elements:
      - work_order_list
      - status_filters
      - bulk_actions
      - detail_panel

  - screen: capacity_analysis
    elements:
      - load_profile_chart
      - utilization_metrics
      - bottleneck_indicators
      - what_if_tools

permissions:
  - permission: create_work_order
    granted: true
  - permission: release_work_order
    granted: true
  - permission: close_work_order
    granted: true
  - permission: modify_schedule
    granted: true
  - permission: run_mrp
    granted: true
  - permission: manage_calendar
    granted: true
  - permission: approve_overtime
    granted: false
  - permission: approve_variance
    granted: limited
