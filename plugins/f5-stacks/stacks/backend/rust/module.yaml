name: rust
display_name: Rust (Axum/Actix)
version: 2.0.0
type: tech-stack

description: |
  Systems programming language focused on safety, performance, and concurrency.
  Excellent for high-performance APIs with zero-cost abstractions.

category: backend
language: rust
runtime: native

extends:
  - backend

version_support:
  minimum: "1.70"
  recommended: "1.75"
  edition: "2021"

core_concepts:
  - ownership: "Memory safety without GC"
  - traits: "Shared behavior interfaces"
  - async_await: "Async runtime (Tokio)"
  - result_option: "Error handling types"
  - lifetimes: "Reference validity"
  - macros: "Code generation"
  - cargo: "Package manager & build"

architecture_patterns:
  - layered:
      description: "Handler → Service → Repository"
      use_when: "Most applications"
  - clean_architecture:
      description: "Domain-centric with traits"
      use_when: "Complex business logic"
  - hexagonal:
      description: "Ports and adapters"
      use_when: "Infrastructure independence"

framework_options:
  - axum:
      description: "Tokio-native, Tower-based"
      best_for: "Modern async APIs"
  - actix_web:
      description: "Actor-based, high performance"
      best_for: "High throughput APIs"
  - rocket:
      description: "Ergonomic, type-safe"
      best_for: "Developer experience"

database_options:
  - sqlx:
      description: "Compile-time checked SQL"
      best_for: "Type-safe raw SQL"
  - diesel:
      description: "Full ORM with DSL"
      best_for: "Complex queries, type safety"
  - sea_orm:
      description: "Async ORM inspired by ActiveRecord"
      best_for: "Rapid development"

capabilities:
  language:
    - rust
  framework:
    - actix-web
    - axum
    - rocket
  features:
    - async-await
    - tokio
    - serde
    - sqlx
    - diesel
    - sea-orm
  database:
    - postgresql
    - mysql
    - sqlite
  testing:
    - cargo-test
    - tokio-test

testing_stack:
  unit: cargo_test
  async: tokio_test
  http: axum_test_helpers

common_crates:
  core:
    - "tokio"
    - "axum"
    - "tower"
    - "tower-http"
  database:
    - "sqlx"
    - "sea-orm"
  serialization:
    - "serde"
    - "serde_json"
  auth:
    - "jsonwebtoken"
    - "argon2"
  validation:
    - "validator"
  error:
    - "thiserror"
    - "anyhow"
  config:
    - "config"
    - "dotenvy"
  logging:
    - "tracing"
    - "tracing-subscriber"
  testing:
    - "tokio-test"
    - "fake"

project_structure:
  recommended: |
    src/
    ├── main.rs
    ├── lib.rs
    ├── config.rs
    ├── error.rs
    ├── startup.rs
    ├── domain/
    │   ├── mod.rs
    │   └── {entity}/
    │       ├── mod.rs
    │       ├── entity.rs
    │       └── repository.rs
    ├── application/
    │   ├── mod.rs
    │   └── {entity}/
    │       ├── mod.rs
    │       ├── service.rs
    │       └── dto.rs
    ├── infrastructure/
    │   ├── mod.rs
    │   ├── database.rs
    │   └── repositories/
    │       └── {entity}_repo.rs
    ├── api/
    │   ├── mod.rs
    │   ├── router.rs
    │   └── handlers/
    │       └── {entity}_handler.rs
    └── middleware/
        ├── mod.rs
        └── auth.rs
    migrations/
    tests/
    ├── common/
    └── api/
    Cargo.toml

skills:
  - name: project-structure
    path: .claude/skills/stacks/backend/rust/architecture/project-structure.md
  - name: clean-architecture
    path: .claude/skills/stacks/backend/rust/architecture/clean-architecture.md
  - name: error-handling
    path: .claude/skills/stacks/backend/rust/architecture/error-handling.md
  - name: axum-patterns
    path: .claude/skills/stacks/backend/rust/frameworks/axum-patterns.md
  - name: actix-patterns
    path: .claude/skills/stacks/backend/rust/frameworks/actix-patterns.md
  - name: tower-middleware
    path: .claude/skills/stacks/backend/rust/frameworks/tower-middleware.md
  - name: sqlx-patterns
    path: .claude/skills/stacks/backend/rust/database/sqlx-patterns.md
  - name: diesel-patterns
    path: .claude/skills/stacks/backend/rust/database/diesel-patterns.md
  - name: sea-orm
    path: .claude/skills/stacks/backend/rust/database/sea-orm.md
  - name: migrations
    path: .claude/skills/stacks/backend/rust/database/migrations.md
  - name: jwt-auth
    path: .claude/skills/stacks/backend/rust/security/jwt-auth.md
  - name: argon2-passwords
    path: .claude/skills/stacks/backend/rust/security/argon2-passwords.md
  - name: extractors
    path: .claude/skills/stacks/backend/rust/security/extractors.md
  - name: validator-derive
    path: .claude/skills/stacks/backend/rust/validation/validator-derive.md
  - name: custom-validation
    path: .claude/skills/stacks/backend/rust/validation/custom-validation.md
  - name: unit-tests
    path: .claude/skills/stacks/backend/rust/testing/unit-tests.md
  - name: integration-tests
    path: .claude/skills/stacks/backend/rust/testing/integration-tests.md
  - name: test-fixtures
    path: .claude/skills/stacks/backend/rust/testing/test-fixtures.md
  - name: tokio-patterns
    path: .claude/skills/stacks/backend/rust/async/tokio-patterns.md
  - name: concurrency
    path: .claude/skills/stacks/backend/rust/async/concurrency.md

templates:
  - name: rust-handler
    path: templates/rust-handler.md
  - name: rust-model
    path: templates/rust-model.md
  - name: rust-repository
    path: templates/rust-repository.md
  - name: rust-service
    path: templates/rust-service.md
  - name: rust-dto
    path: templates/rust-dto.md
  - name: rust-error
    path: templates/rust-error.md
  - name: rust-middleware
    path: templates/rust-middleware.md
  - name: rust-test
    path: templates/rust-test.md

agents:
  - id: rust-handler-generator
    file: .claude/agents/stacks/backend/rust/handler-generator.md
    triggers: ["rust handler", "axum handler", "actix handler"]
  - id: rust-model-generator
    file: .claude/agents/stacks/backend/rust/model-generator.md
    triggers: ["rust model", "rust entity"]
  - id: rust-repository-generator
    file: .claude/agents/stacks/backend/rust/repository-generator.md
    triggers: ["rust repository", "rust repo"]
  - id: rust-service-generator
    file: .claude/agents/stacks/backend/rust/service-generator.md
    triggers: ["rust service"]
  - id: rust-test-generator
    file: .claude/agents/stacks/backend/rust/test-generator.md
    triggers: ["rust test", "rust tests"]

examples:
  - name: crud-api
    path: examples/crud-api/
    description: "Complete CRUD API with authentication"
  - name: auth-module
    path: examples/auth-module/
    description: "JWT authentication module"
