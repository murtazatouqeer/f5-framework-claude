name: backend-django
display_name: Django Backend Stack
version: 2.0.0
type: tech-stack

description: |
  Enterprise-grade backend development with Python Django 4.2-5.0.
  Django ORM, Django REST Framework 3.14+, Celery, comprehensive testing.

  Vietnamese: Phát triển backend enterprise với Python Django 4.2-5.0.
  Django ORM, Django REST Framework 3.14+, Celery, testing toàn diện.

extends:
  - backend

capabilities:
  language:
    - python
  runtime:
    version: "3.10+"
  framework:
    - django: "4.2-5.0"
    - django-rest-framework: "3.14+"
  features:
    - django-orm
    - django-admin
    - django-migrations
    - drf-serializers
    - drf-viewsets
    - drf-routers
    - drf-permissions
    - drf-throttling
    - drf-filtering
    - celery
    - django-signals
    - custom-managers
    - soft-delete
  database:
    - postgresql
    - mysql
    - sqlite
  cache:
    - redis
    - memcached
  queue:
    - celery
    - django-q
  testing:
    - pytest-django
    - factory-boy
    - faker
    - coverage

# ============ AGENTS ============
agents:
  - id: django-model-generator
    name: Django Model Generator
    file: .claude/agents/stacks/backend/django/model-generator.md
    triggers:
      - "django model"
      - "create model"
      - "generate model"
    description: Generates Django models with fields, relationships, and migrations

  - id: django-serializer-generator
    name: Django Serializer Generator
    file: .claude/agents/stacks/backend/django/serializer-generator.md
    triggers:
      - "drf serializer"
      - "create serializer"
      - "generate serializer"
    description: Generates DRF serializers with validation and nested relationships

  - id: django-view-generator
    name: Django View Generator
    file: .claude/agents/stacks/backend/django/view-generator.md
    triggers:
      - "django view"
      - "drf view"
      - "create view"
    description: Generates Django views and DRF ViewSets with actions

  - id: django-api-generator
    name: Django API Generator
    file: .claude/agents/stacks/backend/django/api-generator.md
    triggers:
      - "django api"
      - "drf api"
      - "rest api"
    description: Generates complete API modules with models, serializers, views, URLs

  - id: django-test-generator
    name: Django Test Generator
    file: .claude/agents/stacks/backend/django/test-generator.md
    triggers:
      - "django test"
      - "pytest"
      - "create test"
    description: Generates pytest-django tests with factories and fixtures

# ============ SKILLS ============
skills:
  # Architecture Skills
  - name: django-project-structure
    path: .claude/skills/stacks/backend/django/architecture/project-structure.md
    category: architecture
    description: Django project organization and app structure

  - name: django-app-patterns
    path: .claude/skills/stacks/backend/django/architecture/app-patterns.md
    category: architecture
    description: Django app design patterns and best practices

  # Database Skills
  - name: django-model-patterns
    path: .claude/skills/stacks/backend/django/database/model-patterns.md
    category: database
    description: Django ORM model patterns and field types

  - name: django-queryset-patterns
    path: .claude/skills/stacks/backend/django/database/queryset-patterns.md
    category: database
    description: QuerySet optimization and custom managers

  - name: django-migrations
    path: .claude/skills/stacks/backend/django/database/migrations.md
    category: database
    description: Django migrations best practices

  # Security Skills
  - name: django-authentication
    path: .claude/skills/stacks/backend/django/security/authentication.md
    category: security
    description: Django/DRF authentication patterns (JWT, Token, Session)

  - name: django-permissions
    path: .claude/skills/stacks/backend/django/security/permissions.md
    category: security
    description: DRF permission classes and access control

  # Validation Skills
  - name: drf-serializer-patterns
    path: .claude/skills/stacks/backend/django/validation/serializer-patterns.md
    category: validation
    description: DRF serializer validation and transformation

  - name: django-form-validation
    path: .claude/skills/stacks/backend/django/validation/form-validation.md
    category: validation
    description: Django forms and model validation

  # Error Handling Skills
  - name: drf-exception-handling
    path: .claude/skills/stacks/backend/django/error-handling/exception-handling.md
    category: error-handling
    description: DRF exception handling and error responses

  - name: django-logging
    path: .claude/skills/stacks/backend/django/error-handling/logging.md
    category: error-handling
    description: Django logging configuration and patterns

  # Testing Skills
  - name: pytest-django-patterns
    path: .claude/skills/stacks/backend/django/testing/pytest-patterns.md
    category: testing
    description: pytest-django testing patterns and fixtures

  - name: factory-boy-patterns
    path: .claude/skills/stacks/backend/django/testing/factory-patterns.md
    category: testing
    description: Factory Boy model factories for testing

  - name: api-testing
    path: .claude/skills/stacks/backend/django/testing/api-testing.md
    category: testing
    description: DRF API testing with APIClient

  # Performance Skills
  - name: django-optimization
    path: .claude/skills/stacks/backend/django/performance/optimization.md
    category: performance
    description: Django performance optimization techniques

  - name: django-caching
    path: .claude/skills/stacks/backend/django/performance/caching.md
    category: performance
    description: Django caching strategies with Redis

# ============ TEMPLATES ============
templates:
  model: templates/django-model.md
  serializer: templates/django-serializer.md
  view: templates/django-view.md
  viewset: templates/django-viewset.md
  api_url: templates/django-api-url.md
  admin: templates/django-admin.md
  signal: templates/django-signal.md
  task: templates/django-task.md
  test: templates/django-test.md

# ============ EXAMPLES ============
examples:
  - name: crud-api
    path: examples/crud-api/
    description: Complete CRUD API example with model, serializer, viewset

  - name: auth-module
    path: examples/auth-module/
    description: JWT authentication module with user management

# ============ CONVENTIONS ============
conventions:
  naming:
    models: PascalCase
    views: PascalCase + View/ViewSet suffix
    serializers: PascalCase + Serializer suffix
    urls: snake_case
    tests: test_ prefix

  file_structure:
    models: "models/ or models.py"
    views: "views/ or views.py"
    serializers: "serializers/ or serializers.py"
    urls: "urls.py"
    tests: "tests/"
    admin: "admin.py"
    signals: "signals.py"
    tasks: "tasks.py"

# ============ DEPENDENCIES ============
dependencies:
  required:
    - django: ">=4.2,<6.0"
    - djangorestframework: ">=3.14"
    - django-filter: ">=23.0"
    - drf-spectacular: ">=0.26"

  recommended:
    - djangorestframework-simplejwt: ">=5.3"
    - django-cors-headers: ">=4.3"
    - celery: ">=5.3"
    - redis: ">=5.0"
    - psycopg: ">=3.1"

  testing:
    - pytest: ">=7.4"
    - pytest-django: ">=4.5"
    - pytest-cov: ">=4.1"
    - factory-boy: ">=3.3"
    - faker: ">=19.0"

# ============ SETTINGS ============
settings:
  drf:
    default_authentication:
      - rest_framework_simplejwt.authentication.JWTAuthentication
    default_permission:
      - rest_framework.permissions.IsAuthenticated
    default_pagination: rest_framework.pagination.PageNumberPagination
    page_size: 20

  testing:
    coverage_threshold: 80
    parallel: true
