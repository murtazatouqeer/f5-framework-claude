# Spring Boot Stack Module
# F5 Framework v2.0 - Enterprise Spring Boot Development Toolkit

name: spring-boot
version: "3.2.0"
description: "Enterprise Spring Boot stack with layered/hexagonal architecture patterns"
category: backend

metadata:
  framework: spring-boot
  language: java
  min_version: "17"
  recommended_version: "21"
  spring_boot_version: "3.2.x"
  spring_framework_version: "6.1.x"

# Dependencies and Build Configuration
dependencies:
  core:
    - name: spring-boot-starter-web
      scope: compile
      description: "Web MVC and REST support"
    - name: spring-boot-starter-data-jpa
      scope: compile
      description: "JPA with Hibernate"
    - name: spring-boot-starter-validation
      scope: compile
      description: "Bean Validation with Hibernate Validator"
    - name: spring-boot-starter-security
      scope: compile
      description: "Spring Security"
    - name: spring-boot-starter-actuator
      scope: compile
      description: "Production-ready features"

  database:
    - name: postgresql
      scope: runtime
      description: "PostgreSQL JDBC Driver"
    - name: flyway-core
      scope: compile
      description: "Database migrations"
    - name: flyway-database-postgresql
      scope: runtime
      description: "Flyway PostgreSQL support"

  utilities:
    - name: lombok
      scope: compileOnly
      description: "Boilerplate reduction"
    - name: mapstruct
      scope: compile
      version: "1.5.5.Final"
      description: "DTO mapping"
    - name: mapstruct-processor
      scope: annotationProcessor
      version: "1.5.5.Final"
      description: "MapStruct annotation processor"

  security:
    - name: jjwt-api
      scope: compile
      version: "0.12.3"
      description: "JWT API"
    - name: jjwt-impl
      scope: runtime
      version: "0.12.3"
      description: "JWT implementation"
    - name: jjwt-jackson
      scope: runtime
      version: "0.12.3"
      description: "JWT Jackson support"

  documentation:
    - name: springdoc-openapi-starter-webmvc-ui
      scope: compile
      version: "2.3.0"
      description: "OpenAPI/Swagger documentation"

  testing:
    - name: spring-boot-starter-test
      scope: test
      description: "Testing starter"
    - name: spring-security-test
      scope: test
      description: "Security testing support"
    - name: testcontainers
      scope: test
      description: "Testcontainers core"
    - name: postgresql (testcontainers)
      scope: test
      description: "PostgreSQL Testcontainers"
    - name: junit-jupiter (testcontainers)
      scope: test
      description: "JUnit 5 Testcontainers support"

# Project Structure
structure:
  base_package: "com.example.app"
  layers:
    - name: controller
      package: "web.controller"
      description: "REST API controllers"
    - name: service
      package: "service"
      description: "Business logic services"
    - name: repository
      package: "repository"
      description: "Data access repositories"
    - name: entity
      package: "domain.entity"
      description: "JPA entities"
    - name: dto
      package: "web.dto"
      description: "Data Transfer Objects"
    - name: mapper
      package: "web.mapper"
      description: "DTO-Entity mappers"
    - name: exception
      package: "exception"
      description: "Custom exceptions"
    - name: config
      package: "config"
      description: "Configuration classes"
    - name: security
      package: "security"
      description: "Security components"

# Architecture Patterns
architecture:
  default: layered
  supported:
    - name: layered
      description: "Traditional layered architecture"
      layers:
        - presentation
        - business
        - persistence
    - name: hexagonal
      description: "Ports and Adapters architecture"
      components:
        - domain
        - application
        - infrastructure
    - name: ddd
      description: "Domain-Driven Design"
      building_blocks:
        - entity
        - value_object
        - aggregate
        - repository
        - service
        - factory

# Skills Configuration
skills:
  # Architecture Skills
  architecture:
    - name: layered-architecture
      path: .claude/skills/stacks/backend/spring/architecture/layered-architecture.md
      description: "Controller → Service → Repository pattern"
    - name: hexagonal-architecture
      path: .claude/skills/stacks/backend/spring/architecture/hexagonal-architecture.md
      description: "Ports and Adapters pattern"
    - name: ddd-patterns
      path: .claude/skills/stacks/backend/spring/architecture/ddd-patterns.md
      description: "Domain-Driven Design building blocks"

  # Database Skills
  database:
    - name: jpa-patterns
      path: .claude/skills/stacks/backend/spring/database/jpa-patterns.md
      description: "JPA entity relationships and mappings"
    - name: spring-data-jpa
      path: .claude/skills/stacks/backend/spring/database/spring-data-jpa.md
      description: "Spring Data JPA repositories"
    - name: transactions
      path: .claude/skills/stacks/backend/spring/database/transactions.md
      description: "Transaction management patterns"
    - name: flyway-migrations
      path: .claude/skills/stacks/backend/spring/database/flyway-migrations.md
      description: "Database migration strategies"

  # Security Skills
  security:
    - name: spring-security
      path: .claude/skills/stacks/backend/spring/security/spring-security.md
      description: "Spring Security configuration"
    - name: jwt-authentication
      path: .claude/skills/stacks/backend/spring/security/jwt-authentication.md
      description: "JWT token authentication"
    - name: oauth2-patterns
      path: .claude/skills/stacks/backend/spring/security/oauth2-patterns.md
      description: "OAuth2 resource server patterns"
    - name: method-security
      path: .claude/skills/stacks/backend/spring/security/method-security.md
      description: "Method-level security with @PreAuthorize"

  # Validation Skills
  validation:
    - name: bean-validation
      path: .claude/skills/stacks/backend/spring/validation/bean-validation.md
      description: "Jakarta Bean Validation"
    - name: custom-validators
      path: .claude/skills/stacks/backend/spring/validation/custom-validators.md
      description: "Custom validation annotations"

  # Error Handling Skills
  error_handling:
    - name: exception-handling
      path: .claude/skills/stacks/backend/spring/error-handling/exception-handling.md
      description: "Global exception handling"
    - name: problem-details
      path: .claude/skills/stacks/backend/spring/error-handling/problem-details.md
      description: "RFC 7807 Problem Details"

  # Testing Skills
  testing:
    - name: unit-testing
      path: .claude/skills/stacks/backend/spring/testing/unit-testing.md
      description: "JUnit 5 and Mockito patterns"
    - name: integration-testing
      path: .claude/skills/stacks/backend/spring/testing/integration-testing.md
      description: "Spring Boot integration tests"
    - name: testcontainers
      path: .claude/skills/stacks/backend/spring/testing/testcontainers.md
      description: "Testcontainers for database testing"

  # Performance Skills
  performance:
    - name: caching
      path: .claude/skills/stacks/backend/spring/performance/caching.md
      description: "Spring Cache abstraction"
    - name: async-processing
      path: .claude/skills/stacks/backend/spring/performance/async-processing.md
      description: "Async and reactive patterns"

# Templates Configuration
templates:
  - name: spring-controller
    path: templates/spring-controller.md
    description: "REST controller template"
    generates: "*Controller.java"

  - name: spring-service
    path: templates/spring-service.md
    description: "Service layer template"
    generates: "*Service.java, *ServiceImpl.java"

  - name: spring-repository
    path: templates/spring-repository.md
    description: "Repository layer template"
    generates: "*Repository.java"

  - name: spring-entity
    path: templates/spring-entity.md
    description: "JPA entity template"
    generates: "*.java (entity)"

  - name: spring-dto
    path: templates/spring-dto.md
    description: "DTO templates (request/response)"
    generates: "*Request.java, *Response.java"

  - name: spring-mapper
    path: templates/spring-mapper.md
    description: "MapStruct mapper template"
    generates: "*Mapper.java"

  - name: spring-exception
    path: templates/spring-exception.md
    description: "Exception handling template"
    generates: "*Exception.java, GlobalExceptionHandler.java"

  - name: spring-config
    path: templates/spring-config.md
    description: "Configuration class template"
    generates: "*Config.java"

  - name: spring-test
    path: templates/spring-test.md
    description: "Test class templates"
    generates: "*Test.java, *IntegrationTest.java"

# Agents Configuration
agents:
  - name: controller-generator
    path: .claude/agents/stacks/backend/spring/controller-generator.md
    description: "Generates REST controllers with CRUD operations"
    capabilities:
      - crud_endpoints
      - pagination
      - filtering
      - openapi_docs

  - name: service-generator
    path: .claude/agents/stacks/backend/spring/service-generator.md
    description: "Generates service layer with business logic"
    capabilities:
      - business_logic
      - transaction_management
      - validation
      - event_publishing

  - name: entity-generator
    path: .claude/agents/stacks/backend/spring/entity-generator.md
    description: "Generates JPA entities with relationships"
    capabilities:
      - entity_mapping
      - relationships
      - auditing
      - soft_delete

  - name: repository-generator
    path: .claude/agents/stacks/backend/spring/repository-generator.md
    description: "Generates Spring Data JPA repositories"
    capabilities:
      - query_methods
      - custom_queries
      - specifications
      - projections

  - name: test-generator
    path: .claude/agents/stacks/backend/spring/test-generator.md
    description: "Generates comprehensive test suites"
    capabilities:
      - unit_tests
      - integration_tests
      - controller_tests
      - repository_tests

# Examples Configuration
examples:
  - name: crud-api
    path: examples/crud-api/
    description: "Complete CRUD REST API example"
    features:
      - entity_definition
      - controller_implementation
      - service_layer
      - repository_pattern
      - dto_mapping
      - validation
      - pagination
      - openapi_docs

  - name: auth-module
    path: examples/auth-module/
    description: "Complete authentication module"
    features:
      - jwt_authentication
      - user_registration
      - password_management
      - role_based_access
      - method_security
      - refresh_tokens

# Code Generation Configuration
generation:
  naming_conventions:
    controller: "{Entity}Controller"
    service: "{Entity}Service"
    service_impl: "{Entity}ServiceImpl"
    repository: "{Entity}Repository"
    entity: "{Entity}"
    dto_request: "{Entity}Request"
    dto_response: "{Entity}Response"
    mapper: "{Entity}Mapper"
    exception: "{Entity}NotFoundException"
    test: "{Entity}Test"
    integration_test: "{Entity}IntegrationTest"

  annotations:
    controller:
      - "@RestController"
      - "@RequestMapping(\"/api/v1/{entities}\")"
      - "@RequiredArgsConstructor"
      - "@Tag(name = \"{Entity}\")"
    service:
      - "@Service"
      - "@RequiredArgsConstructor"
      - "@Transactional(readOnly = true)"
    repository:
      - "@Repository"
    entity:
      - "@Entity"
      - "@Table(name = \"{entities}\")"
      - "@Getter"
      - "@Setter"
      - "@NoArgsConstructor"
      - "@EntityListeners(AuditingEntityListener.class)"

  imports:
    common:
      - "lombok.*"
      - "jakarta.persistence.*"
      - "jakarta.validation.constraints.*"
      - "org.springframework.stereotype.*"
      - "org.springframework.web.bind.annotation.*"
      - "org.springframework.data.jpa.repository.*"

# Quality Configuration
quality:
  code_style:
    formatter: google-java-format
    max_line_length: 120
    indent_size: 4
    use_tabs: false

  static_analysis:
    - tool: checkstyle
      config: google_checks.xml
    - tool: spotbugs
      effort: max
    - tool: pmd
      ruleset: java-basic

  testing:
    min_coverage: 80
    coverage_tool: jacoco
    mutation_testing: pitest

  documentation:
    javadoc_required: public_api
    openapi_required: true

# Integration Points
integrations:
  build_tools:
    - gradle
    - maven

  ci_cd:
    - github_actions
    - gitlab_ci
    - jenkins

  monitoring:
    - spring_actuator
    - micrometer
    - prometheus

  logging:
    - slf4j
    - logback
    - structured_logging

# Environment Configuration
environments:
  development:
    profile: dev
    database: h2
    logging_level: DEBUG
    hot_reload: true

  testing:
    profile: test
    database: testcontainers
    logging_level: INFO

  staging:
    profile: staging
    database: postgresql
    logging_level: INFO

  production:
    profile: prod
    database: postgresql
    logging_level: WARN
    ssl_enabled: true
