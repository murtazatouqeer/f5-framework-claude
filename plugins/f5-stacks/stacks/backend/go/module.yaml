name: backend-go
display_name: Go Backend
version: 2.0.0
type: tech-stack

description: |
  Backend development with Go (Golang).
  Statically typed, compiled language designed for simplicity and efficiency.
  Excellent for building high-performance APIs, microservices, and concurrent systems.

extends:
  - backend

version_support:
  minimum: "1.20"
  recommended: "1.22"

core_concepts:
  packages:
    description: Code organization units
    importance: fundamental
  interfaces:
    description: Implicit interface implementation
    importance: fundamental
  goroutines:
    description: Lightweight concurrent threads
    importance: high
  channels:
    description: Communication between goroutines
    importance: high
  structs:
    description: Data structures and methods
    importance: fundamental
  error_handling:
    description: Explicit error returns
    importance: fundamental
  context:
    description: Request-scoped values and cancellation
    importance: high

capabilities:
  language:
    - go
  framework:
    - gin
    - echo
    - fiber
    - chi
  features:
    - goroutines
    - channels
    - context
    - interfaces
  database:
    - postgresql
    - mysql
    - sqlite
    - mongodb
    - redis
  orm:
    - gorm
    - sqlx
    - ent
    - sqlc
  testing:
    - go-test
    - testify
    - mockery

architecture_patterns:
  standard_layout:
    description: Standard Go project layout with cmd/, internal/, pkg/
    use_when: Most Go projects
    directories:
      - cmd/
      - internal/
      - pkg/
  clean_architecture:
    description: Domain-centric layers with dependency inversion
    use_when: Complex business logic, large teams
    layers:
      - domain
      - usecase
      - adapter
      - infrastructure
  hexagonal:
    description: Ports and adapters pattern
    use_when: Infrastructure independence, testability focus
    concepts:
      - ports
      - adapters
      - domain

web_frameworks:
  gin:
    description: Fast HTTP web framework with martini-like API
    best_for: REST APIs, high performance requirements
    features:
      - middleware
      - routing
      - validation
      - rendering
  echo:
    description: High performance, minimalist Go framework
    best_for: REST APIs, clean architecture
    features:
      - middleware
      - data-binding
      - validation
  fiber:
    description: Express-inspired, built on fasthttp
    best_for: Developers coming from Node.js
    features:
      - express-like-api
      - zero-allocation
      - middleware
  chi:
    description: Lightweight, idiomatic Go router
    best_for: Standard library lovers, composition
    features:
      - middleware
      - context-based
      - composable

database_options:
  sqlx:
    description: Extensions to database/sql with struct scanning
    best_for: Raw SQL with struct scanning, performance
    learning_curve: low
  gorm:
    description: Full-featured ORM for Go
    best_for: Rapid development, complex relations
    learning_curve: medium
  ent:
    description: Entity framework with code generation
    best_for: Type-safe queries, complex schemas
    learning_curve: medium
  sqlc:
    description: SQL compiler generating type-safe Go
    best_for: Type-safe SQL queries, compile-time checking
    learning_curve: low

testing_stack:
  unit:
    framework: testing
    description: Standard library testing
  assertions:
    framework: testify
    description: Assertion library with require/assert
  mocking:
    framework: mockery
    description: Mock generation from interfaces
  coverage:
    command: go test -cover
    description: Built-in coverage support

common_packages:
  web:
    - name: gin
      import: github.com/gin-gonic/gin
    - name: echo
      import: github.com/labstack/echo/v4
    - name: fiber
      import: github.com/gofiber/fiber/v2
    - name: chi
      import: github.com/go-chi/chi/v5
  database:
    - name: sqlx
      import: github.com/jmoiron/sqlx
    - name: gorm
      import: gorm.io/gorm
    - name: pgx
      import: github.com/jackc/pgx/v5
    - name: mongo-driver
      import: go.mongodb.org/mongo-driver
  auth:
    - name: jwt
      import: github.com/golang-jwt/jwt/v5
    - name: bcrypt
      import: golang.org/x/crypto/bcrypt
    - name: oauth2
      import: golang.org/x/oauth2
  validation:
    - name: validator
      import: github.com/go-playground/validator/v10
  config:
    - name: viper
      import: github.com/spf13/viper
    - name: env
      import: github.com/caarlos0/env/v10
    - name: godotenv
      import: github.com/joho/godotenv
  logging:
    - name: zap
      import: go.uber.org/zap
    - name: zerolog
      import: github.com/rs/zerolog
    - name: logrus
      import: github.com/sirupsen/logrus
  testing:
    - name: testify
      import: github.com/stretchr/testify
    - name: mockery
      import: github.com/vektra/mockery
    - name: testcontainers
      import: github.com/testcontainers/testcontainers-go
  utils:
    - name: uuid
      import: github.com/google/uuid
    - name: copier
      import: github.com/jinzhu/copier
    - name: lo
      import: github.com/samber/lo

project_structure:
  recommended: |
    project/
    ├── cmd/
    │   └── api/
    │       └── main.go              # Entry point
    ├── internal/
    │   ├── config/
    │   │   └── config.go            # Configuration
    │   ├── domain/
    │   │   └── {entity}/
    │   │       ├── entity.go        # Domain entity
    │   │       ├── repository.go    # Repository interface
    │   │       ├── service.go       # Service interface
    │   │       └── errors.go        # Domain errors
    │   ├── handler/
    │   │   └── {entity}_handler.go  # HTTP handlers
    │   ├── middleware/
    │   │   ├── auth.go
    │   │   ├── logging.go
    │   │   └── recovery.go
    │   ├── repository/
    │   │   └── postgres/
    │   │       └── {entity}_repo.go # Repository impl
    │   └── service/
    │       └── {entity}_service.go  # Service impl
    ├── pkg/
    │   ├── errors/
    │   │   └── errors.go            # Custom errors
    │   ├── response/
    │   │   └── response.go          # Response helpers
    │   └── validator/
    │       └── validator.go         # Custom validators
    ├── migrations/
    │   └── 001_init.sql
    ├── docs/
    │   └── swagger.yaml
    ├── scripts/
    ├── docker/
    ├── go.mod
    ├── go.sum
    ├── Makefile
    └── .env.example

skills:
  # Architecture
  - name: project-layout
    path: .claude/skills/stacks/backend/go/architecture/project-layout.md
  - name: clean-architecture
    path: .claude/skills/stacks/backend/go/architecture/clean-architecture.md
  - name: domain-driven
    path: .claude/skills/stacks/backend/go/architecture/domain-driven.md
  # Database
  - name: sqlx-patterns
    path: .claude/skills/stacks/backend/go/database/sqlx-patterns.md
  - name: gorm-patterns
    path: .claude/skills/stacks/backend/go/database/gorm-patterns.md
  - name: migrations
    path: .claude/skills/stacks/backend/go/database/migrations.md
  - name: repository-pattern
    path: .claude/skills/stacks/backend/go/database/repository-pattern.md
  # Security
  - name: jwt-auth
    path: .claude/skills/stacks/backend/go/security/jwt-auth.md
  - name: middleware
    path: .claude/skills/stacks/backend/go/security/middleware.md
  - name: rbac
    path: .claude/skills/stacks/backend/go/security/rbac.md
  # Validation
  - name: validator
    path: .claude/skills/stacks/backend/go/validation/validator.md
  - name: custom-validation
    path: .claude/skills/stacks/backend/go/validation/custom-validation.md
  # Error Handling
  - name: error-patterns
    path: .claude/skills/stacks/backend/go/error-handling/error-patterns.md
  - name: custom-errors
    path: .claude/skills/stacks/backend/go/error-handling/custom-errors.md
  # Testing
  - name: table-driven-tests
    path: .claude/skills/stacks/backend/go/testing/table-driven-tests.md
  - name: mocking
    path: .claude/skills/stacks/backend/go/testing/mocking.md
  - name: integration-tests
    path: .claude/skills/stacks/backend/go/testing/integration-tests.md
  # Performance
  - name: concurrency
    path: .claude/skills/stacks/backend/go/performance/concurrency.md
  - name: caching
    path: .claude/skills/stacks/backend/go/performance/caching.md
  - name: profiling
    path: .claude/skills/stacks/backend/go/performance/profiling.md

templates:
  handler: templates/go-handler.md
  service: templates/go-service.md
  repository: templates/go-repository.md
  model: templates/go-model.md
  dto: templates/go-dto.md
  middleware: templates/go-middleware.md
  config: templates/go-config.md
  test: templates/go-test.md

agents:
  - id: go-handler-generator
    file: .claude/agents/stacks/backend/go/handler-generator.md
    triggers:
      - go handler
      - gin handler
      - echo handler
      - fiber handler
  - id: go-service-generator
    file: .claude/agents/stacks/backend/go/service-generator.md
    triggers:
      - go service
      - business logic
  - id: go-repository-generator
    file: .claude/agents/stacks/backend/go/repository-generator.md
    triggers:
      - go repository
      - data access
      - sqlx repository
      - gorm repository
  - id: go-test-generator
    file: .claude/agents/stacks/backend/go/test-generator.md
    triggers:
      - go test
      - unit test
      - table driven test

examples:
  - name: crud-api
    path: examples/crud-api/
    description: Complete CRUD API with Gin and PostgreSQL
  - name: auth-module
    path: examples/auth-module/
    description: JWT authentication module with middleware
