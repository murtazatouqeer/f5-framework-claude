name: dotnet
display_name: ASP.NET Core
version: 2.0.0
type: tech-stack

description: |
  Cross-platform, high-performance framework for building modern cloud-based applications.
  Built on .NET with C# for enterprise-grade APIs.

  ## Key Features
  - **Clean Architecture**: Separation of concerns with layers
  - **CQRS Pattern**: Commands and Queries with MediatR
  - **Entity Framework Core**: Code-first database approach
  - **JWT Authentication**: Secure token-based auth
  - **FluentValidation**: Declarative validation rules
  - **Swagger/OpenAPI**: Automatic API documentation

extends:
  - backend

capabilities:
  language:
    - csharp
    - fsharp
  framework:
    - dotnet-8
    - aspnet-core
  features:
    - clean-architecture
    - cqrs-pattern
    - mediator
    - entity-framework
    - minimal-apis
    - dependency-injection
    - middleware
    - identity
    - jwt-auth
  database:
    - sqlserver
    - postgresql
    - sqlite
    - cosmos-db
  testing:
    - xunit
    - nunit
    - moq
    - fluent-assertions
  tools:
    - swagger
    - serilog
    - automapper
    - health-checks

# Agents for code generation
agents:
  - id: dotnet-controller-generator
    file: .claude/agents/stacks/backend/dotnet/controller-generator.md
    triggers:
      - "create controller"
      - "generate controller"
      - "add controller"
      - "dotnet controller"
      - "aspnet controller"

  - id: dotnet-service-generator
    file: .claude/agents/stacks/backend/dotnet/service-generator.md
    triggers:
      - "create service"
      - "generate service"
      - "add service"
      - "dotnet service"

  - id: dotnet-entity-generator
    file: .claude/agents/stacks/backend/dotnet/entity-generator.md
    triggers:
      - "create entity"
      - "generate entity"
      - "add entity"
      - "ef entity"
      - "dotnet entity"

  - id: dotnet-cqrs-generator
    file: .claude/agents/stacks/backend/dotnet/cqrs-generator.md
    triggers:
      - "create command"
      - "create query"
      - "generate handler"
      - "cqrs"
      - "mediatr"

  - id: dotnet-test-generator
    file: .claude/agents/stacks/backend/dotnet/test-generator.md
    triggers:
      - "create test"
      - "generate test"
      - "add test"
      - "xunit"
      - "unit test"

# Skills for knowledge and patterns
skills:
  # Architecture
  - name: clean-architecture
    path: .claude/skills/stacks/backend/dotnet/architecture/clean-architecture.md
    description: Layer separation and dependency rules
  - name: vertical-slices
    path: .claude/skills/stacks/backend/dotnet/architecture/vertical-slices.md
    description: Feature-based code organization
  - name: project-structure
    path: .claude/skills/stacks/backend/dotnet/architecture/project-structure.md
    description: Solution and project organization

  # Database
  - name: ef-core-patterns
    path: .claude/skills/stacks/backend/dotnet/database/ef-core-patterns.md
    description: Entity Framework Core best practices
  - name: migrations
    path: .claude/skills/stacks/backend/dotnet/database/migrations.md
    description: Code-first migration management
  - name: repository-pattern
    path: .claude/skills/stacks/backend/dotnet/database/repository-pattern.md
    description: Repository and Unit of Work patterns
  - name: unit-of-work
    path: .claude/skills/stacks/backend/dotnet/database/unit-of-work.md
    description: Unit of Work pattern implementation

  # API
  - name: controller-patterns
    path: .claude/skills/stacks/backend/dotnet/api/controller-patterns.md
    description: ASP.NET Core controller best practices
  - name: minimal-apis
    path: .claude/skills/stacks/backend/dotnet/api/minimal-apis.md
    description: Minimal API endpoints
  - name: api-versioning
    path: .claude/skills/stacks/backend/dotnet/api/api-versioning.md
    description: API versioning strategies

  # Security
  - name: jwt-authentication
    path: .claude/skills/stacks/backend/dotnet/security/jwt-authentication.md
    description: JWT token-based authentication
  - name: authorization-policies
    path: .claude/skills/stacks/backend/dotnet/security/authorization-policies.md
    description: Policy-based authorization
  - name: identity-setup
    path: .claude/skills/stacks/backend/dotnet/security/identity-setup.md
    description: ASP.NET Core Identity configuration

  # Validation
  - name: fluent-validation
    path: .claude/skills/stacks/backend/dotnet/validation/fluent-validation.md
    description: FluentValidation rules and patterns
  - name: model-validation
    path: .claude/skills/stacks/backend/dotnet/validation/model-validation.md
    description: Data annotations and model validation

  # Error Handling
  - name: exception-handling
    path: .claude/skills/stacks/backend/dotnet/error-handling/exception-handling.md
    description: Global exception handling middleware
  - name: problem-details
    path: .claude/skills/stacks/backend/dotnet/error-handling/problem-details.md
    description: RFC 7807 Problem Details responses

  # Testing
  - name: unit-testing
    path: .claude/skills/stacks/backend/dotnet/testing/unit-testing.md
    description: xUnit testing patterns
  - name: integration-testing
    path: .claude/skills/stacks/backend/dotnet/testing/integration-testing.md
    description: WebApplicationFactory testing
  - name: mocking
    path: .claude/skills/stacks/backend/dotnet/testing/mocking.md
    description: Moq mocking framework patterns

  # Patterns
  - name: mediator-cqrs
    path: .claude/skills/stacks/backend/dotnet/patterns/mediator-cqrs.md
    description: MediatR and CQRS implementation
  - name: result-pattern
    path: .claude/skills/stacks/backend/dotnet/patterns/result-pattern.md
    description: Result pattern for operation outcomes
  - name: options-pattern
    path: .claude/skills/stacks/backend/dotnet/patterns/options-pattern.md
    description: Strongly-typed configuration options

# Templates for code generation
templates:
  controller: templates/dotnet-controller.md
  service: templates/dotnet-service.md
  entity: templates/dotnet-entity.md
  dto: templates/dotnet-dto.md
  repository: templates/dotnet-repository.md
  handler: templates/dotnet-handler.md
  validator: templates/dotnet-validator.md
  test: templates/dotnet-test.md

# Examples
examples:
  - name: crud-api
    path: examples/crud-api/README.md
    description: Complete CRUD API with Clean Architecture
  - name: auth-module
    path: examples/auth-module/README.md
    description: JWT Authentication with ASP.NET Core Identity

# CQRS/MediatR patterns
patterns:
  cqrs:
    command:
      naming: "{Action}{Entity}Command"
      example: "CreateProductCommand"
    query:
      naming: "Get{Entity}{Suffix}Query"
      example: "GetProductByIdQuery"
    handler:
      naming: "{Command/Query}Handler"
      example: "CreateProductCommandHandler"

# Naming conventions
conventions:
  files:
    controller: "{Entity}Controller.cs"
    service: "I{Entity}Service.cs / {Entity}Service.cs"
    entity: "{Entity}.cs"
    dto: "{Entity}Dto.cs"
    repository: "I{Entity}Repository.cs / {Entity}Repository.cs"
    handler: "{Command}Handler.cs"
    validator: "{Entity}Validator.cs"
    test: "{Entity}Tests.cs"
  folders:
    controllers: "Controllers"
    services: "Services"
    entities: "Entities"
    dtos: "DTOs"
    repositories: "Repositories"
    handlers: "Handlers"
    validators: "Validators"
    tests: "Tests"

# Dependencies and packages
dependencies:
  core:
    - Microsoft.AspNetCore.App
    - Microsoft.EntityFrameworkCore
    - Microsoft.EntityFrameworkCore.SqlServer
  mediator:
    - MediatR
    - MediatR.Extensions.Microsoft.DependencyInjection
  validation:
    - FluentValidation
    - FluentValidation.AspNetCore
  authentication:
    - Microsoft.AspNetCore.Authentication.JwtBearer
    - System.IdentityModel.Tokens.Jwt
  documentation:
    - Swashbuckle.AspNetCore
  testing:
    - xunit
    - xunit.runner.visualstudio
    - Moq
    - FluentAssertions
    - Microsoft.AspNetCore.Mvc.Testing
