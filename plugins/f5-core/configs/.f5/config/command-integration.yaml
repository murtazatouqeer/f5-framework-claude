# F5 Command-Agent-MCP Integration
# Version: 1.0.0
# This file defines how commands auto-invoke agents and MCPs

command_integration:

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # IMPLEMENTATION COMMANDS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  f5-implement:
    description: "Implement features with auto-agent support"
    pre_checks:
      mcp:
        required: [context7]
        optional: [serena]
    agents:
      auto_invoke:
        - agent: code_generator
          when: always
          priority: 1
        - agent: test_writer
          when: "tdd_mode OR project_type == production"
          priority: 2
        - agent: documenter
          when: "project_type == production"
          priority: 3
    role_optimization:
      backend:
        agents: [code_generator, api_designer]
        focus: "API endpoints, services, repositories"
      frontend:
        agents: [code_generator]
        focus: "Components, hooks, state"
      fullstack:
        agents: [code_generator, api_designer]
        focus: "Full feature implementation"

  f5-backend:
    description: "Backend development with auto-agent"
    pre_checks:
      mcp:
        required: [context7]
        optional: [serena]
    agents:
      auto_invoke:
        - agent: api_designer
          when: "task contains 'api' OR 'endpoint'"
          priority: 1
        - agent: code_generator
          when: always
          priority: 2
        - agent: test_writer
          when: "tdd_mode OR project_type != poc"
          priority: 3
    mcp_usage:
      context7: "Fetch framework documentation (NestJS, Spring, etc.)"
      serena: "Understand existing codebase patterns"

  f5-web:
    description: "Frontend development with auto-agent"
    pre_checks:
      mcp:
        required: [context7]
        optional: [magic, playwright]
    agents:
      auto_invoke:
        - agent: code_generator
          when: always
          priority: 1
        - agent: test_writer
          when: "tdd_mode"
          priority: 2
    mcp_usage:
      context7: "Fetch React/Vue/Angular documentation"
      magic: "Generate UI components from 21st.dev"
      playwright: "Visual testing support"

  f5-mobile:
    description: "Mobile development with auto-agent"
    pre_checks:
      mcp:
        required: [context7]
        optional: []
    agents:
      auto_invoke:
        - agent: code_generator
          when: always
          priority: 1
        - agent: test_writer
          when: "tdd_mode"
          priority: 2
    mcp_usage:
      context7: "Fetch Flutter/React Native documentation"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # TESTING COMMANDS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  f5-test:
    description: "Testing with auto-agent"
    pre_checks:
      mcp:
        required: [sequential-thinking]
        optional: [context7]
    agents:
      auto_invoke:
        - agent: test_writer
          when: always
          priority: 1
        - agent: code_reviewer
          when: "review_tests == true"
          priority: 2
    mcp_usage:
      sequential-thinking: "Plan test strategy"
      context7: "Check testing library docs"

  f5-test-e2e:
    description: "E2E testing with Playwright"
    pre_checks:
      mcp:
        required: [playwright]
        optional: [chrome-devtools]
      warn_if_missing: true
      fallback: "Manual E2E test instructions"
    agents:
      auto_invoke:
        - agent: test_writer
          when: always
          priority: 1
    mcp_usage:
      playwright: "Browser automation for E2E tests"
      chrome-devtools: "Debug E2E test failures"

  f5-test-visual:
    description: "Visual regression testing"
    pre_checks:
      mcp:
        required: [playwright]
        optional: [chrome-devtools]
    agents:
      auto_invoke:
        - agent: test_writer
          when: always
          priority: 1
    mcp_usage:
      playwright: "Screenshot capture and comparison"

  f5-test-it:
    description: "Integration testing"
    pre_checks:
      mcp:
        required: [sequential-thinking]
        optional: [playwright]
    agents:
      auto_invoke:
        - agent: test_writer
          when: always
          priority: 1
    mcp_usage:
      sequential-thinking: "Plan integration test strategy"
      playwright: "API and UI integration tests"

  f5-tdd:
    description: "Test-Driven Development workflow"
    pre_checks:
      mcp:
        required: [sequential-thinking]
        optional: [context7]
    agents:
      auto_invoke:
        - agent: test_writer
          when: always
          priority: 1
        - agent: code_generator
          when: "phase == green"
          priority: 2
    mcp_usage:
      sequential-thinking: "Structure TDD cycle"
      context7: "Testing patterns and best practices"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # REVIEW COMMANDS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  f5-review:
    description: "Code review with multi-agent"
    pre_checks:
      mcp:
        required: [sequential-thinking]
        optional: [serena]
    agents:
      auto_invoke:
        - agent: code_reviewer
          when: always
          priority: 1
        - agent: security_scanner
          when: "review_type == full OR gate >= G3"
          priority: 2
        - agent: performance_analyzer
          when: "review_type == full"
          priority: 3
    mcp_usage:
      sequential-thinking: "Structured review process"
      serena: "Understand code context"

  f5-security:
    description: "Security audit"
    pre_checks:
      mcp:
        required: [sequential-thinking]
        optional: []
    agents:
      auto_invoke:
        - agent: security_scanner
          when: always
          priority: 1
        - agent: code_reviewer
          when: "findings_count > 0"
          priority: 2
    mcp_usage:
      sequential-thinking: "Systematic security analysis"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # RESEARCH COMMANDS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  f5-research:
    description: "Research with web search"
    pre_checks:
      mcp:
        required: [tavily]
        optional: [context7]
      warn_if_missing: true
      fallback: "Use built-in web search (limited)"
    agents:
      auto_invoke: []  # No code agents
    mcp_usage:
      tavily: "Web search for research"
      context7: "Library documentation lookup"

  f5-ba:
    description: "Business Analysis workflow"
    pre_checks:
      mcp:
        required: [tavily]
        optional: [context7]
    agents:
      auto_invoke:
        - agent: api_designer
          when: "phase == use_case_design"
          priority: 1
    mcp_usage:
      tavily: "Market research, competitor analysis"
      context7: "Technology evaluation"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # DESIGN COMMANDS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  f5-design:
    description: "Design document generation"
    pre_checks:
      mcp:
        required: [context7]
        optional: [sequential-thinking]
    agents:
      auto_invoke:
        - agent: api_designer
          when: "design_type contains 'api'"
          priority: 1
        - agent: documenter
          when: always
          priority: 2
    mcp_usage:
      context7: "Architecture patterns"
      sequential-thinking: "Design analysis"

  f5-spec:
    description: "Specification generation"
    pre_checks:
      mcp:
        required: [context7]
        optional: [sequential-thinking]
    agents:
      auto_invoke:
        - agent: documenter
          when: always
          priority: 1
    mcp_usage:
      context7: "Specification templates"
      sequential-thinking: "Spec validation"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # GATE COMMANDS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  f5-gate:
    description: "Quality gate verification"
    pre_checks:
      mcp:
        required: [sequential-thinking]
        optional: [github]
    agents:
      gate_specific:
        D1:
          agents: []
          mcps: [tavily, context7]
        D2:
          agents: [api_designer]
          mcps: [context7]
        D3:
          agents: [api_designer, documenter]
          mcps: [context7, sequential-thinking]
        D4:
          agents: [documenter]
          mcps: [context7]
        G2:
          agents: [code_generator, test_writer, code_reviewer]
          mcps: [context7, serena, sequential-thinking]
        G2.5:
          agents: [test_writer]
          mcps: [playwright, sequential-thinking]
        G3:
          agents: [test_writer, security_scanner, performance_analyzer]
          mcps: [playwright, sequential-thinking]
        G4:
          agents: [security_scanner, documenter]
          mcps: [github]
    mcp_usage:
      sequential-thinking: "Structured gate verification"
      github: "PR creation, issue tracking"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # DEPLOYMENT COMMANDS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  f5-deploy:
    description: "Deployment operations"
    pre_checks:
      mcp:
        required: []
        optional: [github]
    agents:
      auto_invoke:
        - agent: security_scanner
          when: "env == production"
          priority: 1
        - agent: documenter
          when: always
          priority: 2
    mcp_usage:
      github: "PR management, release notes"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# GLOBAL SETTINGS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

settings:
  auto_invoke:
    enabled: true
    confirm_before_execute: false  # Set true for verbose mode
    show_agent_activity: true

  mcp_checks:
    enabled: true
    warn_on_missing: true
    block_on_required_missing: false  # Set true for strict mode

  role_optimization:
    enabled: true
    apply_agent_filter: true
    apply_command_priority: true

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# AGENT DEFINITIONS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

agents:
  code_generator:
    name: "Code Generator"
    emoji: "âš¡"
    purpose: "Generate production-ready code"
    capabilities:
      - "Write clean, maintainable code"
      - "Follow project patterns"
      - "Include traceability comments"

  api_designer:
    name: "API Designer"
    emoji: "ğŸ”Œ"
    purpose: "Design and document APIs"
    capabilities:
      - "RESTful API design"
      - "OpenAPI specification"
      - "API versioning"

  test_writer:
    name: "Test Writer"
    emoji: "ğŸ§ª"
    purpose: "Write comprehensive tests"
    capabilities:
      - "Unit tests"
      - "Integration tests"
      - "E2E tests"
      - "TDD support"

  code_reviewer:
    name: "Code Reviewer"
    emoji: "ğŸ‘€"
    purpose: "Review code quality"
    capabilities:
      - "Code quality checks"
      - "Best practices validation"
      - "Performance review"

  security_scanner:
    name: "Security Scanner"
    emoji: "ğŸ›¡ï¸"
    purpose: "Security analysis"
    capabilities:
      - "OWASP Top 10 checks"
      - "Vulnerability detection"
      - "Security recommendations"

  performance_analyzer:
    name: "Performance Analyzer"
    emoji: "âš¡"
    purpose: "Performance optimization"
    capabilities:
      - "Performance profiling"
      - "Bottleneck detection"
      - "Optimization recommendations"

  documenter:
    name: "Documenter"
    emoji: "ğŸ“"
    purpose: "Generate documentation"
    capabilities:
      - "API documentation"
      - "Code comments"
      - "README generation"
